var totalFeeToPaid=0;
var hiddenFieldsWhereClause="extraDetails";
var FORM_STATUS_PENDING="Pending";
var enrollTypeString="EN";
var semTypeString="SEM";
var basicDetailsId="studentDetails";
var lastValidationId="";
var studentDetails="";
var feeDetailsJSON="";
var globalDataJSON;
var Regular_Exam_Type="Regular";
var Backlog_Exam_Type="Backlog";
var backlogSession="backlog_session_list";
var candidateDataJSON="";
var studentDetails="";
var noOfFieldsToShowWhereClause="miscDetails";
var MobileNoId="TelephoneNumber";
var EmailId="EmailId";
var IS_IMAGE_UPLOAD_GLOABAL_JSON;
var viewDetailsJSON="";
var UIDetailsViewJson="";
var RegularJson="";
var AggregatefailJson="";
var LateralfailJson="";
var examSessionCheck="Y";
var subjectDataJson=[];
var Data = new Object();
var result="";
var hiddenFieldsWhereClause="extraDetails";
var subjectSessionId="";
var eligibilityFlagForRegular="Y";
var examTypeGlobal="";
var semesterGlobal="";
var SubjectCodeFlag="";
var maxSubjectApplicable="";
var helpDeskMsg="Please contact helpdesk";
var networkIssueMsg="Some error occured. Please after some time or contact adminitrator.";
var semWiseFeeFlag=false;
var Photo_Flag="Y";
var subjectId="";
var flagForBck = false;
var flagForReExam=false;
var subjectIdValue="subjectIdValue";
var eligibilty="eligibilty";
var currentDate="";
/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@FRAME WORK FUNCTIONS@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
function plusMinusExpand(valData,Sem)
{
	var id=enrollTypeString+valData+semTypeString+Sem+"_panelDiv";
	var xy=$("#"+id).attr("aria-expanded");
		 if(xy=="true")
		 {
			/* $(document.getElementById("plus"+valData+Sem)).show();
			 $(document.getElementById("minus"+valData+Sem)).hide();*/
			$("#plus"+valData+Sem).show();
			 $("#minus"+valData+Sem).hide();
		 }
		 else
		 {
			 /*$(document.getElementById("minus"+valData+Sem)).show();
			 $(document.getElementById("plus"+valData+Sem)).hide();*/
			 $("#plus"+valData+Sem).hide();
			 $("#minus"+valData+Sem).show();
			 }
		 
	
}
function formOnloadFunction(){
	startLoader();
	changeFormWidth();
	fetchGlobalData();
	fetchCandidateData();      /*Function used to fetch details from CMS API*/
	tabNavigationActivation();
	generateErrorMessagesForMandatory();
	$('#bannerDiv').css('background','url(images/onlineAppForm/form61994/bannerImage.jpg) left top no-repeat');
	//fetchCandidateLabels();
	
}
function formViewOnLoadFunction(){	
	changeFormWidth();
	$('#bannerDiv').css('background','url(images/onlineAppForm/form61994/bannerImage.jpg) left top no-repeat');
	//generateHTMLOnView();
	stopLoader();
}
function getViewDetailsFrameworkAfter(){
  $('.responsive-tabs').bootstrapResponsiveTabs({ minTabWidth: 180, maxTabWidth: 325});
  fetchViewDetailsOnView();
  fetchLabelNamesOnView();
  $("#onlinePaymentMsg").hide();
  getCurrentDateFromServer();
}
function fnGetUICustMsgForPaymentMsg(app_seq_no,amount,txnNo,orderId){
	var paymentHtml='';
	paymentHtml+='<div class="row" style="margin:0px;padding:0px;"><div class="classForAllFieldLabels">Thanks for submitting your Application Form '+app_seq_no+' which can be used for all future correspondence</div></br>';
	paymentHtml+='<div class="col-lg-offset-2 col-md-offset-2 col-lg-4 col-md-4 col-sm-6 col-xs-6 "><span>Amount(in Rupees) : </span></div><div class=" col-lg-2 col-md-2 col-sm-6 col-xs-6"><span>'+amount+'</span></div>';
	paymentHtml+='<div class="col-lg-offset-2 col-md-offset-2 col-lg-4 col-md-4 col-sm-6 col-xs-6 "><span>Payment Transaction No : </span></div><div class=" col-lg-2 col-md-2 col-sm-6 col-xs-6"><span>'+txnNo+'</span></div></div>';
	//$("#PaymentMsgPlaceHolder").html(paymentHtml);
	$("#PaymentMsgPlaceHolder").addClass("tab-insidecontent customSectionDivClass");
	alertMsg(paymentHtml);
	
}
/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Image Upload Function@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
function fileUploadOnClickFn(fieldId, identifier){
	if(identifier == "" || identifier == "null")
		openPopUpIdentifier('',identifier);
	else
	    openPopUpIdentifier(identifier,identifier);
	
}
function showImageUploadDiv(identifier)
{
    openImageModal(identifier);
    $("#"+identifier).val("");
    $("#"+identifier+"_previewBtn").css('display','none');
	var fileNameArray = getValue("txtFileName").split("||");
	var filePathArray = getValue("txtFilePathEdit").split("||");
	var indexOfField = fileNameArray.indexOf(identifier);
	if(indexOfField > -1 && filePathArray.length > indexOfField)
	{
		$("#"+identifier+"_previewBtn").attr("href", filePathArray[indexOfField]);
		$("#"+identifier+"_previewBtn").css('display','');
		$("#"+identifier+"_span").html("File Uploaded.");
		$("#"+identifier+"_span").css('color','green');
		$("#"+identifier+"_span").css('font-weight','bold');
	}
}
function openImageModal(identifier)
{
	        $("#imageUploadContent").html("");
	        var htmlText="";
			var htmlText1="<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6'>" +
			    "<div style='float: left; width: 350px;'>" +
			    "<input id='"+identifier+"' name='"+identifier+"' style='display: none;'  onchange='$(\"#"+identifier+"_span\").html(this.value.split(\"\&#92;&#92;\")[2]);' type='file'>"+
			    "<input onclick='$(\"#"+identifier+"\").click();' class=' btn btn-primary' value='Browse' type='button' id='"+identifier+"_file'>"+
			    "<span id='"+identifier+"_span' style='margin-left: 6px;'>No File Selected.</span></div>";
			var htmlText2="<div><a class='btn btn-primary' style='color: #fff;' onclick='' id='"+identifier+"_upload' data-statickey='Upload'>Upload</a>";
			var htmlText3="<a href='' target='_blank' class='btn btn-primary' style='display: none;margin-left: 4px;' id='"+identifier+"_previewBtn' data-statickey='Preview'>Preview</a></div>";
			var htmlText4="<span class='docNote'style='margin-top: 15px;color: #780e1d;font-size: 11px;position: absolute;'>" +
			              "Note: The allowed document type are .jpg &amp; .jpeg and the maximum allowed document size is 1 MB.</span>";
			var htmlText5="<span class='errorSpanCustomClass' id='"+identifier+"_errorSpan'></span>";
			htmlText=htmlText1+htmlText2+htmlText3+htmlText4+htmlText5;
		    $("#imageUploadContent").append(htmlText);
			$("#imageUploadContent").css("height", "100px");
			$("#"+identifier+"_upload").attr('onclick','fileUploadOnClickFn("'+identifier+'","'+identifier+'");');
			$("#imageUploadBtn").attr('onclick','fnCalledOnImageModalClose();');
	        $('.imageUploadModal').modal('show');
}
function fnCalledOnImageModalClose()
{
	$('.imageUploadModal').modal('hide');
}
/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Ajax Calls@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
function fetchGlobalData()
{
	if(null==window.opener){
		var sessChk=window.parent.$("#sessChk").val();
		var app_seq_no=window.parent.$("#app_seq_no").val();
		var parentFormId=window.parent.$("#formId").val();
	}else{
		var sessChk=window.opener.$("#sessChk").val();
		var app_seq_no=window.opener.$("#app_seq_no").val();
		var parentFormId=window.opener.$("#formId").val();
	}
	$.ajax({
	type:"POST",
	url:"/EForms/cdmsservlet",
	data:{

		orgId : $("#orgId").val(),
		actionId:"getDataForEnrollment",
		callMethod:"CMS_fetchDATA",
		CMS_callMethod:"cmsEnrollmentConfigurationAPI",
		app_seq_no:app_seq_no,//"AK1198@csvtu.ac.in",
		loginFormId:parentFormId,//"58592",
		argnum : 0,
		sessChk : sessChk	
		//userId:"2205567"
	},
	dataType: "json",
	success	:function(result)
	{
		globalDataJSON=result;

	},
	error : function(result)
	{
		openInvalidDataModal("Error", networkIssueMsg);
		//alert("Some error occured. Please after some time or contact adminitrator.");

	}
	});
}
function tableDataMain(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId)
{	
	
	var message8="Not eligible to Enroll for Regular";
	if(Data.data!="" && Data.data!=null && Data.data!=undefined )
	{
		 var DataLength=Data.data.length;
		 var flag=false;
		 for(var i=0;i<DataLength;i++)
		 {
			 var examHeadingKeyValue=Object.keys(Data.data[i]);
			 if(examHeadingKeyValue==valData)
    	     { 
				   if(examSessionCheck=="Y" && enrollmentId==2)
				    {
					  
					   var backSemKeyValue=Object.keys(Data.data[i][examHeadingKeyValue]); 
					  
					   for(var j=0;j<backSemKeyValue.length;j++)
						   {
						   var semIdFromJson=backSemKeyValue[j];
							//var semIdFromJson=dataKeys[a].split("-")[1];
						   if(semIdFromJson==semName)
							   {
							   flag=true;
							   stopLoader();
							   tableData(valData,semName,Data.data[i][valData],enrollmentId,subjectSessionId); 
							   
							   }
						   else{
							   continue;
						   }
						   }
					 }
					 else
					 {
						 if(enrollmentId=="1")
						 {
							 flag=true;
							// conditionalEnrollment();
							 var currentSemId=Data.data[i][valData][semName][0].semester_id;
							 //var semExamTypeId=enrollTypeString+enrollmentId+semTypeString+currentSemId;
							 stopLoader();
							 tableData(valData,semName,Data.data[i][valData],enrollmentId,subjectSessionId); 
							 setTheoryOrPracticalValue("",enrollmentId,currentSemId,"","");
						 }
						 else{
							 flag=true;
								stopLoader();
								 tableData(valData,semName,Data.data[i][valData],enrollmentId,subjectSessionId); 
						 }
						
					 }
				 }
    	     }
			 if(!flag)
			 {
				 if(enrollmentId==2 && examSessionCheck=="Y")
					 {
					 fetchCandidateSubjectDetails(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId);
					 
					 }
				 else if(enrollmentId==1)
				 { 
					 if(eligibilityFlagForRegular!="N")
						 {
						// conditionalEnrollment();
						 fetchCandidateSubjectDetails(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId); 
						 }
					 else{
						 openInvalidDataModal("Error", message8);
					 }
				 }
				 else
				 {
					 fetchCandidateSubjectDetails(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId); 
				 }
				 } 
			 }
			else
			{
				if(enrollmentId==1)
				 { 
					 if(eligibilityFlagForRegular!="N")
						 {
						 //conditionalEnrollment();
						 fetchCandidateSubjectDetails(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId); 
						 }
					 else{
						 openInvalidDataModal("Error", message8);
					 }
				 }
				else
				{
					fetchCandidateSubjectDetails(index,valData,semName,enrollmentId,subjectSessionId,batchSessionId);
				}
				
			}
} 
function subjectDataAfterResponse(index,valData,semName,enrollmentId,subjectSessionId)
{
	if(Data.data!="" && Data.data!=null && Data.data!=undefined )
	 {
		//var currentSemId=candidateDataJSON[0].AcadSessionId;
		   var DataLength=Data.data.length;
			for(var i=0;i<DataLength;i++)
			 {
				var examHeadingKeyValue=Object.keys(Data.data[i]);
				 if(examHeadingKeyValue==valData)
	    	     { 
					if(enrollmentId!=2)
					{
						if(enrollmentId==1)
							{
							 var semString=semHeading(index,Data.data[i][valData],semName);
							 examNameWithoutSapce=valData.replace(/\s/g, '');
								$("#examTypeSemesterContentDiv"+examNameWithoutSapce).append(semString);
								$("#"+examNameWithoutSapce+"_mainDiv").hide();
                                var currentSemId=Data.data[i][valData][semName][0].semester_id;
								 var semExamTypeId=enrollTypeString+enrollmentId+semTypeString+currentSemId;
								$("#"+semExamTypeId+"_panelDiv").click();
								stopLoader();
								tableData(valData,semName,Data.data[i][valData],enrollmentId,currentSemId); 
								//generateFee("",enrollmentId,currentSemId,"","",""); 
								//setTheoryOrPracticalValue("",enrollmentId,currentSemId,"","");
								//generateFee("",enrollmentId,currentSemId,"","","");

								//var semNameUpperCase=semName.toUpperCase();
								
								//
							}
						else
						   {
							 var semString=semHeading(index,Data.data[i][valData],semName);
								$("#examTypeSemesterContentDiv"+checkSpaceInSemName(valData)).append(semString);
								$("#"+checkSpaceInSemName(valData)+"_mainDiv").hide();
								stopLoader();
								//tableData(valData,semName,Data.data[i][valData],enrollmentId,subjectSessionId); 
						    }
						 
				   }
				else{
					         stopLoader();
							 tableData(valData,semName,Data.data[i][valData],enrollmentId,subjectSessionId); 
							 break;
			    	     }
	    	     }
						 else{
							 continue;
						 }
					 }
				
				 plusMinusExpand(valData,semName);
				 }	     
			//tableData(valData,semName,Data.data[0][valData],enrollmentId);
	else
	 {
		 setTimeout("subjectDataAfterResponse("+index+","+valData+","+semName+","+enrollmentId+","+subjectSessionId+");", 500);
		 }
}

var obj = new Object();
function fetchCandidateSubjectDetails(index,valData,semName,enrollmentTypeIdValue,subjectSessionId,batchSessionId)
{
	startLoader();
	var awardId=candidateDataJSON[0].award_id;
	
//	examSessionCheck=globalDataKey(awardId,subjectSessionId,valData,"sem_selection_by_student");
	//maxSubjectApplicable=globalDataKey(awardId,subjectSessionId,valData,"no_of_subject_enrolled");
	if(null==window.opener){
		var sessChk=window.parent.$("#sessChk").val();
		var app_seq_no=window.parent.$("#app_seq_no").val();
		var parentFormId=window.parent.$("#formId").val();
	}else{
		var sessChk=window.opener.$("#sessChk").val();
		var app_seq_no=window.opener.$("#app_seq_no").val();
		var parentFormId=window.opener.$("#formId").val();
	}
		 $.ajax({
		type:"POST",
		url:"/EForms/cdmsservlet",
		data:
		{
			orgId :  $("#orgId").val(),
			actionId:"getDataForEnrollment",
			callMethod:"CMS_fetchDATA",
			CMS_callMethod:"cmsGetSubjectDetailsEformAPI",
			app_seq_no:app_seq_no,
			loginFormId:parentFormId,
			sessChk : $("#sessChk").val(), 
			enrollmentTypeId: enrollmentTypeIdValue, 
			studentID: candidateDataJSON[0].StudentId,
			batchSessionId: candidateDataJSON[0].AcadSessionId,
			subjectSessionId:batchSessionId,
			sgmId:candidateDataJSON[0].sgm_id,
			//userId:"2205567",
			argnum : "0",			
		} ,
		 dataType: "json",
		success :function(result)
		{
			var checkBacklog=result;
			if(jQuery.isEmptyObject(checkBacklog)){
				stopLoader();
				openInvalidDataModal("Error", networkIssueMsg);
				
				return false;
				//alert("Some error occured. Please after some time or contact adminitrator.");
			}
			//checkBacklog.hasOwnProperty('fail_remark')
			//console.log(checkBacklog.hasOwnProperty('fail_remark'));
			if(checkBacklog.hasOwnProperty('fail_remark'))
			{ 
				stopLoader();
				var message9=checkBacklog['fail_remark'];
				openInvalidDataModal("Error", message9);
				/*var message9="Not Applicable to Enroll for: "+valData;
				openInvalidDataModal("Error", message9);*/
				return false;
			}
			else{
				var tempKey = "";
				var tempValue = new Object();
				    if(enrollmentTypeIdValue==2 && examSessionCheck=="Y")
				    	{
				    	
				    	tempKey = Object.keys(result[valData]);
				    	tempValue = result[valData][tempKey];
				    	obj[tempKey] = tempValue;
				    	var tempObj = new Object();
				    	tempObj[valData] = obj;
				    	if(!flagForBck){
				    		subjectDataJson.push(tempObj);
					    	Data["data"]=subjectDataJson;
					    	subjectDataAfterResponse(index,valData,semName,enrollmentTypeIdValue,subjectSessionId);
					    	flagForBck=true;
				    	}
				    	else{
				    		subjectDataAfterResponse(index,valData,semName,enrollmentTypeIdValue,subjectSessionId);
				    		
				    	}
				    	//subjectDataJson["Backlog"] = obj;
				    	
				    	}
				    else{
				    	
				    		subjectDataJson.push(result);
				    	  Data["data"]=subjectDataJson;
				   	      subjectDataAfterResponse(index,valData,semName,enrollmentTypeIdValue,subjectSessionId);	
				   	      
				    }
				  
			}
	
			
		 },
		error : function(result)
		{
			openInvalidDataModal("Error", networkIssueMsg);
		//alert("Some error occured. Please after some time or contact adminitrator.");
		}
		});
			return Data;
}
function fetchCandidateData()
{
	if(null==window.opener){
		var sessChk=window.parent.$("#sessChk").val();
		var app_seq_no=window.parent.$("#app_seq_no").val();
		var parentFormId=window.parent.$("#formId").val();
	}else{
		var sessChk=window.opener.$("#sessChk").val();
		var app_seq_no=window.opener.$("#app_seq_no").val();
		var parentFormId=window.opener.$("#formId").val();
	}
	$.ajax({
	type:"POST",
	url:"/EForms/cdmsservlet",
	data:{
		
		orgId : $("#orgId").val(),
		actionId:"getDataForEnrollment",
		callMethod:"CMS_fetchDATA",
		CMS_callMethod:"getStudentEnrollMentDetails",
		app_seq_no:app_seq_no,//"AK1198@csvtu.ac.in",
		loginFormId:parentFormId,//"58592",
		argnum : 0,
		sessChk : sessChk	
		//userId:"2205567"
	},
	dataType: "json",
	success	:function(result)
	{
		candidateDataJSON=result;
		//conditionalEnrollment();
		examHeading();
		fetchCandidateLabels();
		fetchFeeDetails();
		generateExamTypeHeadingInFee();
	},
	error : function(result)
	{
		//openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
		openInvalidDataModal("Error", "Exceeded the time limit to complete the course");
	}
	});
}

function fetchCandidateLabels()
{ 
	if(candidateDataJSON!="" && candidateDataJSON!=undefined && candidateDataJSON!=null)
	{
		$.ajax({
		type:"POST",
		url:"/EForms/cdmsservlet",
		data:{
			orgId :  $("#orgId").val(),
			actionId:"getDataForEnrollment",
			callMethod:"fetchMasterDataUI",
			//CMS_fetchDATA:"fetchMasterDataUI",
			txtAppEnrollmentNo:candidateDataJSON[0].RegistrationNo,
			txtAppRollNo:candidateDataJSON[0].RollNo,
			txtSGMId:candidateDataJSON[0].sgm_id,
			argnum : 0,
		},
		dataType: "json",
		success	:function(result)
		{
			studentDetails=result;
			if("Y"==studentDetails.isValid){
				generateLabelsInSection();
			}else{
				
				openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
			}
			
		},
		error : function(result)
		{
			openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
		}
		});
	}
	else
	{
		setTimeout("fetchCandidateLabels();", 500);
	}
}
function fetchFeeDetails()
{ 
	if(candidateDataJSON!="" && candidateDataJSON!=undefined && candidateDataJSON!=null)
	{
		var txtStudentType="Regular";
		if("Y"==candidateDataJSON[0].LateralFlag){
			txtStudentType="Lateral";
		}
		$.ajax({
		type:"POST",
		url:"/EForms/cdmsservlet",
		data:{
			orgId :  $("#orgId").val(),
			txtAwardCode:candidateDataJSON[0].AwardCode,
			txtProgramCode:candidateDataJSON[0].ProgramCode,
			txtStudentType:txtStudentType,//$("#txtStudentType").val(),//"Regular",
			txtFeeCategory:candidateDataJSON[0].FeeCategory,
			examSession:candidateDataJSON[0].sgm_name,
			actionId:"getDataForEnrollment",
			callMethod:"fetchFeeDetails",
			argnum : 0,
		},
		dataType: "text",
		success	:function(result)
		{
			feeDetailsJSON=JSON.parse(result);
			if("N"==feeDetailsJSON.isValid){
				openInvalidDataModal("Error","Fees not configured for enrollment Kindly connect Administrator.");
				startLoader();
			}
			
		},
		error : function(result)
		{
			openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
		}
		});
	}
	else
	{
		setTimeout("fetchFeeDetails();", 500);
	}
}
function fetchViewDetailsOnView()
{ 
		$.ajax({
		type:"POST",
		url:"/EForms/cdmsservlet",
		data:{
			orgId :  $("#orgId").val(),
			txtAppEnrollmentNo:$("#txtAppEnrollmentNo_div").text(),
			txtSGMId:$("#txtSGMId_div").text(),
			paymentTransactionNo:$("#paymentTransactionNo_div").text(),
			actionId:"getDataForEnrollment",
			callMethod:"fetchViewDetails",
			argnum : 0,
		},
		dataType: "json",
		success	:function(result)
		{
			viewDetailsJSON=result;
			generateHallTicketButton();
		},
		error : function(result)
		{
			openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
		}
		});

}
function fetchLabelNamesOnView()
{ 
	if(viewDetailsJSON!="" && viewDetailsJSON!=undefined && viewDetailsJSON!=null)
	{
		$.ajax({
			type:"POST",
			url:"/EForms/cdmsservlet",
			data:{
				orgId :  $("#orgId").val(),
				actionId:"getDataForEnrollment",
				callMethod:"fetchLabelUIDetails",
				argnum : 0,
			},
			dataType: "json",
			success	:function(result)
			{
				UIDetailsViewJson=result;
				generateHTMLOnView();
				generateExamTypeOnView();
				generateExamSemInFeeSecOnView(); 
			},
			error : function(result)
			{
				openInvalidDataModal("Error", networkIssueMsg);//alert("Some error occured. Please after some time or contact adminitrator.");
			}
			});
	}
	else
	{
		setTimeout("fetchLabelNamesOnView();", 500);
	}
}
/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Dynamic Student Details@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
function generateLabelsInSection()
{
	if(globalDataJSON!=null && globalDataJSON!="" && globalDataJSON!=undefined)
	{
	IS_IMAGE_UPLOAD_GLOABAL_JSON=globalDataJSON.photo_upload_allowed;
	if(studentDetails!="" && studentDetails!=null && studentDetails!=undefined)
	{

		SubjectCodeFlag=studentDetails.Data.isSubRule;
		var returnLabelHtml="";
		var noOfFieldsToShow=studentDetails.Data.UIData[noOfFieldsToShowWhereClause][0].txtMasterName; 
		var keys=Object.keys(studentDetails.Data.UIData);
		for(var index=0;index<keys.length;index++)
		{
			if(keys[index]==hiddenFieldsWhereClause)
			{
				var innerkeys=Object.keys(studentDetails.Data.UIData[keys[index]]);
				for(var value=0;value<innerkeys.length;value++)
				{
					var idValue=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtMasterValue;
						var metadataId=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtFieldHtmlName;
						var valueToSetHidden=candidateDataJSON[0][idValue];
						createHiddenFieldInHtmlForLabels(metadataId,valueToSetHidden);
					
				}
			}
			else
		    {
				var contentHtml='<div class="tab-insidecontent customSectionDivClass" id="sectionData_'+keys[index]+'" style="background: rgba(249, 249, 249, 1); padding: 15px 20px; margin: 0px 15px; border: 1px solid #ddd; margin-top: 10px;">'+
					            '<div class="row customSectionRowDivClass" id="sectionDataLabel_'+keys[index]+'">';
								if(keys[index]==basicDetailsId){
									  if(Photo_Flag=="Y"){
									     contentHtml+='<div class="col-lg-9 col-md-9 col-sm-6 col-xs-6 customOneFieldDivClass" id="examEnrollmentDiv'+keys[index]+'" ></div>'+
				                                      '<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 customOneFieldDivClass" id="photoUploadDiv'+keys[index]+'" ></div>';
									  }
									 else{
										 contentHtml+='<div class="col-lg-12 col-md-12 col-sm-6 col-xs-6 customOneFieldDivClass" id="examEnrollmentDiv'+keys[index]+'" ></div>';
									   }
								}
								else{
					                    contentHtml+='<div class="col-lg-12 col-md-12 col-sm-6 col-xs-6 customOneFieldDivClass" id="examEnrollmentDiv'+keys[index]+'" ></div>';
								}            
					            '</div></div>';
				$("#"+keys[index]+"_mainDiv").append(contentHtml);
				var innerkeys=Object.keys(studentDetails.Data.UIData[keys[index]]);
				for(var value=0;value<innerkeys.length;value++)
				{
					var idValue=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtMasterValue;
					if(idValue!="eligibility"){
						var metadataId=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtFieldHtmlName;
						var idName=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtMasterName;
						var isEditAllowed=studentDetails.Data.UIData[keys[index]][innerkeys[value]].isEditAllowed;
						var fieldType=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtFieldType;
						var isCustomHookRequired=studentDetails.Data.UIData[keys[index]][innerkeys[value]].isCustomHookRequired;
						var dropDownOptions=studentDetails.Data.UIData[keys[index]][innerkeys[value]].DropDownValues;
						returnLabelHtml=generatelabels(idValue,idName,value,keys[index],noOfFieldsToShow,isEditAllowed,fieldType,metadataId);
						$("#examEnrollmentDiv"+keys[index]).append(returnLabelHtml); 
						if(isEditAllowed=="Y" && fieldType=="DropDown")
						{
							if(isCustomHookRequired=="Y")
							{
								if(typeof window.generateOptionsInDropDownCustomHook=='function'){
									generateOptionsInDropDownCustomHook(idValue,dropDownOptions);
								}
							}
							else
							{
								generateOptionsInDropDown(idValue,dropDownOptions);
							}
						}
						if(keys[index]==basicDetailsId){
							if(value>=noOfFieldsToShow)
							{
								$("#"+idValue+"_divContainer").addClass("customOneFieldDivClassHideLink");
								$("#"+idValue+"_divContainer").hide();
							}
						}
					}
				}
				if(keys[index]==basicDetailsId){
					$("#showMoreLink"+keys[index]).attr('onclick','showHiddenFieldsOnLink("'+keys[index]+'");');
					makeHtmlForShowLess(keys[index]);
					$("#showLessLink"+keys[index]).attr('onclick','hideFieldsOnLink("'+keys[index]+'");');
					if(Photo_Flag=="Y"){
					generatePhotoUploadSection();
					changeDummyImagePath();
					}
				}
			}
		}
		setCandidateData();
		
		if(typeof window.addFunctionlityCustomHook=='function'){
			addFunctionlityCustomHook();
		}
	
	}
	}
	else
	{
		setTimeout("generateLabelsInSection();", 500);
	}
}
function generateOptionsInDropDownCustomHook(innerkeysValue,dropDownOptions)
{
	var dropDownIdAddedFor = document.getElementById(innerkeysValue);
	var keysOptions=Object.keys(dropDownOptions);
	for(var index = 0; index < keysOptions.length; index++)
	{
		var option = document.createElement("option");
		option.text = dropDownOptions[keysOptions[index]];
		option.value = keysOptions[index];
		option.title = dropDownOptions[keysOptions[index]];
		dropDownIdAddedFor.add(option);
	}
}
function generateOptionsInDropDown(innerkeysValue,dropDownOptions)
{
	var dropDownIdAddedFor = document.getElementById(innerkeysValue);
	for(var index = 0; index < dropDownOptions.length; index++)
	{
		var option = document.createElement("option");
		option.text = dropDownOptions[index].txtMasterName;
		option.value = dropDownOptions[index].txtMasterValue;
		option.title = dropDownOptions[index].txtMasterName;
		dropDownIdAddedFor.add(option);
	}
}
function checkExamStatus(id,examType,semExamTypeId,a,k,enrollId)
{
	if($("#"+id).is(':checked'))
		{
		$("#"+"tr_subjectEnrollementType_"+k+semExamTypeId+"_td_5").show();
		}
	else{
		$("#"+"tr_subjectEnrollementType_"+k+semExamTypeId+"_td_5").hide();
	}
}
function generatelabels(innerkeysValue,innerkeysName,value,sectionName,noOfFieldsToShow,isEditAllowedFlag,fieldType,metaDataId)
{	
	   var labelHtml="";
	   if(value==noOfFieldsToShow)
	   {
		    labelHtml+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-6 customOneFieldDivClass" id="showMoreLink'+sectionName+'_divContainer" >'+
		               '<a href="#" id="showMoreLink'+sectionName+'" class="showMoreLessClass">Show More</a>'+
		    	       '</div>';
	   }
	        labelHtml+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-6 customOneFieldDivClass customOneFieldDivClassShowLink" id="'+innerkeysValue+'_divContainer">'+
		              '<div class="form-group customOneFieldDivClass" id="">'+
			          '<label class="classForAllFieldLabels " style="font-weight:bold!important;" id="'+innerkeysValue+'_labelDiv">'+ innerkeysName +
			          '<span class="multiLingualSpanClass" id="multilingualSpan_'+innerkeysValue+'"></span>';
	  if(isEditAllowedFlag=="Y" && fieldType!="DropDown")
	  {
	        labelHtml+=generateEditFuncOnField(innerkeysValue,innerkeysName,metaDataId);
	  }
	  if(isEditAllowedFlag=="Y" && fieldType=="DropDown")
	  {     
		  labelHtml+='<span class="mandatory redTxt " id="'+innerkeysValue+'_Asterik" style="">*</span></label>'+
			         '<select title="---Select---" id="'+innerkeysValue+'" name="'+innerkeysValue+'" '+
		             'class="mandatoryinput fontAndColor form-control"'+
		             'style="" onchange=fnStoreDropdownText("'+metaDataId+'","'+innerkeysValue+'"); data-live-search="true">'+
		             '<option value="">---Select---</option></select>'+
		             '<span class="errortxt errorSpanCustomClass" id="'+innerkeysValue+'_errorSpan">'+
		             'Please select '+innerkeysName+'.</span>';
		  labelHtml+='<input type="hidden" id="'+metaDataId+'" name="'+metaDataId+'"></input>';
	  }
	  if(isEditAllowedFlag=="N")
	  { 
		  labelHtml+='</label>';
		  labelHtml+='<input type="hidden" id="'+metaDataId+'" name="'+metaDataId+'"></input>';
	  }
		  labelHtml+='<span class="" id="'+innerkeysValue+'_span" style=""></span>';
	  
	  labelHtml+='</div></div>';
	  return labelHtml;	
}
function generateEditFuncOnField(innerkeysValue,innerkeysName,metaDataId)
{
 var editlabelHtml="";
 var innerkeysValueCon=metaDataId+"Confirm";
 var innerkeysNameCon="Confirm "+innerkeysName;
 editlabelHtml='<span class="mandatory redTxt " id="'+metaDataId+'_Asterik" style="display:none;">*</span>&nbsp;&nbsp;'+
		       '<span aria-hidden="true" id="'+metaDataId+'_edit" class="fa fa-pencil-square-o fa-lg" '+
		       'style="color: rgb(51, 110, 255); cursor: pointer; display: inline-block;" title="Edit" onclick=editFields("'+metaDataId+'","'+innerkeysValue+'",true);>'+
		       '</span>'+
	           '<span aria-hidden="true" id="'+metaDataId+'_cancel" class="fa fa-times fa-lg" '+
		       'style="color: rgb(51, 110, 255); cursor: pointer; display: none;" title="Cancel"'+
	           'onclick=editFields("'+metaDataId+'","'+innerkeysValue+'",false);hideValidationDiv("errorMsg","'+metaDataId+'");hideValidationDiv("errorMsg","'+innerkeysValueCon+'");></span>'+
	           '<input type="text" id="'+metaDataId+'" name="'+metaDataId+'" class="form-control mandatoryinput fontAndColor form-control"'+
			   'placeholder="" onkeypress="" maxlength="50" onpaste="return false" onblur="" style="display:none;width: 84%;">';
	if(innerkeysValue==MobileNoId || innerkeysValue==EmailId) 
	{
	editlabelHtml+='<span style="display:none;" id="'+innerkeysValueCon+'_Span">'+innerkeysNameCon+'</span>'+ 
				   '<span class="mandatory redTxt " id="'+innerkeysValueCon+'_Asterik" style="display:none;">*</span>'+
				   '<input type="text" id="'+innerkeysValueCon+'" name="'+innerkeysValueCon+'" class="form-control mandatoryinput fontAndColor form-control"'+
				   'placeholder="" onkeypress="" maxlength="50" onpaste="return false" onblur="" style="display:none;width: 84%;">';
	}
   editlabelHtml+='</label>';
   return editlabelHtml;
}
function generateFormStatusDiv(examTypeId,semTypeId)
{
	var semExamTypeId=enrollTypeString+examTypeId+semTypeString+semTypeId;
	var formStatusHtml=
	'<div class="row" id="'+semExamTypeId+'FormStatus_mainDiv">'+
    '<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 customOneFieldDivClass" id="">'+
    '<label class="classForAllFieldLabels " id="'+semExamTypeId+'FormStatus_labelDiv" style="font-weight: bold">Form Status:'+
    '<span class="multiLingualSpanClass" id="multilingualSpan_'+semExamTypeId+'FormStatus"></span></label></div>'+
    '<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 customOneFieldDivClass" id="">'+
    '<span class="" id="'+semExamTypeId+'FormStatus_span" style="font-weight: bold">Pending</span></div></div>';
	setFormStatus();
	return formStatusHtml;
}
function makeHtmlForShowLess(sectionName)
{
	var showLessHtml='<div class="oneRowDivClass col-lg-12 col-sm-12 col-md-12 col-xs-12">'+
		             '<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 customOneFieldDivClass" id="showLessLink'+sectionName+'_divContainer" style="display:none">'+
                     '<a href="#" id="showLessLink'+sectionName+'" class="showMoreLessClass" >Show Less</a>'+
                     '</div></div>';
	$("#sectionDataLabel_"+sectionName).append(showLessHtml); 

}
function generatePhotoUploadSection()
{
	
		var photoUploadHtml='<div class="col-lg-12 col-md-12 col-sm-6 col-xs-6 customOneFieldDivClass imageUploadDiv" id="Photo_id_divContainer">'+
	                '<div class="customOneFieldDivClassPhoto" id="">'+
		            '<div class="uploadedImageCustomCss " id="uploadedImageDivPhoto">'+
                    '<div class="uploadImageLinkCss" id="uploadImageLink" style="">'+
                    '<a class="uploadImageAnchorCss" id="UploadImageAnchor"  data-target="#imageUploadModal">Upload Image</a></div>'+
                    '<img class="imagePhoto img-responsive" align="middle" alt="Photograph" src="" style="border-width: 1px; border-style: solid;width: 162px;" id="Photo_id"  data-target="#imageUploadModal" onclick="showImageUploadDiv();">'+
                    '</div></div>';
var signUploadHtml='<br><div class="customOneFieldDivClassSign" id="">'+
	               '<div class="uploadedSignCustomCss" id="uploadedSignDivSignature">'+
			       '<div class="uploadSignLinkCss" id="uploadSignLink" style="">'+
                   '<a class="uploadSignAnchorCss" id="UploadSignAnchor" data-target="#imageUploadModal">Upload Sign</a>'+
                   '</div>'+
                   '<img class="imageSign img-responsive" align="middle" alt="Signature" src="" style="border-width: 1px; border-style: solid;width: 179px;height: 84px!important;" id="Sign_id" data-target="#imageUploadModal" onclick="showImageUploadDiv();">'+
                   '</div></div></div></div>';
  //$("#sectionDataLabel_studentDetails").append(photoUploadHtml+signUploadHtml); 
  $("#photoUploadDivstudentDetails").append(photoUploadHtml+signUploadHtml); 
  $("#UploadImageAnchor").attr('onclick','showImageUploadDiv("uploadPhotoEnrollment");');
  $("#UploadSignAnchor").attr('onclick','showImageUploadDiv("uploadSignEnrollment");');
  $("#Photo_id").attr('onclick','showImageUploadDiv("uploadPhotoEnrollment");');
  $("#Sign_id").attr('onclick','showImageUploadDiv("uploadSignEnrollment");');
  $("#Photo_id").attr("src","images/onlineAppForm/form61986/placeHolder.png");
  $("#Sign_id").attr("src","images/onlineAppForm/form61986/DummySign.jpg");
}
function setCandidateData()
{
	if(candidateDataJSON!="" && candidateDataJSON!=null && candidateDataJSON!=undefined)
	{
		var jsonData = candidateDataJSON;
		for(var i=0; i<jsonData.length; i++)
	    {
			var keys=Object.keys(studentDetails.Data.UIData);
			for(var index=0;index<keys.length;index++)
			{
				var innerkeys=Object.keys(studentDetails.Data.UIData[keys[index]]);
				for(var value=0;value<innerkeys.length;value++)
				{
					var IdValue=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtMasterValue;
					var metaDataId=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtFieldHtmlName;
					var isEditAllowed=studentDetails.Data.UIData[keys[index]][innerkeys[value]].isEditAllowed;
					var fieldType=studentDetails.Data.UIData[keys[index]][innerkeys[value]].txtFieldType;				
					if(jsonData[i][IdValue]!="" && jsonData[i][IdValue]!= null && jsonData[i][IdValue]!= undefined)
					{
						$("#"+IdValue+"_span").html(checkEmptyOrNull(jsonData[i][IdValue]));
						if($("#"+metaDataId).length<=0)
						{
							createHiddenFieldInHtmlForLabels(metaDataId,jsonData[i][IdValue]);
						}
						else
						{
							$("#"+metaDataId).val(checkEmptyOrNull(jsonData[i][IdValue]));
						}
						if(isEditAllowed=="Y" )
						{
							if(fieldType=="DropDown")
							{
								$("#"+IdValue+" option:selected").text($("#"+metaDataId).val());
								$("#"+IdValue+"_Asterik").hide();
								$("#"+IdValue+"_span").hide();
								$("#"+metaDataId).hide();
							}
							else if(fieldType=="Text")
							{
								$("#"+IdValue+"_Asterik").hide();
								$("#"+IdValue+"_span").show();
						    }
						}
						
					}
					else
					{
						if(isEditAllowed=="N")
						{
							$("#"+IdValue+"_span").html("--");
						}
						if(isEditAllowed=="Y" && fieldType!="DropDown")
						{
							$("#"+IdValue+"_span").html("--");
						}
					}
				}
			}
	    }
		setCMSPhotoAndSignPath();
		showHideUplaodableLink();
		stopLoader();
	}
	else
	{
		setTimeout("setCandidateData();", 500);
	}
}
function showHideUplaodableLink()
{
	if(IS_IMAGE_UPLOAD_GLOABAL_JSON!="Y")
	{
		document.getElementById("uploadImageLink").style.display="none";
		 document.getElementById("uploadSignLink").style.display="none";
		 document.getElementById("Photo_id").style.opacity = "1";
		 document.getElementById("Sign_id").style.opacity = "1";
		//("#uploadSignLink").hide();
	}
	}
function setFormStatus()
{
	if(studentDetails!="" && studentDetails!=null && studentDetails!=undefined){
		if(studentDetails.Data.isValidFormStatus=="Y")
		{
			var keys=Object.keys(studentDetails.Data.formStatus);
			for(var index=0;index<keys.length;index++)
			{
				var enrollmentTypeId=studentDetails.Data.formStatus[index].txtAppEnrollmentTypeId;
				var semesterId=studentDetails.Data.formStatus[index].txtApplyingSem;
				var semExamTypeId=enrollTypeString+enrollmentTypeId+semTypeString+semesterId;
				var status=studentDetails.Data.formStatus[index].formStatus;
				$("#"+semExamTypeId+"FormStatus_span").html(status);	
			}
		}
	}
	else
	{
		setTimeout("setFormStatus();", 500);
	}
}
function editFields(id,spanId,flag)
{
  	if(flag)
  	{
  		if($("#"+spanId+"_span").html()!="" && $("#"+spanId+"_span").html()!=null && $("#"+spanId+"_span").html()!="--" && $("#"+spanId+"_span").html()!=undefined)
  		{
  			$("#"+id).val($("#"+spanId+"_span").html());
  		}
	    enableField(id);
      	showField(id +"_td");
      	showField(id +"Confirm");
    	showField(id +"Confirm_Span");
        showField(id);
        hideField(spanId + "_span");
      	showField(id+"_Asterik");
      	showField(id+"Confirm_Asterik");
        showField(id+"_cancel");
        hideField(id+"_edit");
  	}
  	else
  	{
      
        hideField(id);
      	hideField(id +"_td");
      	hideField(id +"Confirm");
      	hideField(id +"Confirm_Span");
        showField(spanId + "_span");
      	clearValue(id+"Confirm");
        hideField(id+"_cancel");
        showField(id+"_edit");
        hideField(id+"_Asterik");
        hideField(id+"Confirm_Asterik");
  	}
} 
function showHiddenFieldsOnLink(sectionName)
{
	var divId="sectionDataLabel_"+sectionName;
	var arrayOfIds=document.getElementById(divId).querySelectorAll(".customOneFieldDivClassShowLink");  
	for(var idIndex=0;idIndex<arrayOfIds.length;idIndex++)
	{
		var arryId=$(arrayOfIds[idIndex]).attr("id");
		if(!$('#'+arryId).is(':visible'))
		{
			$('#'+arryId).show();
			$('#showMoreLink'+sectionName+'_divContainer').hide();
			$('#showLessLink'+sectionName+'_divContainer').show();
		}
	}
	$("html,body").animate({scrollTop: $("#"+divId).offset().top - 40});
}
function hideFieldsOnLink(sectionName)
{
	var divId="sectionDataLabel_"+sectionName;
	var arrayOfIds=document.getElementById(divId).querySelectorAll(".customOneFieldDivClassHideLink");  
	for(var idIndex=0;idIndex<arrayOfIds.length;idIndex++)
	{
		var arryId=$(arrayOfIds[idIndex]).attr("id");
		if($('#'+arryId).is(':visible'))
		{
			$('#'+arryId).hide();
			$('#showMoreLink'+sectionName+'_divContainer').show();
			$('#showLessLink'+sectionName+'_divContainer').hide();
		}
	}
	$("html,body").animate({scrollTop: $("#"+divId).offset().top - 40});
}
function examHeading()
{
	//var htmlText='';
	var htmlexamHeading1='';
	if(candidateDataJSON!=null && candidateDataJSON!=undefined &&candidateDataJSON!=""){
	var keyValue=candidateDataJSON[0].applicable_enrollment_type;
	if(keyValue!=null && keyValue!=undefined)
	{
		for(var index=0;index<keyValue.length;index++)
		{
			if(keyValue[index].hasOwnProperty("to_be_show")&& keyValue[index].to_be_show=="Y"){
				var nameStr=keyValue[index].name;
				var examHeadingId=keyValue[index].id;
				console.log(examHeadingId);
				var examName=nameStr.charAt(0).toUpperCase() + nameStr.slice(1);
				var idName=examName.replace(/\s/g, '');
				if(idName!=null && idName!=undefined && nameStr!=null && nameStr!=undefined)
					{
			     htmlexamHeading1='<div id="examTypeSemesterMainDiv'+idName+'" >'+
			    '<div class="tab-heading " id="section_2_row_'+index+'_headingDiv" style="margin-top: 0px;">'+
				'<span class="" id="subjectEnrollementDetails_span_section_2_row_'+index+'">'+examName+'</span>'+
				'<span class="multiLingualSpanClass" id="multilingualSpan_subjectEnrollementDetails_span_section_2_row_'+index+'"></span></div>'+
				'<div id="examTypeSemesterContentDiv'+idName+'" class=""></div><br>';
				if(examHeadingId==2)
				{
					if(candidateDataJSON[0].hasOwnProperty('backlog_session_list'))
					{
						var htmlexamHeading2=semHeading(index,"","",idName);
						//htmlText=htmlexamHeading1+htmlexamHeading2;
						$("#examEnrollmentDetails_mainDiv").append(htmlexamHeading1);
						$("#examTypeSemesterContentDiv"+idName).append(htmlexamHeading2);	
					}
					else
					{
						continue;
					}
				}
				else
				{
					  var htmlexamHeading2=semHeading(index,"","",idName);
						//htmlText=htmlexamHeading1+htmlexamHeading2;
						$("#examEnrollmentDetails_mainDiv").append(htmlexamHeading1);
						$("#examTypeSemesterContentDiv"+idName).append(htmlexamHeading2);
				}
			}
			}
			else{
				continue;
			}
		}
	}
	//setFormStatus();
	}
	else
		{
		setTimeout("examHeading();",500);	
		}
}
function semHeading(index,examJson,semType)
{
var htmlSemHeading='';
    //var currentSemId=candidateDataJSON[0].AcadSessionId;
	var keyValue=candidateDataJSON[0].applicable_enrollment_type;
	var valData=keyValue[index].name;
	var enrollmentTypeId=keyValue[index].id;
	//var semIdValueBack=
	var examNameWithoutSapce=valData.replace(/\s/g, '');
   var currentSession=(candidateDataJSON[0].SessionName);
	
	//var currentSession=currentSemester[0]+"-"+currentSemester[1];
			if(enrollmentTypeId==2)
					{
				if(candidateDataJSON[0].hasOwnProperty('backlog_session_list'))
				{
				var examSem=candidateDataJSON[0].backlog_session_list;
				if(examSem!=null&&examSem!=undefined)
				{
				for(var j=0;j<examSem.length;j++)
				{
					if(examSem[j].hasOwnProperty("to_be_show") && examSem[j].to_be_show=="Y"){
						
			                  var semExamTypeId=enrollTypeString+enrollmentTypeId+semTypeString+examSem[j].master_session_id;
								htmlSemHeading+='<div id="'+semExamTypeId+'_mainDiv">';
								htmlSemHeading+=generateFormStatusDiv(enrollmentTypeId,examSem[j].master_session_id);
								setFormStatus();
								htmlSemHeading+='<div class="panel panel-default">';
								htmlSemHeading+='<div style="cursor: pointer;" id="'+semExamTypeId+'_panelDiv" onclick="tableDataMain(\''+index+'\',\''+valData+'\',\''+examSem[j].semester_name+'\',\''+enrollmentTypeId+'\',\''+examSem[j].master_session_id+'\',\''+examSem[j].batch_session_id+'\');plusMinusExpand(\''+enrollmentTypeId+'\',\''+examSem[j].master_session_id+'\'); setTheoryOrPracticalValue(\'\',\''+enrollmentTypeId+'\',\''+examSem[j].master_session_id+'\',\'\',\'\');" class="panel-heading trigger collapsed ariaexpanded'+examNameWithoutSapce+'" aria-expanded="false" data-toggle="collapse"  data-parent="#accordion"  href="#collapse'+enrollmentTypeId+examSem[j].master_session_id+'">';
								htmlSemHeading+='<span class="glyphicon glyphicon-plus" id="plus'+enrollmentTypeId+examSem[j].master_session_id+'" style="float :right"></span>';
								htmlSemHeading+='<span class="glyphicon glyphicon-minus" id="minus'+enrollmentTypeId+examSem[j].master_session_id+'" style="float :right; display:none"></span>';
								htmlSemHeading+='<h4 class="panel-title">';
								htmlSemHeading+='<a class="customSemsterAnchorClass" id="anchor'+semExamTypeId+'">'+examSem[j].semester_name+'</a>';
								htmlSemHeading+='</h4></div>';
								htmlSemHeading+= '<div id="collapse'+enrollmentTypeId+examSem[j].master_session_id+'" class="panel-collapse collapse">'+
							                    '<div class="panel-body">'+
							                    '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">'+
										        '<div id="tbl'+semExamTypeId+'" class="" style=""></div></div></div></div></div></div>';
								htmlSemHeading+='</div>';
							}	
							else{
								continue;
							}
					}
				
				}
				}
			else{
				$("#examTypeSemesterMainDiv"+examNameWithoutSapce.replace(/\s/g, '')).remove();
				}
			
			}
			else if(enrollmentTypeId==1)
				{
				var semIdValue="";
				var semExamTypeId="";
				var aggreSemLength="";
				
				if(examJson!=null && examJson!="" && examJson!=undefined)
				{
					aggreSemLength=Object.keys(examJson);
				     semIdValue=examJson[aggreSemLength[0]][0].semester_id;
				     semExamTypeId=enrollTypeString+enrollmentTypeId+semTypeString+semIdValue;
				    htmlSemHeading+='<div id="'+semExamTypeId+'_mainDiv">';
					$("#"+"EN"+enrollmentTypeId+"SEM"+semIdValue+"FormStatus_span").remove();
					htmlSemHeading+=generateFormStatusDiv(enrollmentTypeId,semIdValue);
					setFormStatus();
					htmlSemHeading+='<div class="panel panel-default">';
					htmlSemHeading+='<div  class="panel-heading trigger collapsed  ariaexpanded'+examNameWithoutSapce+' no-collapsable" aria-expanded="false"  id="'+semExamTypeId+'_panelDiv" style="cursor: pointer;" data-toggle="collapse" data-parent="#accordion" href="#collapse'+enrollmentTypeId+semIdValue+'" onclick="setFormStatus();tableDataMain(\''+index+'\',\''+valData+'\',\''+currentSession+'\',\''+enrollmentTypeId+'\',\''+semIdValue+'\',\'\');plusMinusExpand(\''+enrollmentTypeId+'\',\''+semIdValue+'\');">';
					htmlSemHeading+='<span class="glyphicon glyphicon-plus" id="plus'+enrollmentTypeId+semIdValue+'" style="float :right"></span>';
					htmlSemHeading+='<span class="glyphicon glyphicon-minus" id="minus'+enrollmentTypeId+semIdValue+'" style="float :right; display:none"></span>';
					htmlSemHeading+='<h4 class="panel-title">';
					htmlSemHeading+='<a class="customSemsterAnchorClass" id="anchor'+semExamTypeId+'">'+aggreSemLength+'</a>';
					htmlSemHeading+='</h4></div>';
					htmlSemHeading+= '<div id="collapse'+enrollmentTypeId+semIdValue+'" class="panel-collapse collapse">'+
				                    '<div class="panel-body">'+
				                    '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">'+
							        '<div id="tbl'+semExamTypeId+'" class="" style=""></div></div></div></div></div></div>';
					htmlSemHeading+='</div>';
					
				    }
				else{
					var currentSessionId=candidateDataJSON[0].master_session_id;
					
					htmlSemHeading+='<div id="'+examNameWithoutSapce+'_mainDiv">';
					htmlSemHeading+=generateFormStatusDiv(enrollmentTypeId,currentSessionId);
					htmlSemHeading+='<div class="panel panel-default">';
					htmlSemHeading+='<div  class="panel-heading trigger collapsed ariaexpanded'+examNameWithoutSapce+'" aria-expanded="true"  id="'+examNameWithoutSapce+'_panelDiv" style="cursor: pointer;" data-toggle="collapse" data-parent="#accordion" href="#collapse'+examNameWithoutSapce+'" onclick="tableDataMain(\''+index+'\',\''+valData+'\',\''+currentSession+'\',\''+enrollmentTypeId+'\',\'\');plusMinusExpand(\''+valData+'\',\''+currentSession+'\');">';
					htmlSemHeading+='<span class="glyphicon glyphicon-plus" id="plus'+examNameWithoutSapce+'" style="float :right"></span>';
					htmlSemHeading+='<span class="glyphicon glyphicon-minus" id="minus'+examNameWithoutSapce+'" style="float :right; display:none"></span>';
					htmlSemHeading+='<h4 class="panel-title">';
					htmlSemHeading+='<a class="" >'+currentSession+'</a>';
					htmlSemHeading+='</h4></div>';
					htmlSemHeading+= '<div id="collapse'+examNameWithoutSapce+'" class="panel-collapse collapse">'+
				                    '<div class="panel-body">'+
				                    '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">'+
							        '<div id="'+examNameWithoutSapce+'" class="" style=""></div></div></div></div></div></div>';
					htmlSemHeading+='</div>';
				}
					
				}
	else
	{
		if(examJson!=null && examJson!="" && examJson!=undefined)
			{
			var noSemSubjectFound=false;
			var aggreSemLength=Object.keys(examJson);
			for(var i=0;i<aggreSemLength.length;i++)
				{
				var semValue=aggreSemLength[i];
				if(!(examJson[aggreSemLength[i]][0].hasOwnProperty('fail_remark')))
					{
					noSemSubjectFound=true;
					var semIdValue=examJson[aggreSemLength[i]][0].semester_id;
					var semExamTypeId=enrollTypeString+enrollmentTypeId+semTypeString+semIdValue;
					console.log(semIdValue);
					htmlSemHeading+='<div id="'+semExamTypeId+'_mainDiv">';
					htmlSemHeading+=generateFormStatusDiv(enrollmentTypeId,semIdValue);
					setFormStatus();
					htmlSemHeading+='<div class="panel panel-default">';
					htmlSemHeading+='<div  class="panel-heading trigger collapsed ariaexpanded'+examNameWithoutSapce+'" aria-expanded="false" style="cursor: pointer;" role="tab" id="'+semExamTypeId+'_panelDiv" aria-controls="collapse'+semExamTypeId+'" data-toggle="collapse" data-parent="#accordion" href="#collapse'+enrollmentTypeId+''+semIdValue+'" onclick="setFormStatus();tableDataMain(\''+index+'\',\''+valData+'\',\''+semValue+'\',\''+enrollmentTypeId+'\',\''+semIdValue+'\',\'\');plusMinusExpand(\''+enrollmentTypeId+'\',\''+semIdValue+'\');setTheoryOrPracticalValue(\'\',\''+enrollmentTypeId+'\',\''+semIdValue+'\',\'\',\'\');" >';
					htmlSemHeading+='<span class="glyphicon glyphicon-plus" id="plus'+enrollmentTypeId+semIdValue+'" style="float :right"></span>';
					htmlSemHeading+='<span class="glyphicon glyphicon-minus" id="minus'+enrollmentTypeId+semIdValue+'" style="float :right; display:none"></span>';
					htmlSemHeading+='<h4 class="panel-title">';
					htmlSemHeading+='<a class="customSemsterAnchorClass" id="anchor'+semExamTypeId+'">'+aggreSemLength[i]+'</a>';
					htmlSemHeading+='</h4></div>';
					htmlSemHeading+= '<div id="collapse'+enrollmentTypeId+''+semIdValue+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading'+enrollmentTypeId+'">'+
				                    '<div class="panel-body">'+
				                    '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">'+
							        '<div id="tbl'+semExamTypeId+'" class="" style=""></div></div></div></div></div></div>';
					//htmlSemHeading+=createtable(examSem[j],j,index);
					htmlSemHeading+='</div>';
					}
				else{
					continue;
				}
				}
			if(!noSemSubjectFound){
				openInvalidDataModal("Error", "You do  not have  to Enroll for "+valData);
			}
			}
		else{
			//var currentSemId=candidateDataJSON[0].AcadSessionId;
			htmlSemHeading+='<div id="'+examNameWithoutSapce+'_mainDiv">';
			htmlSemHeading+=generateFormStatusDiv(valData,"");
			htmlSemHeading+='<div class="panel panel-default">';
			htmlSemHeading+='<div  class="panel-heading trigger collapsed ariaexpanded'+examNameWithoutSapce+'" aria-expanded="false" style="cursor: pointer;" role="tab" id="'+examNameWithoutSapce+'_panelDiv" aria-controls="collapse'+examNameWithoutSapce+'" data-toggle="collapse" data-parent="#accordion" href="#collapse'+valData+'" onclick="tableDataMain(\''+index+'\',\''+valData+'\',\''+currentSession+'\',\''+enrollmentTypeId+'\',\'\');plusMinusExpand(\''+valData+'\',\'Subjects\'); ">';
			htmlSemHeading+='<span class="glyphicon glyphicon-plus" id="plus'+examNameWithoutSapce+'Subjects" style="float :right"></span>';
			htmlSemHeading+='<span class="glyphicon glyphicon-minus" id="minus'+examNameWithoutSapce+'Subjects" style="float :right; display:none"></span>';
			htmlSemHeading+='<h4 class="panel-title">';
			htmlSemHeading+='<a >Subjects</a>';
			htmlSemHeading+='</h4></div>';
			htmlSemHeading+= '<div id="collapse'+examNameWithoutSapce+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading'+examNameWithoutSapce+'">'+
		                    '<div class="panel-body">'+
		                    '<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">'+
					        '<div id="'+examNameWithoutSapce+'" class="" style=""></div></div></div></div></div></div>';
			//htmlSemHeading+=createtable(examSem[j],j,index);
			htmlSemHeading+='</div>';
	}
	}
			
			return htmlSemHeading;
}

function checkFormStatusValueOnExamType(examType,Sem)
{
	if(studentDetails.Data!=undefined && studentDetails.Data!="" && studentDetails.Data!=null )
		{
		var dataValuecheck=studentDetails.Data.isValidFormStatus;
		var status="";
		var returnStatus="pending";
		if(dataValuecheck=="Y")
		{
			var dataValue=studentDetails.Data.formStatus;
			for(var i=0;i<dataValue.length;i++)
			{
			var enrollType=dataValue[i].txtAppEnrollmentTypeId;
			var enrollSem=dataValue[i].txtApplyingSem;
			if(enrollType==examType&& enrollSem==Sem){
			 status=dataValue[i].formStatus;
			}
			}
			return status;
		}
		else{
			return returnStatus;
		}
		}
	
	
}
var tableHeader=[{"id":"S.No.","name":"S.No."},{"id":"subjectType","name":"Subject Type"},{"id":"subjectName","name":"Subject Name"},{"id":"subjectCode","name":"Subject Code"},{"id":"enrolled","name":"Enrolled Status"},{"id":"enrolledtype","name":"Enrolled Type"}];
function tableData(examType,semName,examJson,enrollId,semIdValue)
{
	var awardId=candidateDataJSON[0].award_id;
	maxSubjectApplicable=globalDataKey(awardId,semIdValue,examType,"no_of_subject_enrolled");
	var semExamTypeId=enrollTypeString+enrollId+semTypeString+semIdValue;
	console.log(semExamTypeId);
	//var SemwithoutSChar=Sem.replace(/[_\W]+/g, "");
	 var htmlTableData="";
	 var htmlTableHeading="";
	 htmlTableHeading+='</tr>';
	 var dataKeys=Object.keys(examJson);
	 if(examJson!=null&&examJson!=""&&examJson!=undefined)
		{	
		// var htmlTableData="";
		 //var htmlTableHeading="";
		 htmlTableHeading='<table id="'+semExamTypeId+'_tbl" class="table widthFull"><tr>';
		 for (var j=0;j<tableHeader.length;j++)
		 {
			 if((enrollId==1 && tableHeader[j].name=="Enrolled Status") || (enrollId==1 &&tableHeader[j].name=="Enrolled Type"))
				 {
				 
				 }
			 else{
		 htmlTableHeading+='<th align="center">'
		                  +'<span id="defaultLang_'+semExamTypeId+'_Header_'+j+'">'+tableHeader[j].name+'</span><br>'
		                  +'<span id="multiLingual_'+semExamTypeId+'_Header_'+j+'" class="multiLingualSpanClass"></span></th>';
		 }
		 }
		 htmlTableHeading+='</tr>';
			if(enrollId!=1)
			{
				for(var a=0;a<dataKeys.length;a++)
				{
					//var semIdFromJson=dataKeys[a].split(" ")[1];
					//var semIdFromJson=dataKeys[a].split("-")[1];
					if(dataKeys[a]==semName)
					{
						var dataValue1=examJson[dataKeys[a]];
						if(!dataValue1[0].hasOwnProperty('fail_remark'))
						{ 
						$("#"+semExamTypeId+"_tbl").remove();
					 // var flagForBatchSessionid=false;
					 if(dataValue1[0].batch_session_id!="" && dataValue1[0].batch_session_id!=null && dataValue1[0].batch_session_id!=undefined)
					 {
							var flagCheckForExamType=false;
							for(var k=0;k<dataValue1.length;k++)
							{
						/* htmlTableData+='</tr>';*/
						 htmlTableData+='<td id="tr_subjectEnrollementSno_'+k+''+semExamTypeId+'_td_0">';
						 htmlTableData+='<div class="" id="subjectSno_divContainer'+k+''+semExamTypeId+'">';
						 htmlTableData+='<span id="subjectSr'+k+''+semExamTypeId+'" name="subjectSr'+k+''+semExamTypeId+'">'+(parseInt(k)+1)+'</span>';
						 htmlTableData+='</div></td>';
						 htmlTableData+='<td id="tr_subjectType_'+k+''+semExamTypeId+'_td_1">';
						 htmlTableData+='<div class="" id="subjectDetails1_divContainer'+k+''+semExamTypeId+'">';
						 htmlTableData+='<span id="subjectType'+k+''+semExamTypeId+'" name="subjectType'+k+''+semExamTypeId+'">'+dataValue1[k].subject_category_name+'</span>';
						 var hiddenId=semExamTypeId+dataValue1[k].subject_category_name+"_Hidden";
						 //var hiddenIdForSubjectCode=semExamTypeId+dataValue1[k].subject_code+"_Hidden"
						 hiddenId=hiddenId.replace(/\s/g, '');
						 if($("#"+hiddenId).length<=0)
						 {
							 createHiddenFieldInHtml(hiddenId,"0");
						 }
				/* if($("#"+hiddenIdForSubjectCode).length<=0)
				 {
					 createHiddenFieldInHtml(hiddenId,"0");
				 }*/
				 htmlTableData+='</div></td>';
				 htmlTableData+='<td id="tr_subjectName_'+k+''+semExamTypeId+'_td_2">';
				 htmlTableData+='<div class="" id="subjectDetails1_divContainer'+k+''+semExamTypeId+'">';
				 htmlTableData+='<span id="subjectNameSpan'+k+''+semExamTypeId+'" name="subjectNameSpan'+k+''+semExamTypeId+'">'+dataValue1[k].subject_name+'</span>';
				 htmlTableData+='<input type="hidden" id="subjectName'+k+''+semExamTypeId+'" name="subjectName'+k+''+semExamTypeId+'" value="'+dataValue1[k].subject_name+'">';
				 htmlTableData+='</div></td>';
				 htmlTableData+='<td id="tr_subjectCode_'+k+''+semExamTypeId+'_td_3">';
				 htmlTableData+='<div class="" id="subjectCode_divContainer'+k+''+semExamTypeId+'">';
				 htmlTableData+='<span id="subjectCode'+k+''+semExamTypeId+'" name="subjectCode'+k+''+semExamTypeId+'">'+dataValue1[k].subject_code+'</span>';
				 htmlTableData+='<input type="hidden" id="subjectId'+k+''+semExamTypeId+'" name="subjectId'+k+''+semExamTypeId+'" value="'+dataValue1[k].subject_id+'">';
				 htmlTableData+='</div></td>';
				 var formStatusCheck=checkFormStatusValueOnExamType(enrollId,semIdValue);
				 if(formStatusCheck!="Submitted")
				 {
					 htmlTableData+='<td id="tr_enrollStatus_'+k+semExamTypeId+'_td_4">';
					 htmlTableData+='<div class="" id="enrollStatus_divContainer'+k+semExamTypeId+'">';
					 var examTypeID="enrollStatus"+k+semExamTypeId;
					 htmlTableData+='<input type="checkbox" id="enrollStatus'+k+semExamTypeId+'" name="enrollStatus'+k+semExamTypeId+'" onclick="checkExamStatus(\''+examTypeID+'\',\''+examType+'\',\''+semExamTypeId+'\',\''+a+'\',\''+k+'\',\''+enrollId+'\');setOpenOrClosePanelValue(\''+examTypeID+'\',\''+enrollId+'\',\''+semIdValue+'\',\''+dataValue1[k].subject_category_name+'\',\''+dataValue1[k].subject_code+'\');"></span>';
					 htmlTableData+='</div>';
					 htmlTableData+='</td>';
					 var examTypeCheck = dataValue1[k].hasOwnProperty("exam_type");
					 if(examTypeCheck==true)
						 {
						 flagCheckForExamType=true;
						 htmlTableData+='<td id="tr_subjectEnrollementType_'+k+semExamTypeId+'_td_5" style="display:none;">';
						 htmlTableData+='<div class="" id="enrollType_divContainer'+k+semExamTypeId+'">';
						 for(var i=0;i<dataValue1[k].exam_type.length;i++)
						 {
							 var extId=dataValue1[k].exam_type[i].id;
							 var extName=dataValue1[k].exam_type[i].exam_type_name;
							 var extFlag=dataValue1[k].exam_type[i].mandatory;
						     htmlTableData+='<input type="checkbox" id="enrollType'+k+semExamTypeId+'" name="enrollType'+k+semExamTypeId+'_chkBox" onclick=fnStoreChkBoxValue("examTypeValue'+k+semExamTypeId+'","enrollType'+k+semExamTypeId+'_chkBox"); value="'+extId+'||'+extFlag+'">'+dataValue1[k].exam_type[i].exam_type_name+'</span>&nbsp;&nbsp;';
						 }
						 htmlTableData+='<input type="hidden" id="examTypeValue'+k+semExamTypeId+'" name="examTypeValue'+k+semExamTypeId+'">';
						 htmlTableData+='</div>';
						 htmlTableData+='</td>';
						 }
					 else{
						 flagCheckForExamType=false;
					 }
					 }
				 else{
					 htmlTableData+='<td id="tr_enrollStatus_'+k+semExamTypeId+'_td_4">';
					 htmlTableData+='<div class="" id="enrollStatus_divContainer'+k+semExamTypeId+'">';
					 htmlTableData+='<span id="enrolledStatus'+semExamTypeId+'" name="enrolledStatus'+semExamTypeId+'">Already Enrolled</span>';
					 htmlTableData+='</div></td>';
				 }
				 
				
				 htmlTableData+='</tr>';
				}
					 htmlTableData+='<input type="hidden" id="'+semExamTypeId+'_hiddenExamCount" value="0" name="'+semExamTypeId+'_hiddenExamCount">';

			htmlTableData+='</table>';
			$("#tbl"+semExamTypeId).append(htmlTableHeading+htmlTableData);
			if(flagCheckForExamType==false)
				{
				$("#defaultLang_"+semExamTypeId+"_Header_5").css("display","none");
				}
			
			//$(document.getElementById("tbl"+enrollId+"@GE@"+semIdValue)).append(htmlTableHeading+htmlTableData);
					}	
					 else{
						 alert("Subject session Id is not present." +", "+helpDeskMsg);
							return false;
					 }
					}
						else{
							var message9=dataValue1[0]['fail_remark'];
							openInvalidDataModal("Error", message9);
							return false;
						}
					}
				}
				}
			else{
				var dataValue=examJson[dataKeys[0]];
				/*var semIdValue=dataValue[0].semId;
				var idExamTypeSem=enrollId+"@GE@"+semIdValue;*/
			//var keyValue=Object.keys(dataValue);
				$("#"+semExamTypeId+"_tbl").remove();
				//$("#tbl"+semExamTypeId).remove();
				
			if(dataValue[0].batch_session_id!="" && dataValue[0].batch_session_id!=null && dataValue[0].batch_session_id!=undefined)
				{
			 for(var a=0;a<dataValue.length;a++)
			   {
			  // var dataValue1=examJson[dataKeys][keyValue[a]];
			  // htmlTableData+='<input type="hidden" id="'+dataKeys[index]+keyValue[a]+'THEORY_Hidden" name="'+dataKeys[index]+keyValue[a]+'THEORY_Hidden" value="0">';
			  // htmlTableData+='<input type="hidden" id="'+dataKeys[index]+keyValue[a]+'Practical_Hidden" name="'+dataKeys[index]+keyValue[a]+'Practical_Hidden" value="0">';
			
					/* htmlTableData+='</tr>';*/
					//htmlTableData+='<tr id="tr_subjectEnrollementDetails_0">';
					 htmlTableData+='<td id="tr_subjectEnrollementSno_'+a+''+semExamTypeId+'_td_0">';
					 htmlTableData+='<div class="" id="subjectSno_divContainer'+a+''+semExamTypeId+'">';
					 htmlTableData+='<span id="subjectSr'+semExamTypeId+'" name="subjectSr'+semExamTypeId+'">'+(parseInt(a)+1)+'</span>';
					 htmlTableData+='</div></td>';
					 htmlTableData+='<td id="tr_subjectType_'+a+''+semExamTypeId+'_td_1">';
					 htmlTableData+='<div class="" id="subjectType_divContainer'+a+''+semExamTypeId+'">';
					 htmlTableData+='<span id="subjectType'+(parseInt(a))+semExamTypeId+'" name="subjectType'+(parseInt(a))+semExamTypeId+'">'+dataValue[a].subject_category_name+'</span>';
					 htmlTableData+='</div></td>';
					 htmlTableData+='<td id="tr_subjectName_'+a+''+semExamTypeId+'_td_2">';
					 htmlTableData+='<div class="" id="subjectName_divContainer'+a+''+semExamTypeId+'">';
					 htmlTableData+='<span id="subjectNameSpan'+(parseInt(a))+semExamTypeId+'" name="subjectNameSpan'+(parseInt(a))+semExamTypeId+'">'+dataValue[a].subject_name+'</span>';
					 htmlTableData+='<input type="hidden" id="subjectName'+(parseInt(a))+semExamTypeId+'" name="subjectName'+(parseInt(a)+1)+semExamTypeId+'" value="'+dataValue[a].subject_name+'">';
					 htmlTableData+='</div></td>';
					 htmlTableData+='<td id="tr_subjectCode_'+a+''+semExamTypeId+'_td_3">';
					 htmlTableData+='<div class="" id="subjectCode_divContainer'+a+''+semExamTypeId+'">';
					 htmlTableData+='<span id="subjectCode'+(parseInt(a))+semExamTypeId+'" name="subjectCode'+(parseInt(a))+semExamTypeId+'">'+dataValue[a].subject_code+'</span>';
					 htmlTableData+='<input type="hidden" id="subjectId'+(parseInt(a))+semExamTypeId+'" name="subjectId'+(parseInt(a))+semExamTypeId+'" value="'+dataValue[a].subject_id+'">';
					 htmlTableData+='</div></td>';
					 htmlTableData+='</tr>';
					 //setFormStatus();
					
			}
				//examSem=dataKeys[index]+keyValue[a];
			 htmlTableData+='</table>';
			 $("#tbl"+semExamTypeId).append(htmlTableHeading+htmlTableData);
			 conditionalEnrollment(enrollId,semIdValue);
				}
			else{alert("Subject session Id is not present." +", "+helpDeskMsg);
			return false;}
			}
		 }
	else{
	  setTimeout("tableData("+examType+","+Sem+")",500);	
	}
}
function displayHideSections(sections,display)
{
	//var sections=new Array('SubjectDetails','imageUpload_tbl','declarationSection','saveButtonDivUser');
	for(var i=0;i<sections.length;i++)
	{
		$("#"+sections[i]).css('display',display);
	}
}
function hideValidationDiv(divisionId, currentId)
{
	
	if(lastValidationId == "checkbox")
	{
		hideField(divisionId);
	}
	else if(currentId == lastValidationId)
	{
		removeRedBorder(currentId);
		//hideField(divisionId);
		$("#"+divisionId).html('');
	}
}
function generateExamTypeHeadingInFee()
{
	var headingHtml='';
	var totalFee='';
	if(candidateDataJSON!="" && candidateDataJSON!=undefined && candidateDataJSON!="")
	{
	    var keyValue=candidateDataJSON[0].applicable_enrollment_type;
		if(keyValue!=null && keyValue!=undefined && keyValue!="")
		{
			for(var index=0;index<keyValue.length;index++)
			{
				var nameStr=keyValue[index].id;
				var idName=enrollTypeString+nameStr;
				var enrollTypeName=keyValue[index].name;
				headingHtml+='<div id="'+idName+'FeeDetails_topMainDiv" style="display:none;  margin-top:0px;">'+
					         '<div id="'+idName+'FeeDetails_mainDiv">'+
					         '<div class="tab-heading " id="'+idName+'FeeDetails_headingDiv" style="margin-top: 22px;">'+
				             '<span class="" id="'+idName+'FeeDetails_Div">'+enrollTypeName+'</span>'+
				             '<span class="multiLingualSpanClass" id="multilingualSpan_'+idName+'FeeDetails"></span>'+
				             '</div>'+
				             '</div>'+
				             '</div>'+
							 '<div style=" margin-top:20px;"></div>';
			}
		}
		totalFee=generateTotalfeeDivInFee();
		$("#sectionDataLabel_feeDetails").append(headingHtml+totalFee);
	}
}
function generateTotalfeeDivInFee()
{
	var totalFeeValue='<div  id="totalFeeDetails_mainDiv" style="margin-top:20px;">'+
	                  '<div class="customOneFieldDivClass" id="">'+
	                  '<label class="classForAllFieldLabels " id="TotalFee_labelDiv" style="margin-left: 32px;font-weight: bold">  Grand Fee to be paid(in Rupees):  '+
	                  '<span class="multiLingualSpanClass" id="multilingualSpan_TotalFee"></span>'+
                      '<span class="" id="TotalFeeValue_span" style="padding-left:30px;font-weight: bold">0</span></label></div></div>';
      return totalFeeValue;
}
function generateFee(id,ExamTypeId,SemesterId,subjectType,enrollTypeCount,SubjectCode)
{
	var formStatusValue=FORM_STATUS_PENDING;
    subjectType=subjectType.replace(/\s/g, '');
	var htmlSemId=enrollTypeString+ExamTypeId+semTypeString+SemesterId;
	var formStatusKeys="";
	if(studentDetails.Data.isValidFormStatus=="Y")
	{
		formStatusKeys=studentDetails.Data.formStatus;
		for(var i=0;i<formStatusKeys.length;i++)
		{
			if(formStatusKeys[i].txtAppEnrollmentTypeId==ExamTypeId && formStatusKeys[i].txtApplyingSem==SemesterId)
			{
				 formStatusValue=formStatusKeys[i].formStatus;
				 break;
			}
		}
	}
	else
	{
		formStatusValue=$("#"+htmlSemId+"FormStatus_span").text();
	}
	if(formStatusValue=="Pending")
	{
			
			if(feeDetailsJSON!=null && feeDetailsJSON!=undefined && feeDetailsJSON!="")
			{
				var ExamType="";
				var applicantEnrollmentTypes=candidateDataJSON[0].applicable_enrollment_type;
				for(var eIndex in applicantEnrollmentTypes)
				{
					var enrollmentTypeId=applicantEnrollmentTypes[eIndex].id;
					if(enrollmentTypeId==ExamTypeId)
					{
						ExamType=applicantEnrollmentTypes[eIndex].name;
						break;
					}
				}
		        var fieldId=enrollTypeString+ExamTypeId+semTypeString+SemesterId;
		        if(feeDetailsJSON.hasOwnProperty("FeeDetails"))
				{
			        if(feeDetailsJSON.FeeDetails.hasOwnProperty(ExamType))
					{
				        var examTypeJson=feeDetailsJSON.FeeDetails[ExamType];
						var objectExamTypeJson=Object.keys(examTypeJson);
						var semesterList=feeDetailsJSON.FeeDetails[ExamType][objectExamTypeJson];
						if(semesterList.hasOwnProperty(SemesterId))
						{
							var objFeeCategory=Object.keys(semesterList[SemesterId]);
							var feeCategoryValue=Object.keys(semesterList[SemesterId][objFeeCategory]);
							if(feeCategoryValue[0]=="All")
					    	{
								subjectType="";
					    	}
						    if($("#"+fieldId+"FeeDetails_mainDiv").length>0)
							{
						    	if($("#"+fieldId+subjectType+"FeeDetails_mainDiv").length<1)
						    	{ 
						    		if(SubjectCodeFlag!="Y")
						    		{	
							    		     var subjectFee=generateSubjectSecInFee(id,ExamTypeId,SemesterId,subjectType);
											  $("#"+fieldId+"FeeDetails_divContainer").append(subjectFee);
											  $("#"+fieldId+subjectType+"FeeDetails_MainDiv").show();
											  var feeHeader= generateHeadsForSemFee(id,ExamTypeId,SemesterId,subjectType);
											  $("#"+fieldId+subjectType+"FeeDetails_divContainer").append(feeHeader);
							    	
						    	     }
							     }
							}	
						    else
						    {
						    		  var semesterFee=generateSemSecInFee(id,ExamTypeId,SemesterId,subjectType);
									  $("#"+enrollTypeString+ExamTypeId+"FeeDetails_mainDiv").append(semesterFee);
									  if(SubjectCodeFlag!="Y")
							    		{
											  var subjectFee=generateSubjectSecInFee(id,ExamTypeId,SemesterId,subjectType);
											  $("#"+fieldId+"FeeDetails_divContainer").append(subjectFee);
											  $("#"+fieldId+subjectType+"FeeDetails_MainDiv").show();
											  var feeHeader= generateHeadsForSemFee(id,ExamTypeId,SemesterId,subjectType);
											  $("#"+fieldId+subjectType+"FeeDetails_divContainer").append(feeHeader);
							    		}
						    		
						    	 
						    }
						    if(subjectType==""||subjectType==null||subjectType==undefined)
						    {
						    	 $("#"+fieldId+subjectType+"FeeDetails_labelDiv").css("display","none");
						    }
							$("#"+enrollTypeString+ExamTypeId+"FeeDetails_topMainDiv").show();
							populateFeeValueInHeaders(ExamTypeId,SemesterId,subjectType,enrollTypeCount,SubjectCode);
							populateLateFeeValueInHeaders(ExamTypeId,SemesterId,subjectType,enrollTypeCount);
							calculateTotalFee("","");
						}
						else
				        {
							$("#collapse"+ExamTypeId+SemesterId).removeClass('in');
				        	openInvalidDataModal("Error","Fees not configured for this enrollment.");
				        }
					}
			        else
			        {
			        	$("#collapse"+ExamTypeId+SemesterId).removeClass('in');
			        	openInvalidDataModal("Error","Fees not configured for this enrollment.");
			        }
				}
		        else
		        {
		        	$("#collapse"+ExamTypeId+SemesterId).removeClass('in');
		        	openInvalidDataModal("Error","Fees not configured for this enrollment.");
		        }
			}
			else{
				$("#collapse"+ExamTypeId+SemesterId).removeClass('in');
				openInvalidDataModal("Error","Fees not configured for this enrollment.");
				startLoader();
			}
	}
	else
	{
		$("#collapse"+ExamTypeId+SemesterId).removeClass('in');
		openInvalidDataModal("Error","This Enrollment is already submitted.");
		//startLoader();
	}
}
var grandFee="";
function calculateGrandFees(ExamTypeId,SemTypeId)
{
	var semWiseFeeClass=document.getElementById("EN"+ExamTypeId+"FeeDetails_topMainDiv").querySelectorAll(".totalFeeSemWiseClass");
	var lateFeeClass=document.getElementById("EN"+ExamTypeId+"FeeDetails_topMainDiv").querySelectorAll(".totalLateFeeClass");
	var semExamTypeId=enrollTypeString+ExamTypeId+semTypeString+SemTypeId;
	for(var idIndex=0;idIndex<semWiseFeeClass.length;idIndex++)
		{
			var semWiseFeeId=$(semWiseFeeClass[idIndex]).attr("id");
			var semWiseFeeValue=$("#"+semWiseFeeId).html();
			var lateFeeId="";
			var lateFeeValue="";
			if(lateFeeClass.length>0)
			{
		       lateFeeId=$(lateFeeClass[idIndex]).attr("id");
			   lateFeeValue=$("#"+lateFeeId).html();	
			}
			var semTotalFees=parseInt(semWiseFeeValue)+parseInt(lateFeeValue);
			$("#"+semExamTypeId+"grandFeeMainDiv_span").html(semTotalFees);
		}
	
}

function calculateTotalFee(ExamTypeId,SemesterId)
{
	totalFeeToPaid=0;
	$("#TotalFeeValue_span").text("");
	if(SubjectCodeFlag!="Y")
		{
		var semWiseFeeClass=document.getElementById("feeDetails_mainDiv").querySelectorAll(".totalFeeSemWiseClass");
		var lateFeeClass=document.getElementById("feeDetails_mainDiv").querySelectorAll(".totalLateFeeClass");
		for(var idIndex=0;idIndex<semWiseFeeClass.length;idIndex++)
		{
			var semWiseFeeId=$(semWiseFeeClass[idIndex]).attr("id");
			var semWiseFeeValue=$("#"+semWiseFeeId).text();
			if(semWiseFeeValue!="" && semWiseFeeValue!=undefined && semWiseFeeValue!=null &&semWiseFeeValue!=0)
			{
				totalFeeToPaid=parseInt(totalFeeToPaid)+parseInt(semWiseFeeValue);
			}
		}
		if(lateFeeClass!="" && lateFeeClass!=null && lateFeeClass!=undefined)
		{
			for(var lIndex=0;lIndex<lateFeeClass.length;lIndex++)
			{
				var lateFeeId=$(lateFeeClass[lIndex]).attr("id");
				var lateFeeValue=$("#"+lateFeeId).text();
				var semExamTypeId=enrollTypeString+ExamTypeId+semTypeString+SemesterId;
				grandFee=parseInt(semWiseFeeValue)+parseInt(lateFeeValue);
				//$("#"+semExamTypeId+"grandFeeMainDiv_span").val(grandFee);
				if(lateFeeValue!="" && lateFeeValue!=undefined && lateFeeValue!=null && lateFeeValue!=0)
				{
					totalFeeToPaid=parseInt(totalFeeToPaid)+parseInt(lateFeeValue);
				}
			}
		}
		}
	else{
		var semExamTypeId=enrollTypeString+ExamTypeId+semTypeString+SemesterId;
		var semWiseFeeClass=document.getElementById("feeDetails_mainDiv").querySelectorAll(".totalFeeSemWiseClass"); 		//var lateFeeClass=document.getElementById(semExamTypeId+"feeDetails_mainDiv").querySelectorAll(".totalLateFeeClass");
		//var lateFeeValue=$("#"+ExamTypeId+SemesterId+"lateFeeValue_span").html();
		for(var idIndex=0;idIndex<semWiseFeeClass.length;idIndex++)
		{
			var semWiseFeeId=$(semWiseFeeClass[idIndex]).attr("id");
			var semWiseFeeValue=$("#"+semWiseFeeId).text();
			if(semWiseFeeValue!="" && semWiseFeeValue!=undefined && semWiseFeeValue!=null &&semWiseFeeValue!=0)
			{
				totalFeeToPaid=parseInt(totalFeeToPaid)+parseInt(semWiseFeeValue);
			}
		}
		semWiseFeeValue=$("#"+ExamTypeId+SemesterId+"toatlFeeValue_span").html();
		//totalFeeToPaid=parseInt(totalFeeToPaid)+parseInt(semWiseFeeValue);
	}
	$("#TotalFeeValue_span").text(totalFeeToPaid);
}
///////////////////////////////Added to find array of all Subject type in a semster of exam Type. Added by Amit///
function subjectTypeArray(fieldId){
	  var examTypeCountALL=$("#"+fieldId+"_tbl tr").length-1;
	  var arraySubjectType=[];
	   for(var eIndex=0;eIndex<examTypeCountALL;eIndex++)
		{
		 var subjectCATEGORY=$("#subjectType"+eIndex+fieldId).text();
		 arraySubjectType.push(subjectCATEGORY);
		 
	    }
		return (removeDuplicateFromArray(arraySubjectType));
	}

function removeDuplicateFromArray(arr){
    var tmp = [];
    for(var i = 0; i < arr.length; i++){
        if(tmp.indexOf(arr[i]) == -1){
        tmp.push(arr[i]);
        }
    }
    return tmp;
  }
	////////function Ends here/////	
var HiddenValue="";
var examCount="";
function setOpenOrClosePanelValue(id,ExamType,Semester,SubjectType,SubjectCode)
{
	SubjectType=SubjectType.replace(/\s/g, '');
	var formStatusValue=FORM_STATUS_PENDING;
	var htmlSemId=enrollTypeString+ExamType+semTypeString+Semester;
	var ExamTypeValue="";
	var applicantEnrollmentTypes=candidateDataJSON[0].applicable_enrollment_type;
	for(var eIndex in applicantEnrollmentTypes)
	{
		var enrollmentTypeId=applicantEnrollmentTypes[eIndex].id;
		if(enrollmentTypeId==ExamType)
		{
			ExamTypeValue=applicantEnrollmentTypes[eIndex].name;
			break;
		}
	}
	var formStatusKeys="";
	if(studentDetails.Data.isValidFormStatus=="Y")
	{
		formStatusKeys=studentDetails.Data.formStatus;
		for(var i=0;i<formStatusKeys.length;i++)
		{
			if(formStatusKeys[i].txtAppEnrollmentTypeId==ExamTypeValue && formStatusKeys[i].txtApplyingSem==Semester)
			{
				 formStatusValue=formStatusKeys[i].formStatus;
				 break;
			}
		}
	}
	else
	{
		formStatusValue=$("#"+htmlSemId+"FormStatus_span").text();
	}
	
	if(formStatusValue=="Pending")
	{
		var htmlId=enrollTypeString+ExamType+semTypeString+Semester+SubjectType;
		HiddenValue=$('#'+htmlId+'_Hidden').val();
		examCount=$('#'+htmlSemId+'_hiddenExamCount').val();
			if($('#'+id).is(':checked'))
			{
				if(examCount!="" && examCount!=null && examCount!=undefined)
				{
					if(parseInt(examCount)> (parseInt(maxSubjectApplicable)-1))
					{
						var messgage10="Max Subject selected must be less than "+maxSubjectApplicable;
						openInvalidDataModal("Error",messgage10);
						$('#'+id).prop('checked', false); 
						return false;
					}
					else
					{
						$('#'+htmlSemId+'_hiddenExamCount').val(parseInt(examCount)+1);
					}
				}
				$("#"+htmlId+"FeeDetails_mainDiv").show();
				$('#'+htmlId+'_Hidden').val(parseInt(HiddenValue)+1);
			}
			else 
			{ 
				if(SubjectCodeFlag!="Y")
				{
					if(feeDetailsJSON!=null && feeDetailsJSON!=undefined && feeDetailsJSON!="")
					{
						$('#'+htmlSemId+'_hiddenExamCount').val(parseInt(examCount)-1);
						$('#'+htmlId+'_Hidden').val(parseInt(HiddenValue)-1);
						var enrollTypeCountChk=$('#'+htmlId+'_Hidden').val();
						//////if no subject is checked on Semester of Exam type,then this code runs//
						if(enrollTypeCountChk=="0")
						{ 
							if(feeDetailsJSON.hasOwnProperty("FeeDetails"))
							{
									if(feeDetailsJSON.FeeDetails.hasOwnProperty(ExamTypeValue))
									{
							            var examTypeJson=feeDetailsJSON.FeeDetails[ExamTypeValue];
									    var objectExamTypeJson=Object.keys(examTypeJson);
									    var semesterList=feeDetailsJSON.FeeDetails[ExamTypeValue][objectExamTypeJson];
										if(semesterList.hasOwnProperty(Semester))
										{ 
											var flagforLateFeesRemoval=false;
											var objFeeCategory=Object.keys(semesterList[Semester]);
											var feeCategoryValue=Object.keys(semesterList[Semester][objFeeCategory]);
											if(feeCategoryValue[0]=="All")
									        {
												SubjectType="";
									        }
											var subTypeFeeId=htmlSemId+SubjectType+"TotalFeeValue";
											$("#"+subTypeFeeId).remove();
											//$("#"+htmlSemId+SubjectType+"FeeDetails_mainDiv").remove();
											if(($("#"+htmlSemId+SubjectType+"_perSublabelDiv").length)>0)
												{
												$("#"+htmlSemId+SubjectType+"_perSublabelDiv").remove();
												}
											//////incase there is no subject type checked in any of the semsester,the late fees secion is removed//
											var subTypeArrayForPerSubject=subjectTypeArray(htmlSemId);
											for(var index=0;index<subTypeArrayForPerSubject.length;index++){
												if($("#"+htmlSemId+subTypeArrayForPerSubject[index]+"_Hidden").val()>0)
													{
													flagforLateFeesRemoval=true;
													}
											}
											if(!flagforLateFeesRemoval){
												$("#"+enrollTypeString+ExamType+"FeeDetails_Div").hide();
												$("#"+enrollTypeString+ExamType+"FeeDetails_topMainDiv").hide();
												$("#"+htmlSemId+"_lateFeeMainDiv").remove();
												
											}
											//////////////ends here////////////
											$("#"+htmlSemId+"_grandFeeMainDiv").remove();
										    var semFeeVal=calculateSemWiseTotalfee(ExamType,Semester,SubjectType);
										    $("#"+htmlSemId+"TotalFeeValue_span").text(semFeeVal);
										    if($("#"+htmlSemId+"_lateFeeMainDiv").length>0)
											{
										    	semFeeVal+=parseInt($("#"+htmlSemId+"lateFeeValue_span").text());
											}
										    if(semFeeVal=="0")
											{
										       $("#"+htmlSemId+"FeeDetails_mainDiv").remove();
											}
										    if(!semWiseFeeFlag)
										    {
										    	$("#"+htmlSemId+"_TotalFeelabelDiv").hide();
										    }
										    calculateTotalFee("","");
											return false;
										}
										else
										{
											return false;
										}
								}
								else
								{
									return false;
								}
							}
							else
							{
								return false;
							}
						}
					}
				}
				else
				{
					  var flagForSubCode=false;
						$('#'+htmlSemId+'_hiddenExamCount').val(parseInt(examCount)-1);
						var subCodeId=ExamType+Semester+SubjectCode.replace(/[^a-zA-Z0-9 ]/g, "");
					
						$("#"+subCodeId).remove();
						var rowObject=$("#"+ExamType+Semester+"_tblForSubCode").find('tbody').find('tr').length;
						if(rowObject<2)
						{
							 $("#"+htmlSemId+"FeeDetails_mainDiv").remove();
							
							var arrayofIDS=returnOfIdsForSubCode(ExamTypeValue);
							for(var index=0;index<arrayofIDS.length;index++){
								var examCountForSubCode=$("#"+arrayofIDS[index]+"_hiddenExamCount").val();
								if(examCountForSubCode!=0)
								{
									flagForSubCode=true;
								}
							}
							if(!flagForSubCode){
								$("#"+enrollTypeString+ExamType+"FeeDetails_Div").hide();
								$("#"+enrollTypeString+ExamType+"FeeDetails_topMainDiv").hide();
							}
							
						}
					genrateFeesForSubCode(ExamType,Semester,SubjectCode);
					calculateTotalFee(ExamType,Semester);
					return false;
				}
				
			}
			var enrollTypeCount=$('#'+htmlId+'_Hidden').val();
			$("#"+enrollTypeString+ExamType+"FeeDetails_Div").show();
			generateFee(id,ExamType,Semester,SubjectType,enrollTypeCount,SubjectCode);
            calculateGrandFees(ExamType,Semester);		
    }	
    else
	{
		openInvalidDataModal("Error","This Enrollment is already submitted.");
		return false;
		//startLoader();
	}
}
function returnOfIdsForSubCode(ExamTypeValue){
	var arrayOfIds=[];
	var noOfTable=document.getElementById("examTypeSemesterMainDiv"+ExamTypeValue.replace(/\s/g, '')).querySelectorAll(".table");
	for (var index=0;index<noOfTable.length;index++)
	{
		var examSemId=(noOfTable[index].id).split("_tbl")[0];
		arrayOfIds.push(examSemId);
	}
	return arrayOfIds;
	
}
function genrateFeesForSubCode(examTypeId,semesterId,subjectCode)
{
	var subjectCodeWithoutChar=subjectCode.replace(/[^a-zA-Z0-9 ]/g, "");
	var semExamTypeId=examTypeId+semesterId;
	//var subjectCodeIdinTable=semExamTypeId+subjectCodeWithoutChar;
	var totalFees=0;
	var rowObject=$("#"+semExamTypeId+"_tblForSubCode").find('tbody').find('tr');
	for(var i=1;i<rowObject.length;i++)
	{
		var tdObject=rowObject.eq(i).find('td');
			var feeHead1Fees=rowObject.eq(i).find('td').eq(1).find('span').html();
			var feeHead2Fees=rowObject.eq(i).find('td').eq(2).find('span').html();
			 totalFees=totalFees+parseInt(feeHead1Fees)+parseInt(feeHead2Fees);	
	}
	 $("#subCodeSemFee_span"+semExamTypeId).html(totalFees);
	var lateFees= parseInt($("#"+semExamTypeId+"lateFeeValue_span").html());
	  var semFeesSubCode=parseInt($("#subCodeSemFee_span"+semExamTypeId).html());
	   $("#"+semExamTypeId+"toatlFeeValue_span").html(semFeesSubCode+lateFees);
	 console.log(totalFees);
	return totalFees;
	
}
function setTheoryOrPracticalValue(id,ExamType,Semester,SubjectType,SubjectCode)
{
	SubjectType=SubjectType.replace(/\s/g, '');
	var enrollType=enrollTypeString+ExamType;
	var htmlSemId=enrollTypeString+ExamType+semTypeString+Semester;
	$('#collapse'+ExamType+Semester).on('shown.bs.collapse', function () {
	   console.log("opened");
	   if(ExamType=="1")
	   {   
	     generateFee(id,ExamType,Semester,SubjectType,"",SubjectCode);
		 calculateGrandFees(ExamType,Semester);
	   }
	});

	$('#collapse'+ExamType+Semester).on('hidden.bs.collapse', function () {
		console.log("Closed");
		var semesterList=document.getElementById(enrollType+"FeeDetails_topMainDiv").querySelectorAll(".semCountInExamType");
		if(semesterList.length==0)
		{
			$("#"+htmlSemId+"FeeDetails_mainDiv").remove();
			$("#"+enrollType+"FeeDetails_topMainDiv").hide();
		}
		else{
			$("#"+htmlSemId+"FeeDetails_mainDiv").remove();
		}  
	   calculateTotalFee("","");
	});
} 
function populateLateFeeValueInHeaders(ExamTypeId,semId,subjectType,enrollTypeCount)
{
	var fieldId=enrollTypeString+ExamTypeId+semTypeString+semId;;
	var ExamType="";
	var applicantEnrollmentTypes=candidateDataJSON[0].applicable_enrollment_type;
	for(var eIndex in applicantEnrollmentTypes)
	{
		var enrollmentTypeId=applicantEnrollmentTypes[eIndex].id;
		if(enrollmentTypeId==ExamTypeId)
		{
			ExamType=applicantEnrollmentTypes[eIndex].name;
			break;
		}
	}
	if(feeDetailsJSON.isValid="Y")
	{
		   var examTypeJson=feeDetailsJSON.LateFeeDetails[ExamType];
		   if(examTypeJson!="" && examTypeJson!=null && examTypeJson!=undefined)
		   {
			   var objectExamTypeJson=Object.keys(examTypeJson);
			   for(var sIndex=0;sIndex<objectExamTypeJson.length;sIndex++)
			   {
				   if(objectExamTypeJson[sIndex]==semId)
				   {
					   var semesterList=feeDetailsJSON.LateFeeDetails[ExamType][objectExamTypeJson[sIndex]];
					   var lateFeeValue=semesterList.fees;
					   if(SubjectCodeFlag!="Y")
						   {
						   $("#"+fieldId+"_lateFeeMainDiv").show();
						   $("#"+fieldId+"lateFeeValue_span").text("");
						   $("#"+fieldId+"lateFeeValue_span").text("")
						   $("#"+fieldId+"lateFeeValue_span").text(parseInt(lateFeeValue));
						   }
					   else{
						   var idForsubCode=ExamTypeId+semId;
						   $("#"+ExamTypeId+semId+"_lateFeeMainDiv").show();
						   $("#"+ExamTypeId+semId+"lateFeeValue_span").text("");
						   $("#"+fieldId+"lateFeeValue_span").text("")
						   $("#"+ExamTypeId+semId+"lateFeeValue_span").text(parseInt(lateFeeValue));
						  var semFeesSubCode=parseInt($("#subCodeSemFee_span"+idForsubCode).html());
						   $("#"+idForsubCode+"toatlFeeValue_span").html(semFeesSubCode+parseInt(lateFeeValue));
					   }
					  
					  
					   break;
				   }
		       }
		   }
	}
}
function calculateSemWiseTotalfee(ExamTypeId,semId,subjectType)
{
	semWiseFeeFlag=false;
	var semWiseTotalFeeVAL=0;
	var fieldId=enrollTypeString+ExamTypeId+semTypeString+semId;;
    var inputTypeIds=$("#allEnrollmentFEEHiddenIds :input");
    for(var IdIndex=0;IdIndex<inputTypeIds.length;IdIndex++)
    {
    	var inputId=inputTypeIds[IdIndex].id;
    	if(inputId.indexOf(fieldId)>-1)
    	{
    		var semFeeValue=$("#"+inputId).val();
    		semWiseTotalFeeVAL=parseInt(semWiseTotalFeeVAL)+parseInt(semFeeValue);
    		semWiseFeeFlag=true;
    	}
    }
    return semWiseTotalFeeVAL;
}
function generatePerSubjectTypeLabelSec(fieldId,semesterNAME,subjectType)
{
	semesterNAME=$("#anchor"+fieldId).text();
	var subjectTypeId=fieldId+subjectType;
   if($("#"+fieldId+"_perSublabelDiv").length<=0)
   { 
	   var perSubFeeHtml='<div class="customOneFieldDivClass" id="'+subjectTypeId+'_perSubMainDiv">'+
	                     '<label class="classForAllFieldLabels " id="'+subjectTypeId+'_perSublabelDiv" style="margin-top: 15px;font-weight: bold;">Per subject fee for '+subjectType+' Subject Type :  '+
	                     '<span class="multiLingualSpanClass" id="multilingualSpan_'+subjectTypeId+'"></span>'+
	                     '<span class="" id="'+subjectTypeId+'perSubFeeValue_span" style="font-weight: bold; padding-left:52px">0</span></label></div>'+
	                     '</div>';
	   $("#"+fieldId+"FeeDetails_mainDiv").append(perSubFeeHtml);
	   $('#'+fieldId+'_grandFeeMainDiv').detach().appendTo('#'+subjectTypeId+'_perSubMainDiv');
   }
}
var examTypeGlobal="";
var semesterGlobal="";
//var SubjectCodeFlag="N";
function populateFeeValueInHeaders(ExamTypeId,semId,subjectType,enrollTypeCount,subjectCode)
{
var semNameInFee="SEMESTER "+semId; 
	var subjectType=subjectType.replace(/\s/g, '');
	var fieldId=enrollTypeString+ExamTypeId+semTypeString+semId;;
	var ExamType="";
	var applicantEnrollmentTypes=candidateDataJSON[0].applicable_enrollment_type;
	for(var eIndex in applicantEnrollmentTypes)
	{
		var enrollmentTypeId=applicantEnrollmentTypes[eIndex].id;
		if(enrollmentTypeId==ExamTypeId)
		{
			ExamType=applicantEnrollmentTypes[eIndex].name;
			break;
		}
	}
	if(feeDetailsJSON.isValid="Y")
	{
		 if(SubjectCodeFlag=="N")
	     {     var perSubFlag=false;
			  var feeFlag=false;
			  var semWiseTotalFEE="0";
			  if(feeDetailsJSON.FeeDetails.hasOwnProperty(ExamType))
			  {
			    var examTypeJson=feeDetailsJSON.FeeDetails[ExamType];
			    var objectExamTypeJson=Object.keys(examTypeJson);
			    var semesterList=feeDetailsJSON.FeeDetails[ExamType][objectExamTypeJson];
			    if(semesterList.hasOwnProperty(semId))
			    {
			    var objFeeCategory=Object.keys(semesterList[semId]);
			    var feeCategoryValue=Object.keys(semesterList[semId][objFeeCategory]);
			    if(feeCategoryValue.length>=1)
			    {
			    	if(feeCategoryValue[0]=="All")
			    	{
			    		$("#"+fieldId+subjectType+"FeeDetails_labelDiv").hide();
			    		var SubCategoryValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]]);
						var slabValueObj=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL]);
						if(slabValueObj.length>=1)
						{
							if(slabValueObj[0]=="NA")
							{
								 var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][slabValueObj[0]]);
								 for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
								  {
									 var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][slabValueObj[0]][slabValueALL[slabIndex]];
									    if(slabValueALL[slabIndex]!="perSubjectFee")
							    		{
										  
										   if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
									    	{
									    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").show();
								    			$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
								    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
					
								    		}
								    		else
								    		{
								    			$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
								    			$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html("NA");
								    		}
							    		}
										else{
											
											if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
											    	{
														var examTypeCount="";
														perSubFlag=true;
														if(ExamTypeId!="1")
														{
															examTypeCount=$('#'+fieldId+'_hiddenExamCount').val();
														}
													else{
														examTypeCount=$("#"+fieldId+"_tbl tr").length-1;
													}
														generatePerSubjectLabelSec(fieldId,semNameInFee);
											    		$("#"+fieldId+"perSubFeeValue_span").show();
										    			
										    			semWiseTotalFEE=parseInt(objFeeHeadALL)*parseInt(examTypeCount);
														$("#"+fieldId+"perSubFeeValue_span").html(semWiseTotalFEE);
										    			
										    		}
											
										}
									}
									
								    var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
								    if($("#"+subTypeFeeId).length<=0)
									{
								    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
									}
								    else
								    {
								    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
								    }
								    $("#"+fieldId+"TotalFeeValue_span").text("");
								    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
								    $("#"+fieldId+"TotalFeeValue_span").show();
								    $("#"+fieldId+"_TotalFeelabelDiv").show();
								    $("#"+fieldId+"FeeDetails_divContainer").show();
									 //$("#"+fieldId+"_perSublabelDiv").show();
								    if(!perSubFlag){
								     if($("#"+fieldId+"_perSublabelDiv").length>0)
								    {
									    $("#"+fieldId+"_perSublabelDiv").hide();
									    $("#"+fieldId+"perSubFeeValue_span").text("");
								    }
									}
									else{
										$("#"+fieldId+"_perSublabelDiv").show();
									}
								    $("#"+fieldId+"TotalFeeValue_span").text(parseInt(totalSemWiseFeeVal));
							}
							else
							{
								var examTypeCountALL="0";
								var examTypeCountALLVALUE=$("#"+fieldId+"_tbl tr").length-1;
								if(ExamTypeId!="1")
								{
									for(var vIndex=0;vIndex<examTypeCountALLVALUE;vIndex++)
									{
										var checkValue=$("#enrollStatus"+vIndex+fieldId).is(":checked");
										if(checkValue)
										{
											examTypeCountALL++;
										}
									}
								}
								else
								{
									 examTypeCountALL=$("#"+fieldId+"_tbl tr").length-1;
								}
								for(var Index=0;Index<slabValueObj.length;Index++)
					    		{
									var slabValueALL="";
									var perSubFlag=false;
					    			if(examTypeCountALL<=slabValueObj[Index])
					    			{
					    				slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][slabValueObj[Index]]);
					    				for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
										{
					    					var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][slabValueObj[Index]][slabValueALL[slabIndex]];
					    					if(slabValueALL[slabIndex]!="perSubjectFee")
								    		{
												if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
											    {
											    	$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").show();
										    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
										    		semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
										    	}
										    	else
										    	{
										    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
										    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html("NA");
										    	}
								    		}
											if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined && slabValueALL[slabIndex]=="perSubjectFee" )
											    	{
														perSubFlag=true;
														var examTypeCount=$('#'+fieldId+'_hiddenExamCount').val();
														generatePerSubjectLabelSec(fieldId,semNameInFee);
											    		$("#"+fieldId+"perSubFeeValue_span").show();
										    			
										    			semWiseTotalFEE=parseInt(objFeeHeadALL)*parseInt(examTypeCount);
														$("#"+fieldId+"perSubFeeValue_span").html(semWiseTotalFEE);
										    			
										    		}
										}
										var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
									    if($("#"+subTypeFeeId).length<=0)
										{
									    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
										}
									    else
									    {
									    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
									    }
									    $("#"+fieldId+"TotalFeeValue_span").text("");
									    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
									    $("#"+fieldId+"TotalFeeValue_span").show();
									    $("#"+fieldId+"_TotalFeelabelDiv").show();
									    $("#"+fieldId+"FeeDetails_divContainer").show();
									    if(!perSubFlag){
											 if($("#"+fieldId+"_perSublabelDiv").length>0)
											{
												$("#"+fieldId+"_perSublabelDiv").hide();
												$("#"+fieldId+"perSubFeeValue_span").text("");
											}
										}
									else{
										$("#"+fieldId+"_perSublabelDiv").show();
									}
									    $("#"+fieldId+"TotalFeeValue_span").text(parseInt(totalSemWiseFeeVal));
					    				break;
					    			}
					    			else
					    			{
					    				if(parseInt(Index+1)==slabValueObj.length)
					    				{
					    					//var examTypeCountALL=$("#"+fieldId+"_tbl tr").length-1;
						    				var lastKey = Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL]).sort().reverse()[0];
						    				var extraCount=parseInt(examTypeCountALL)-parseInt(lastKey);
						    				slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][lastKey]);
						    				console.log(lastKey);
						    				for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
											{
						    					var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[0]][SubCategoryValueALL][lastKey][slabValueALL[slabIndex]];
						    					if(slabValueALL[slabIndex]!="perSubjectFee")
									    		{
													if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
												    {
												    	$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").show();
											    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
											    		semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
								
											    	}
											    	else
											    	{
											    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
											    		$("#"+fieldId+subjectType+slabValueALL[slabIndex]+"Value_span").html("NA");
											    	}
									    		}
						    					else
												{
						    						if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
												    {
														generatePerSubjectLabelSec(fieldId,semNameInFee);
														$("#"+fieldId+"perSubFeeValue_span").text(parseInt(objFeeHeadALL)*parseInt(extraCount));
												    }
												 }
											}
						    				var perSubFeeVal="0";
											var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
										    if($("#"+subTypeFeeId).length<=0)
											{
										    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
											}
										    else
										    {
										    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text("");
										    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
										    $("#"+fieldId+"TotalFeeValue_span").show();
										    $("#"+fieldId+"_TotalFeelabelDiv").show();
										    $("#"+fieldId+"FeeDetails_divContainer").show();
										    if($("#"+fieldId+"perSubFeeValue_span").length>=1)
											{
											   perSubFeeVal=$("#"+fieldId+"perSubFeeValue_span").text();
											}
										    $("#"+fieldId+"_perSublabelDiv").show();
										    $("#"+fieldId+"TotalFeeValue_span").text(parseInt(perSubFeeVal)+parseInt(totalSemWiseFeeVal));
						    				break;
					    				}
					    			}		
					    		}
							}
						}
			    	}
			    	else
			    	{
			    		if(subjectType==null || subjectType==undefined || subjectType=="")
			    		{
			    			var examTypeCountALL=$("#"+fieldId+"_tbl tr").length-1;
					    	var objJSONSubType= new Object();
					    	for(var eIndex=0;eIndex<examTypeCountALL;eIndex++)
					    	{
					    		var subjectCATEGORY=$("#subjectType"+eIndex+fieldId).text();
					    		if(Object.keys(objJSONSubType).length>0)
					    		{
					    		  if(objJSONSubType!=null && objJSONSubType!=undefined && objJSONSubType!="")
					    		  {
					    			 if(objJSONSubType.hasOwnProperty(subjectCATEGORY))
					    			 {
						    				var subCatVal=objJSONSubType[subjectCATEGORY]
							    		    if(subCatVal!=null && subCatVal!=undefined && subCatVal!="")
							    		    {
							    			   var countVal=parseInt(subCatVal)+1;
							    			   objJSONSubType[subjectCATEGORY]=countVal;
									    	}
					    			 }
					    			  else{
								    	objJSONSubType[subjectCATEGORY]=1;
								    }
					    		  }
					    		}
						    	else{
						    		 objJSONSubType[subjectCATEGORY]=1;
						    	}
					       }
					    	   for(var fIndex=0; fIndex<feeCategoryValue.length;fIndex++)
							   {
						    	   var semWiseTotalFEE=0;
						    	   if(objJSONSubType.hasOwnProperty(feeCategoryValue[fIndex]))
						    	   {
						    		   var subTypeJsonCount=objJSONSubType[feeCategoryValue[fIndex]];
						    		   var subjectFee="";
						    		   if($("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_divContainer").length<=0)
						    			   {
							    		   subjectFee=generateSubjectSecInFee("",ExamTypeId,semId,feeCategoryValue[fIndex]);
						    			   }
						    		   else{
						    			 subjectFee="";
						    		   }
						    		   $("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_MainDiv").html("");
						    		   $("#"+fieldId+"FeeDetails_divContainer").append(subjectFee);
									   $("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_MainDiv").show();
									   var feeHeader= generateHeadsForSemFee("",ExamTypeId,semId,feeCategoryValue[fIndex]);
									   $("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_divContainer").append(feeHeader);
						    	   }
						    	   var SubCategoryValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]]);
								   var slabValueObj=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL]);
								   for(var slabInd=0;slabInd<slabValueObj.length;slabInd++)
								   {
									  if(subTypeJsonCount<=slabValueObj[slabInd])
									  {
										  var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]]);
										  for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
										   {
											  var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]][slabValueALL[slabIndex]];
											   if(slabValueALL[slabIndex]!="perSubjectFee")
								    		   {
												   
												    if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
											    	{
										    			
										    				$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").show();
											    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
											    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
										    			
										    		}
										    		else
										    		{
										    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
										    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html("NA");
										    		}
								    		   }
						
											}
										    var subTypeFeeId=fieldId+feeCategoryValue[fIndex]+"TotalFeeValue";
										    if($("#"+subTypeFeeId).length<=0)
											{
										    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
											}
										    else
										    {
										    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text("");
										    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,feeCategoryValue[fIndex]);
										    $("#"+fieldId+"TotalFeeValue_span").show();
										    $("#"+fieldId+"_TotalFeelabelDiv").show();
										    $("#"+fieldId+"FeeDetails_divContainer").show();
										    if($("#"+fieldId+"_perSublabelDiv").length>0)
										    {
										    	$("#"+fieldId+"_perSublabelDiv").hide();
											    $("#"+fieldId+"perSubFeeValue_span").text("");
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text(totalSemWiseFeeVal);
										    break;
									  }
									  else if(slabValueObj[slabInd]=="NA"){
										  var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]]);
										  for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
										   {
											  var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]][slabValueALL[slabIndex]];
											   if(slabValueALL[slabIndex]!="perSubjectFee")
								    		   {
												   
												    if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
											    	{
												    	$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").show();
										    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
										    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
										    		}
												    else
										    		{
												    	$("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_labelDiv").remove();
										    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
										    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html("NA");
										    		}
								    		   }
											   else{
												   if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
											    	{
													   if($("#"+fieldId+feeCategoryValue[fIndex]+"_perSubMainDiv").length<=0)
														   {
														   generatePerSubjectTypeLabelSec(fieldId,semId,feeCategoryValue[fIndex]);
														   }
													   //generatePerSubjectTypeLabelSec(fieldId,semId,feeCategoryValue[fIndex]);
									    				$("#"+fieldId+feeCategoryValue[fIndex]+"FeeDetails_labelDiv").remove();
										    			$("#"+fieldId+feeCategoryValue[fIndex]+"perSubFeeValue_span").html(parseInt(objFeeHeadALL)*parseInt(subTypeJsonCount));
										    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(parseInt(objFeeHeadALL)*parseInt(subTypeJsonCount));
										    			
										    		}
											   }
						
											}
										    var subTypeFeeId=fieldId+feeCategoryValue[fIndex]+"TotalFeeValue";
										    if($("#"+subTypeFeeId).length<=0)
											{
										    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
											}
										    else
										    {
										    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text("");
										    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,feeCategoryValue[fIndex]);
										    $("#"+fieldId+"TotalFeeValue_span").show();
										    $("#"+fieldId+"_TotalFeelabelDiv").show();
										    $("#"+fieldId+"FeeDetails_divContainer").show();
										    if($("#"+fieldId+"_perSublabelDiv").length>0)
										    {
										    	$("#"+fieldId+"_perSublabelDiv").hide();
											    $("#"+fieldId+"perSubFeeValue_span").text("");
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text(totalSemWiseFeeVal);
										    break;
									  
									  }
									  else
									  {
										  if(parseInt(slabInd+1)==slabValueObj.length)
										  {
											   if(subTypeJsonCount>slabValueObj[slabInd])
											   {
												    var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]]);
													var extraCount=parseInt(subTypeJsonCount)-parseInt(slabValueObj[slabInd]);
													var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]]);
													for(var slabIndex=0;slabIndex<slabValueALL.length;slabIndex++)
													{ 
														   var objFeeHeadALL=semesterList[semId][objFeeCategory][feeCategoryValue[fIndex]][SubCategoryValueALL][slabValueObj[slabInd]][slabValueALL[slabIndex]];
														   if(slabValueALL[slabIndex]!="perSubjectFee")
											    		   {
															   if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
														    	{
														    		$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").show();
													    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html(objFeeHeadALL);
													    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(objFeeHeadALL);
													    		}
													    		else
													    		{
													    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"_labelSpanDiv").hide();
													    			$("#"+fieldId+feeCategoryValue[fIndex]+slabValueALL[slabIndex]+"Value_span").html("NA");
													    		}
											    		   }
														   else
														   {
															   if(objFeeHeadALL!="" && objFeeHeadALL!=null && objFeeHeadALL!=undefined)
														    	{
																   generatePerSubjectLabelSec(fieldId,semNameInFee);
																   $("#"+fieldId+"perSubFeeValue_span").text(parseInt(objFeeHeadALL)*parseInt(extraCount));
														    	}
														   }
													}
													    var perSubFeeVal="0";
													    var subTypeFeeId=fieldId+feeCategoryValue[fIndex]+"TotalFeeValue";
													    if($("#"+subTypeFeeId).length<=0)
														{
													    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
														}
													    else
													    {
													    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
													    }
													    $("#"+fieldId+"TotalFeeValue_span").text("");
													    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,feeCategoryValue[fIndex]);
													    $("#"+fieldId+"TotalFeeValue_span").show();
													    $("#"+fieldId+"_TotalFeelabelDiv").show();
													    $("#"+fieldId+"FeeDetails_divContainer").show();
													   if($("#"+fieldId+"perSubFeeValue_span").length>=1)
													    {
													    	perSubFeeVal=$("#"+fieldId+"perSubFeeValue_span").text();
													    }
													    $("#"+fieldId+"_perSublabelDiv").show();
													    $("#"+fieldId+"TotalFeeValue_span").text(parseInt(perSubFeeVal)+parseInt(totalSemWiseFeeVal));
													    break;
											   }
										  }
									  }
									  
									 
								   }
							 }
			    		}
			    		else
			    		{
			    		if(semesterList[semId][objFeeCategory].hasOwnProperty(subjectType))
			    		{
			    		var SubCategoryValue=Object.keys(semesterList[semId][objFeeCategory][subjectType]);
			    		var slabValueObj=Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue]);
			    		if(slabValueObj.length>=1)
						{
			    			if(slabValueObj[0]=="NA")
							{
			    				var perSubjectTypeFlag=false;
								 var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][slabValueObj[0]]);
								 var objFeeHead=Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][slabValueObj[0]]);
								 for(var fIndex=0;fIndex<objFeeHead.length;fIndex++)
								 {
									var feeHeadVal=semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][slabValueObj[0]][objFeeHead[fIndex]];
									if(objFeeHead[fIndex]!="perSubjectFee")
							    	{
									     
									      if(feeHeadVal!="" && feeHeadVal!=null && feeHeadVal!=undefined)
									      {
									    		$("#"+fieldId+subjectType+objFeeHead[fIndex]+"_labelSpanDiv").show();
								    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"Value_span").html(feeHeadVal);
								    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(feeHeadVal);
				
								    	  }
								    	  else
								    	  {
								    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"_labelSpanDiv").hide();
								    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"Value_span").html("NA");
								    	  }
							    	}
									else{
										if(feeHeadVal!="" && feeHeadVal!=null && feeHeadVal!=undefined)
									      {
											 if($("#"+fieldId+subjectType+"_perSubMainDiv").length<=0)
											   {
											   generatePerSubjectTypeLabelSec(fieldId,semId,subjectType);
											   }
											 perSubjectTypeFlag=true;
										   //generatePerSubjectTypeLabelSec(fieldId,semId,feeCategoryValue[fIndex]);
						    				$("#"+fieldId+subjectType+"FeeDetails_labelDiv").remove();
											var examCountSubjectType=$("#"+fieldId+subjectType+"_Hidden").val();
									    		$("#"+fieldId+subjectType+objFeeHead[fIndex]+"_labelSpanDiv").show();
								    			$("#"+fieldId+subjectType+"perSubFeeValue_span").html(parseInt(feeHeadVal)*parseInt(examCountSubjectType));
								    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+(parseInt(feeHeadVal)*parseInt(examCountSubjectType));
				
								    	  }
									}
								  }
								  
								    var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
								    if($("#"+subTypeFeeId).length<=0)
									{
								    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
									}
								    else
								    {
								    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
								    }
								    $("#"+fieldId+"TotalFeeValue_span").text("");
								    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
								    $("#"+fieldId+"TotalFeeValue_span").show();
								    $("#"+fieldId+"_TotalFeelabelDiv").show();
								    $("#"+fieldId+"FeeDetails_divContainer").show();
								    if(!( perSubjectTypeFlag)){
									     if($("#"+fieldId+subjectType+"_perSublabelDiv").length>0)
									    {
										    $("#"+fieldId+subjectType+"_perSublabelDiv").hide();
										    $("#"+fieldId+subjectType+"perSubFeeValue_span").text("");
									    }
										}
										else{
											$("#"+fieldId+subjectType+"_perSublabelDiv").show();
											perSubjectTypeFlag=false;
										}
								   /* if($("#"+fieldId+"_perSublabelDiv").length>0)
								    {
								    	$("#"+fieldId+"_perSublabelDiv").hide();
									    $("#"+fieldId+"perSubFeeValue_span").text("");
								    }*/
								    $("#"+fieldId+"TotalFeeValue_span").text(totalSemWiseFeeVal);
								    
							}
							else
							{
								for(var Index=0;Index<slabValueObj.length;Index++)
					    		{
									    var examTypeCount=$('#'+fieldId+subjectType+'_Hidden').val();
						    			if(examTypeCount<=slabValueObj[Index])
						    			{
						    				$("#"+fieldId+"_perSublabelDiv").hide();
						    				var slabValueALL=Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][slabValueObj[Index]]);
										    for(var fIndex=0;fIndex<slabValueALL.length;fIndex++)
										    {
										    	var feeHeadVal=semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][slabValueObj[Index]][slabValueALL[fIndex]];
										    	if(slabValueALL[fIndex]!="perSubjectFee")
									    		{
											    	if(feeHeadVal!="" && feeHeadVal!=null && feeHeadVal!=undefined)
											    	{
											    		$("#"+fieldId+subjectType+slabValueALL[fIndex]+"_labelSpanDiv").show();
										    			$("#"+fieldId+subjectType+slabValueALL[fIndex]+"Value_span").html(feeHeadVal);
										    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(feeHeadVal);
						
										    		}
										    		else
										    		{
										    			$("#"+fieldId+subjectType+slabValueALL[fIndex]+"_labelSpanDiv").hide();
										    			$("#"+fieldId+subjectType+slabValueALL[fIndex]+"Value_span").html("NA");
										    		}
									    		}
										    }
										
										    var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
										    if($("#"+subTypeFeeId).length<=0)
											{
										    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
											}
										    else
										    {
										    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text("");
										    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
										    $("#"+fieldId+"TotalFeeValue_span").show();
										    $("#"+fieldId+"_TotalFeelabelDiv").show();
										    $("#"+fieldId+"FeeDetails_divContainer").show();
										    if($("#"+fieldId+"_perSublabelDiv").length>0)
										    {
										    	$("#"+fieldId+"_perSublabelDiv").hide();
											    $("#"+fieldId+"perSubFeeValue_span").text("");
										    }
										    $("#"+fieldId+"TotalFeeValue_span").text(totalSemWiseFeeVal);
										    
						    		}
						    			else
						    			{
						    				var lastKey = Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue]).sort().reverse()[0];
						    				if(parseInt(Index+1)==slabValueObj.length)
											  {
												   if(examTypeCount>lastKey)
												   {
														var extraCount=parseInt(examTypeCount)-parseInt(lastKey);
														var objFeeHead=Object.keys(semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][lastKey]);
													    for(var fIndex=0;fIndex<objFeeHead.length;fIndex++)
													    {
													    	var feeHeadVal=semesterList[semId][objFeeCategory][subjectType][SubCategoryValue][lastKey][objFeeHead[fIndex]];
													    	if(objFeeHead[fIndex]!="perSubjectFee")
												    		{
														    	if(feeHeadVal!="" && feeHeadVal!=null && feeHeadVal!=undefined)
														    	{
														    		$("#"+fieldId+subjectType+objFeeHead[fIndex]+"_labelSpanDiv").show();
													    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"Value_span").html(feeHeadVal);
													    			semWiseTotalFEE=parseInt(semWiseTotalFEE)+parseInt(feeHeadVal);
							
													    		}
													    		else
													    		{
													    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"_labelSpanDiv").hide();
													    			$("#"+fieldId+subjectType+objFeeHead[fIndex]+"Value_span").html("NA");
													    		}
												    		}
													    	else
															{       
													    		if(feeHeadVal!="" && feeHeadVal!=null && feeHeadVal!=undefined)
															    {
													    		   if($("#"+fieldId+"_perSublabelDiv").length<=0)
													    		   {
													    			   generatePerSubjectLabelSec(fieldId,semNameInFee);
													    		   }
																   $("#"+fieldId+"perSubFeeValue_span").text(parseInt(feeHeadVal)*parseInt(extraCount));
																   $("#"+fieldId+"_perSublabelDiv").show();
															    }
															}
													    }
													    var subTypeFeeId=fieldId+subjectType+"TotalFeeValue";
													    if($("#"+subTypeFeeId).length<=0)
														{
													    	createHiddenFieldInHtmlForFEE(subTypeFeeId,parseInt(semWiseTotalFEE));
														}
													    else
													    {
													    	$("#"+subTypeFeeId).val(parseInt(semWiseTotalFEE));
													    }
													    var initialVal=$("#"+fieldId+"TotalFeeValue_span").text();
														var perSubFeeVal=$("#"+fieldId+"perSubFeeValue_span").text();
													    var totalSemWiseFeeVal=calculateSemWiseTotalfee(ExamTypeId,semId,subjectType);
													    $("#"+fieldId+"TotalFeeValue_span").show();
													    $("#"+fieldId+"_TotalFeelabelDiv").show();
													    $("#"+fieldId+"_perSublabelDiv").show();
													    $("#"+fieldId+"FeeDetails_divContainer").show();
													    $("#"+fieldId+"TotalFeeValue_span").text(totalSemWiseFeeVal+parseInt(perSubFeeVal));
													   
												   }
											  }
						    			}
						    			break;
					    		}
							}
						}
			    		}
			    		else
			    		{
			    			var enrollType=enrollTypeString+ExamTypeId;
			    			var htmlSemId=enrollTypeString+ExamTypeId+semTypeString+semId;
			    			var semesterList=document.getElementById(enrollType+"FeeDetails_topMainDiv").querySelectorAll(".semCountInExamType");
			    			if(semesterList.length==1)
			    			{
			    				$("#"+htmlSemId+"FeeDetails_mainDiv").remove();
			    				$("#"+enrollType+"FeeDetails_topMainDiv").hide();
			    			}
			    			else{
			    				$("#"+htmlSemId+"FeeDetails_mainDiv").remove();
			    			}  
			    			calculateTotalFee("","");
			    			$("#collapse"+ExamTypeId+semId).removeClass('in');
			    			openInvalidDataModal("Error", "Please configure fee for "+ExamType+" enrollement Type.");
			    		}
			    		}
			    	}
			       }
			    }
			    else
				{
			    	$("#collapse"+ExamTypeId+semId).removeClass('in');
					openInvalidDataModal("Error", "Please configure fee for "+ExamType+" SEMESTER-"+semId+" enrollement Type.");
				
				}
			  }
			else
			{
				$("#collapse"+ExamTypeId+semId).removeClass('in');
				openInvalidDataModal("Error", "Please configure fee for "+ExamType+" enrollement Type.");
			}
	     }
		 else
			{
			 //23Aug Start
			 if(enrollmentTypeId == 1){
					var examTypeJson=feeDetailsJSON.FeeDetails[ExamType];
				    var objectExamTypeJson=Object.keys(examTypeJson);
				    var semesterList=feeDetailsJSON.FeeDetails[ExamType][objectExamTypeJson];
				    var objFeeCategory=Object.keys(semesterList[semId]);
				    var feeCategoryValue=Object.keys(semesterList[semId][objFeeCategory]);
					var subCodeArray = getSubjectCodeForRegularFee(fieldId);
					if(subCodeArray!="" && subCodeArray!=undefined &&subCodeArray!=null){
						for(var feeIndex=0; feeIndex<feeCategoryValue.length;feeIndex++){
							for(var z=0; z<subCodeArray.length-1;z++){
								if(feeCategoryValue[feeIndex]==subCodeArray[z]){
									var feeComponent=semesterList[semId][objFeeCategory][feeCategoryValue[feeIndex]]["FeeComponent"];
									
									if($("#"+ExamTypeId+semId+"_tblForSubCode").length<=0){
										tableGenerateForSubCode(ExamTypeId,semId);
									}
									var subjectCodeWithoutChar=subCodeArray[z].replace(/[^a-zA-Z0-9 ]/g, "");
									var subCodeId=ExamTypeId+semId+subjectCodeWithoutChar;
									
									if($("#"+ExamTypeId+semId+"_tblForSubCode").find('tbody').find('tr#'+subCodeId+'').length<=0){
									
									var htmlfeeData='<tr id="'+subCodeId+'">';
					    			htmlfeeData+='<td id="tr_subjectCode_'+subCodeId+'_td_1">';
						    		htmlfeeData+='<div class="" id="tr_subjectCode__divContainer'+subCodeId+'">';
						    		htmlfeeData+='<span id="subjectCode'+subCodeId+'" name="subjectCode'+subCodeId+'">'+feeCategoryValue[feeIndex]+'</span></div></td>';

									var feeKey = Object.keys(feeComponent);
									for(var x=0; x<feeKey.length; x++){
										if(feeKey[x]!='perSubjectFee'){
											//htmlfeeData+='<td id="tr_+'+feeKey[x]+'_'+subCodeId+'_td_1">';
											htmlfeeData+='<td id="tr_'+feeKey[x]+'_'+subCodeId+'_td_1">';
											htmlfeeData+='<div class="" id="'+feeKey[x]+'_divContainer'+subCodeId+'">';
											htmlfeeData+='<span id="'+feeKey[x]+subCodeId+'" name="'+feeKey[x]+subCodeId+'">'+feeComponent[feeKey[x]]+'</span></div></td>';
										}
									}
									
									
						    		htmlfeeData+='</tr>';
						    		$("#"+ExamTypeId+semId+"_tblForSubCode").append(htmlfeeData);
						    		genrateFeesForSubCode(ExamTypeId,semId,subCodeArray[z]);
								}
							}
						}
					}			
				}
			 }		
			 //23Aug End
			 else{
			 
				//var feeFlag=false;
			    var examTypeJson=feeDetailsJSON.FeeDetails[ExamType];
			    var objectExamTypeJson=Object.keys(examTypeJson);
			    var semesterList=feeDetailsJSON.FeeDetails[ExamType][objectExamTypeJson];
			    var objFeeCategory=Object.keys(semesterList[semId]);
			    var feeCategoryValue=Object.keys(semesterList[semId][objFeeCategory]);
			    if(subjectCode!="" && subjectCode!=undefined &&subjectCode!=null)
			    {
				    for(var feeIndex=0; feeIndex<feeCategoryValue.length;feeIndex++)
				    {
				    	if(feeCategoryValue[feeIndex]==subjectCode)
				    	{
				    		var feeComponent=semesterList[semId][objFeeCategory][feeCategoryValue[feeIndex]]["FeeComponent"];
				    		feeFlag=true;
				    		
				    		if($("#"+ExamTypeId+semId+"_tblForSubCode").length<=0)
				    		{
				    			tableGenerateForSubCode(ExamTypeId,semId);
				    		}
				    		var subjectCodeWithoutChar=subjectCode.replace(/[^a-zA-Z0-9 ]/g, "");
				    		var subCodeId=ExamTypeId+semId+subjectCodeWithoutChar;
				    		var htmlfeeData='<tr id="'+subCodeId+'">';
				    			htmlfeeData+='<td id="tr_subjectCode_'+subCodeId+'_td_1">';
					    		htmlfeeData+='<div class="" id="tr_subjectCode__divContainer'+subCodeId+'">';
					    		htmlfeeData+='<span id="subjectCode'+subCodeId+'" name="subjectCode'+subCodeId+'">'+feeCategoryValue[feeIndex]+'</span></div></td>';
					    		
					    		var feeKey = Object.keys(feeComponent);
								for(var x=0; x<feeKey.length; x++){
									if(feeKey[x]!='perSubjectFee'){
										htmlfeeData+='<td id="tr_"+'+feeKey[x]+'_'+subCodeId+'_td_1">';
										htmlfeeData+='<div class="" id="'+feeKey[x]+'_divContainer'+subCodeId+'">';
										htmlfeeData+='<span id="'+feeKey[x]+subCodeId+'" name="'+feeKey[x]+subCodeId+'">'+feeComponent[feeKey[x]]+'</span></div></td>';
									}
								} 
					    		htmlfeeData+='</tr>';
					    		$("#"+ExamTypeId+semId+"_tblForSubCode").append(htmlfeeData);
					    		genrateFeesForSubCode(ExamTypeId,semId,subjectCode);
					    		
				    	}
				    }
			    }
			}
		}	
	}
		

}
function tableGenerateForSubCode(examTypeId,semId)
{
	var semExamTypeId=examTypeId+semId;
	var mainDivId=enrollTypeString+examTypeId+semTypeString+semId;
	var htmlTableHeading='<table id="'+semExamTypeId+'_tblForSubCode" class="table widthFull"><tr>';
	if(studentDetails.Data.isValidFeeHead=="Y")
	{
		//FieldId=enrollTypeString+ExamTypeId+semTypeString+SemesterId+subjectType;
		var feeHeadList=studentDetails.Data.feeHead;
		
		 htmlTableHeading+='<th align="center">'
		                  +'<span id="defaultLang_'+semExamTypeId+'_Header_">Subject Code</span><br>'
		                  +'<span id="multiLingual_'+semExamTypeId+'_Header_" class="multiLingualSpanClass"></span></th>';
		 for(var headIndex=0;headIndex<feeHeadList.length;headIndex++)
			{
				var feeHeadId=feeHeadList[headIndex].txtMasterValue;
				var feeHeadName=feeHeadList[headIndex].txtMasterName;
				var semExamTypeFeeHead=examTypeId+semId+feeHeadId;
		  htmlTableHeading+='<th align="center">'
		                  +'<span id="defaultLang_'+semExamTypeFeeHead+'_Header_">'+feeHeadName+'</span><br>'
		                  +'<span id="multiLingual_'+semExamTypeFeeHead+'_Header_" class="multiLingualSpanClass"></span></th>';
			}		 
		 htmlTableHeading+='</tr>';
    }
	 $("#"+mainDivId+"FeeDetails_mainDiv").append(htmlTableHeading);
	 var amountSubCodeSemHtml=totalAmountPerSemFeesHtml(examTypeId,semId);
	 $("#"+mainDivId+"FeeDetails_mainDiv").append(amountSubCodeSemHtml);
	 var lateFeesSubCode=lateFeeSubCodeHtml(examTypeId,semId);
	 $("#"+mainDivId+"FeeDetails_mainDiv").append(lateFeesSubCode);
}
function totalAmountPerSemFeesHtml(examTypeId,semId)
{
	var fieldIdforSem=enrollTypeString+examTypeId+semTypeString+semId;
	var semesterNAME=$("#anchor"+fieldIdforSem).text();
	var idSubCode=examTypeId+semId;
	var totalFeeSubCode='<div  id="subCodeSemFee'+idSubCode+'" style="margin-top: 22px;">'+
    '<div class="customOneFieldDivClass" id="">'+
    '<label class="classForAllFieldLabels " id="subCodeSemFee_labelDiv'+idSubCode+'" style="margin-left: 16px;font-weight: bold">Fee(in Rupees) for '+semesterNAME+':  '+
    '<span class="multiLingualSpanClass" id="multilingualSpan_subCodeSemFee"></span>'+
    '<span class="" id="subCodeSemFee_span'+idSubCode+'" style="font-weight: bold;padding-left: 25px;">0</span></label></div></div>';
	return totalFeeSubCode;
}
function lateFeeSubCodeHtml(examTypeId,semId)
{
var fieldId=examTypeId+semId;
var fieldIdforSem=enrollTypeString+examTypeId+semTypeString+semId;
	var semesterNAME=$("#anchor"+fieldIdforSem).text();
	var lateFeeSubCode='<div class="customOneFieldDivClass" id="'+fieldId+'_lateFeeMainDiv" style="display:none">'+
    '<label class="classForAllFieldLabels " id="'+fieldId+'_lateFeelabelDiv" style="margin: 15px;font-weight: bold;">Late Fee to be paid '+semesterNAME+':  '+
    '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
    '<span class="totalLateFeeClass" id="'+fieldId+'lateFeeValue_span" style="font-weight: bold;padding-left: 20px;">0</span></label></div>'+
    '</div>';
lateFeeSubCode+='<div class="customOneFieldDivClass" id="'+fieldId+'_totalFeeMainDiv" style=" margin-bottom: 32px;">'+
'<label class="classForAllFieldLabels " id="'+fieldId+'_totalFeelabelDiv" style="margin: 15px;font-weight: bold;">Total Fee for '+semesterNAME+':  '+
'<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
'<span class="totalFeeSemWiseClass" id="'+fieldId+'toatlFeeValue_span" style="font-weight: bold;padding-left: 60px;">0</span></label></div>'+
'</div>';
return lateFeeSubCode;
}
function generatePerSubjectLabelSec(fieldId,semesterNAME)
{
	semesterNAME=$("#anchor"+fieldId).text();
   if($("#"+fieldId+"_perSublabelDiv").length<=0)
   { 
	   var perSubFeeHtml='<div class="customOneFieldDivClass" id="'+fieldId+'_perSubMainDiv">'+
	                     '<label class="classForAllFieldLabels " id="'+fieldId+'_perSublabelDiv" style="margin: 15px;font-weight: bold;">Per subject fee for '+semesterNAME+' :  '+
	                     '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
	                     '<span class="" id="'+fieldId+'perSubFeeValue_span" style="font-weight: bold; padding-left:52px">0</span></label></div>'+
	                     '</div>';
	   $("#"+fieldId+"FeeDetails_mainDiv").append(perSubFeeHtml);
	   $('#'+fieldId+'_grandFeeMainDiv').detach().appendTo('#'+fieldId+'_perSubMainDiv');
   }
}
function generateHeadsForSemFee(id,ExamTypeId,SemesterId,subjectType)
{   
	var feeHeader='';
	var FieldId='';
	if(studentDetails.Data.isValidFeeHead=="Y")
	{
		FieldId=enrollTypeString+ExamTypeId+semTypeString+SemesterId+subjectType;
		var feeHeadList=studentDetails.Data.feeHead;
		for(var headIndex=0;headIndex<feeHeadList.length;headIndex++)
		{
			var feeHeadId=feeHeadList[headIndex].txtMasterValue;
			var feeHeadName=feeHeadList[headIndex].txtMasterName;
			feeHeader+='<div class="col-lg-3 col-md-3 col-sm-4 col-xs-4 customOneFieldDivClass" style="margin-left :0px;position:relative;top:12px" id="'+FieldId+feeHeadId+'_divContainer">'+
            '<div class="form-group customOneFieldDivClass" id="'+FieldId+feeHeadId+'_labelSpanDiv" style="display:none;">'+
			'<label class="classForAllFieldLabels " id="'+FieldId+feeHeadId+'_labelDiv">'+feeHeadName+'(in Rupees)'+
			'<span class="multiLingualSpanClass" id="multilingualSpan_'+FieldId+feeHeadId+'"></span>'+
			'</label>'+
			'<span class="" id="'+FieldId+feeHeadId+'Value_span" style="font-weight: bold">NA</span></div></div>';
		}
	}
    return feeHeader;
}

function generateSemSecInFee(id,ExamTypeId,SemesterId,subjectType)
{
	var fieldId=enrollTypeString+ExamTypeId+semTypeString+SemesterId;
	var semesterNAME=$("#anchor"+fieldId).text();
	var semFeeValue=  '<div id="'+fieldId+'FeeDetails_mainDiv" style="margin-left:31px;margin-top:2%;margin-right:2%;"class="customSemesterCSS semCountInExamType">'+
	                  '<div class="customOneFieldDivClass" id="'+fieldId+'FeeDetails_divContainer">'+
	                  '<div class="tab-heading " id="'+fieldId+'FeeDetails_headingDiv" style="margin-top: 0px;margin-left:0px;">'+
	                  '<span class="" id="'+fieldId+'FeeDetails_Div">'+semesterNAME+'</span>'+
	                  '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'FeeDetails"></span></div>'+
	                  '</div>';
	     if(SubjectCodeFlag!="Y")
	    	 {
	    	 semFeeValue+=  '<div class="clear"></div>'+
             '<div class="customOneFieldDivClass" id="" style="display:none;">'+
             '<label class="classForAllFieldLabels " id="'+fieldId+'_TotalFeelabelDiv" style="margin: 15px;font-weight: bold;">Total Fee to be paid for '+semesterNAME+':  '+
             '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
             '<span class="totalFeeSemWiseClass" id="'+fieldId+'TotalFeeValue_span" style="padding-left:21px;font-weight: bold">0</span></label></div>'+
             '<div class="customOneFieldDivClass" id="'+fieldId+'_lateFeeMainDiv" style="display:none">'+
             '<label class="classForAllFieldLabels " id="'+fieldId+'_lateFeelabelDiv" style="margin-top: 15px;font-weight: bold;">Late Fee to be paid for '+semesterNAME+':  '+
             '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
             '<span class="totalLateFeeClass" id="'+fieldId+'lateFeeValue_span" style="padding-left:26px;font-weight: bold">0</span></label></div>'+
			 '<div class="customOneFieldDivClass" id="'+fieldId+'_grandFeeMainDiv" style="">'+
             '<label class="classForAllFieldLabels " id="'+fieldId+'_grandFeeMainDiv1" style="margin-top: 15px;font-weight: bold;"> Total Fee to be paid for '+semesterNAME+':  '+
             '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
             '<span class="totalGrandFeeClass" id="'+fieldId+'grandFeeMainDiv_span" style="padding-left:21px;font-weight: bold">0</span></label></div>'
             '</div>';
			 /* +'<div class="customOneFieldDivClass" id="'+fieldId+'_grandFeeMainDiv" style="">'+
             '<label class="classForAllFieldLabels " id="'+fieldId+'_grandFeeMainDiv1" style="padding-left:31px;margin: 15px;font-weight: bold;">Grand Fee to be paid for '+semesterNAME+' Exam Type:  '+
             '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
             '<span class="totalLateFeeClass" id="'+fieldId+'grandFeeMainDiv_span" style="font-weight: bold">0</span></label></div>'+
             '</div>';*/
	    	 }
	 
    return semFeeValue;
}
function generateSubjectSecInFee(id,ExamTypeId,SemesterId,subjectType)
{
	var fieldId=enrollTypeString+ExamTypeId+semTypeString+SemesterId+subjectType;
	var SubjectFeeValue='<div class="clear"></div>'+
	'<div id="'+fieldId+'FeeDetails_mainDiv" class="customSemesterCSS" >'+
    '<div class="customOneFieldDivClass" id="'+fieldId+'FeeDetails_divContainer" style=" margin-left: 15px;">'+
    '<label class="classForAllFieldLabels " id="'+fieldId+'FeeDetails_labelDiv" style="font-weight: bold">'+subjectType+
    '<span class="multiLingualSpanClass" id="multilingualSpan_'+fieldId+'"></span>'+
    '</label></div>'+
    '</div>';
	 return SubjectFeeValue;
}
function addFunctionlityCustomHook()
{
	$("#PreferredCenterName").attr("onchange","showPreferredCenterCode('PreferredCenterCode',this.id);");
	var dateOfBirth=$("#txtDateOfBirth").val();
	$("#DateOfBirth_divContainer").hide();
	var dob=dateOfBirth.split(" ");
	var dateOfBirth1=dob[0];
	var CurrentDate="19/11/2018"; /*dd/mm/yyyy format (CurrentDate)*/
	var dob=dateOfBirth1.split("-").reverse().join("/"); /*change yyyy-mm-dd in to dd/mm/yyyy format*/
	var age=getDateDifference(dob, CurrentDate);
	$("#txtAge").val(age[0]);
	$("#txtAge_span").html(age[0]);
	$("#PreferredCenterName").attr("onchange","showPreferredCenterCode('PreferredCenterCode',this.id);");
	$("#txtMobileNo").attr("onblur","validateMobileNoOnBlur(this.id);");
	$("#txtEmail").attr("onblur","validateEmailOnBlur(this.id);");
	$("#txtMobileNoConfirm").attr("onblur","validateConfirmFieldsOnBlur('txtMobileNo',this.id,'Mobile No');");
	$("#txtEmailConfirm").attr("onblur","validateEmailOnBlur(this.id); validateConfirmFieldsOnBlur('txtEmail',this.id,'Email Id');");
	$("#txtMobileNo").attr('maxlength','10');
	$("#txtMobileNoConfirm").attr('maxlength','10');
	var isRegular=candidateDataJSON[0].LateralFlag;
	var siteCode=candidateDataJSON[0].SiteCode;
	var collgeName=$("#txtInstituteName").val();
	$("#SiteName_span").text(siteCode+"-"+collgeName);
	if(isRegular=="Y")
	{
		$("#txtStudentType").val("Lateral");
	}
	else
	{
		$("#txtStudentType").val("Regular");
	}
	
}
function showPreferredCenterCode(fiedlToStore, currentDDId)
{
	var valOfOptionSelectedOfCurrentDD = $("#"+currentDDId).val();
	var textOfOptionSelectedOfCurrentDD = $("#"+currentDDId+" option:selected").text();
	$("#"+fiedlToStore+"_span").html(valOfOptionSelectedOfCurrentDD);
	$("#txtCenterCode").val(valOfOptionSelectedOfCurrentDD);
	$("#txtCenterName").val(textOfOptionSelectedOfCurrentDD);
	$("#txtPreferredCenterCode").val(valOfOptionSelectedOfCurrentDD);
}
function getDateDifference(lessDate, moreDate)
{
	var age = new Array();
	if(lessDate != "" && moreDate != "")
	{
		var array1 = lessDate.split("/");
		var inputDay = array1[0];
		var inputMonth = array1[1];
		var inputYear = array1[2];
		
		var array2 = moreDate.split("/");
		var currentDay = array2[0];
		var currentMonth = array2[1];
		var currentYear = array2[2]; 
		
		var day = 0;
		var month = 0;
		var year = 0;

		if(inputYear > currentYear)
		{
			year = -1;
			month = -1;
			day = -1;
		}
		else if(inputYear == currentYear)
		{
			if(inputMonth > currentMonth)
			{
				year = -1;
				month = -1;
				day = -1;
			}
			else if(inputMonth == currentMonth)
			{
				if(inputDay > currentDay)
				{
					year = -1;
					month = -1;
					day = -1;
				}
				else if(inputDay == currentDay)
				{
					year = 0;
					month = 0;
					day = 0;
				}
				else
				{
					year = 0;
					month = 0;
					day = currentDay - inputDay;
				}
			}
			else
			{
				year = 0;
				if(inputDay > currentDay)
				{
					month = currentMonth - inputMonth - 1;
					day = 30 - (inputDay - currentDay);
				}
				else if(inputDay == currentDay)
				{
					month = currentMonth - inputMonth;
					day = 0;
				}
				else
				{
					month = currentMonth - inputMonth;
					day = currentDay - inputDay;
				}
			}
		}
		else
		{
			if(inputMonth > currentMonth)
			{
				year = currentYear - inputYear - 1;
				if(inputDay > currentDay)
				{
					month = 12 - (inputMonth - currentMonth) - 1;
					day = 30 - (inputDay - currentDay);
				}
				else if(inputDay == currentDay)
				{
					month = 12 - (inputMonth - currentMonth);
					day = 0;
				}
				else
				{
					month = 12 - (inputMonth - currentMonth);
					day = currentDay - inputDay;
				}
			}
			else if(inputMonth == currentMonth)
			{
				if(inputDay > currentDay)
				{
					year = currentYear - inputYear - 1;
					month = 11;
					day = 30 - (inputDay - currentDay);	
				}
				else if(inputDay == currentDay)
				{
					year = currentYear - inputYear;
					day = 0;
					month = 0;
				}
				else
				{
					year = currentYear - inputYear;
					month = 0;
					day = currentDay - inputDay;		
				}
			}
			else
			{
				year = currentYear - inputYear;
				if(inputDay > currentDay)
				{
					month = currentMonth - inputMonth - 1;
					day = 30- (inputDay - currentDay);
				}
				else if(inputDay == currentDay)
				{
					month = currentMonth - inputMonth;
					day = 0;
				}
				else
				{
					month = currentMonth - inputMonth;
					day = currentDay - inputDay;
				}
			}
		}
		age[0] = year;
		age[1] = month;
		age[2] = day;
	}
	return age;
}
function changeDummyImagePath()
{
    var openURL=window.location.href;
    if(openURL.indexOf("@@")>1)
	{
    	$("#Photo_id").attr("src","images/onlineAppForm/form61986/placeHolder.png");
    	 $("#Sign_id").attr("src","images/onlineAppForm/form61986/DummySign.jpg");
	}
    else
    {
      $("#Photo_id").attr("src","/EForms/images/onlineAppForm/form61986/placeHolder.png");
  	  $("#Sign_id").attr("src","/EForms/images/onlineAppForm/form61986/DummySign.jpg");
    }
}
function doTaskBeforeSubmit()
{
	$("#conditional_case").val(candidateDataJSON[0]["eligibility"].conditional_case);
	$("#payment_mode").val("online");
	$("#paymentGatewayType").val("online");
	//$("#paymentGatewayType").val("test");

	if(totalFeeToPaid!="" && totalFeeToPaid!=undefined && totalFeeToPaid!=null && totalFeeToPaid!=0)
	{
		$("#TotalFees").val(totalFeeToPaid);
		$("#txt_Amount").val(totalFeeToPaid);
		
	}
}
//viewDetailsJSON={"FeeDetails":{"enrollmentData":{"Regular":{"6":[{"txtAppEnrollmentType":"Regular","txtApplyingSem":"6","txtAppCurrentSemYear":"Session 1","txtSGMId":"April-May 2018","txtInstituteCode":"","txtAwardName":"PhD"}]},"Backlog":{"SEMESTER-1":[{"txtAppEnrollmentType":"Backlog","txtApplyingSem":"SEMESTER-1","txtAppCurrentSemYear":"Session 1","txtSGMId":"April-May 2018","txtInstituteCode":"","txtAwardName":"PhD"}],"SEMESTER-2":[{"txtAppEnrollmentType":"Backlog","txtApplyingSem":"SEMESTER-2","txtAppCurrentSemYear":"Session 1","txtSGMId":"April-May 2018","txtInstituteCode":"","txtAwardName":"PhD"}],"SEMESTER-3":[{"txtAppEnrollmentType":"Backlog","txtApplyingSem":"SEMESTER-3","txtAppCurrentSemYear":"Session 1","txtSGMId":"April-May 2018","txtInstituteCode":"","txtAwardName":"PhD"}]}},"subjectWiseData":{},"frontEndData":[]},"isValid":"Y"};
function showDeatilsOnViewPage()
{
	if(viewDetailsJSON!="" && viewDetailsJSON!=undefined && viewDetailsJSON!=null)
	{
		var enrollmentData=viewDetailsJSON.ViewDetails.enrollmentData;
		if(enrollmentData!="" && enrollmentData!=undefined && enrollmentData!=null)
		{
			var keysInEnrollmentData=Object.keys(enrollmentData);
			if(keysInEnrollmentData.length>0)
			{
				var examTypeJson=enrollmentData[keysInEnrollmentData[0]];
				var keysInExamType=Object.keys(examTypeJson);
				if(keysInExamType.length>0)
				{
					var semesterJson=enrollmentData[keysInEnrollmentData[0]][keysInExamType[0]];
					if(semesterJson.length>0)
					{
						var lengthOfJson=Object.keys(semesterJson[0]);
						for(var index=0;index<lengthOfJson.length;index++)
						{
							$("#"+lengthOfJson[index]+"_div").html(semesterJson[0][lengthOfJson[index]]);
						}
					}
				}
			}
		}
	}
	else
	{
		setTimeout("showDeatilsOnViewPage();", 500);
		
	}
}
//UIDetailsViewJson={"viewData":[{"txtFieldHtmlName":"txtAppEnrollmentNo","txtMasterValue":"RegistrationNo","txtMasterName":"Student's Enrollment No"},{"txtFieldHtmlName":"InstituteCode","txtMasterValue":"SiteCode","txtMasterName":"College Code"},{"txtFieldHtmlName":"txtAppRollNo","txtMasterValue":"RollNo","txtMasterName":"Student's Roll No"},{"txtFieldHtmlName":"InstituteName","txtMasterValue":"SiteName","txtMasterName":"College Name"},{"txtFieldHtmlName":"txtAppName","txtMasterValue":"FullName","txtMasterName":"Student's Name"},{"txtFieldHtmlName":"txtAwardName","txtMasterValue":"AwardName","txtMasterName":"Program Name"},{"txtFieldHtmlName":"txtAppSocialCategory","txtMasterValue":"AdmissionCategoryName","txtMasterName":"Social Category"},{"txtFieldHtmlName":"txtAwardCode","txtMasterValue":"ProgramCode","txtMasterName":"Course Code"},{"txtFieldHtmlName":"txtGender","txtMasterValue":"Gender","txtMasterName":"Gender"},{"txtFieldHtmlName":"txtAwardName","txtMasterValue":"ProgramName","txtMasterName":"Course Name"},{"txtFieldHtmlName":"txtMobileNo","txtMasterValue":"TelephoneNumber","txtMasterName":"Mobile Number"},{"txtFieldHtmlName":"CurrentSession","txtMasterValue":"SessionName","txtMasterName":"Year\/Semester"},{"txtFieldHtmlName":"txtEmail","txtMasterValue":"EmailId","txtMasterName":"Email ID"},{"txtFieldHtmlName":"SGMName","txtMasterValue":"sgm_name","txtMasterName":"Exam Session"},{"txtFieldHtmlName":"txtAcademicYear","txtMasterValue":"academic_year_name","txtMasterName":"Academic Year"},{"txtFieldHtmlName":"txtPreferredCenterName","txtMasterValue":"PreferredCenterName","txtMasterName":"Preferred Center Name"},{"txtFieldHtmlName":"txtDateOfBirth","txtMasterValue":"DateOfBirth","txtMasterName":"Date Of Birth"},{"txtFieldHtmlName":"txtAge","txtMasterValue":"txtAge","txtMasterName":"Age"}],"isValidUIView":"Y"};
function generateHTMLOnView()
{
	var viewHtml="";
	if(UIDetailsViewJson!="" && UIDetailsViewJson!=null && UIDetailsViewJson!=undefined)
	{
			if(UIDetailsViewJson.isValidUIView=="Y")
			{
				var labelJson=UIDetailsViewJson.viewData;
				for(var indexView=0;indexView<labelJson.length;indexView++)
				{
					 var txtFieldHtmlName=labelJson[indexView].txtFieldHtmlName;
					 var labelName=labelJson[indexView].txtMasterName;
					 viewHtml+='<div id="'+txtFieldHtmlName+'_tr">'+
					 '<div id="'+txtFieldHtmlName+'_DivContainer" class="col-lg-3 col-sm-12 col-md-3 col-xs-12">'+
					 '<div class="form-group form-group-Gen">'+
					 '<label class="classForAllFieldLabels " id="'+txtFieldHtmlName+'_labelDiv">'+labelName+
					 '<span class="multiLingualSpanClass" id="multilingualSpan_'+txtFieldHtmlName+'"></span>'+
					 '</label>'+
					 '<span class="labeltxt valueLabelSpanClass" id="'+txtFieldHtmlName+'_div">NA</span>'+
					 '</div></div></div>';
				}
				$("#examEnrollmentDetails").append(viewHtml);
				showDeatilsOnViewPage();
				generateImageSecOnView();
				displayImagesOnView();
			}
	}
	else
	{
		setTimeout("generateHTMLOnView();", 500);
		
	}
}
function generateImageSecOnView()
{
var photoUploadHtml="";
 photoUploadHtml+= '<div class="uploadedImageCustomCss " id="uploadedImageDivPhoto">'+
                   '<img class="imagePhoto img-responsive" align="middle" alt="Photograph" src="" style="border-width: 1px; border-style: solid;width: 162px;" id="Photo_id">'+
                   '</div>'+
                   '<br>'+
	               '<div class="uploadedSignCustomCss" id="uploadedSignDivSignature">'+
                   '<img class="imageSign img-responsive" align="middle" alt="Signature" src="" style="border-width: 1px; border-style: solid;width: 179px;height: 84px!important;" id="Sign_id" >'+
                   '</div>';
  $("#examImageDetails").append(photoUploadHtml);
  $("#Photo_id").attr("src","images/onlineAppForm/form61986/placeHolder.png");
  $("#Sign_id").attr("src","images/onlineAppForm/form61986/DummySign.jpg");
}
var subjectWiseData="";
function generateExamTypeOnView()
{
	var viewHtmlExamType="";
	if(viewDetailsJSON!="" && viewDetailsJSON!=undefined && viewDetailsJSON!=null)
	{
		subjectWiseData=viewDetailsJSON.ViewDetails.subjectWiseData;
		var keysInSubNode=Object.keys(subjectWiseData);
		for(var index=0;index<keysInSubNode.length;index++)
		{
			var examType=keysInSubNode[index];
			var keysInExamType=Object.keys(subjectWiseData[examType]);
			viewHtmlExamType+='<div id="'+examType+'_MainDiv">'+
				              '<div class="tab-heading tab-heading-gen" id="'+examType+'_headingDiv">'+
			                  '<span class="" id="'+examType+'_headingSpan">'+examType+' </span>'+
			                  '<span class="multiLingualSpanClass" id="multilingualSpan_'+examType+'_span"></span>'+
		                      '</div>';
			for(var semIndex=0;semIndex<keysInExamType.length;semIndex++)
			{
				var semester=keysInExamType[semIndex];
				var semesterId=semester.replace(/\s/g, '');
				var semesterName=subjectWiseData[examType][semester][0].txtApplyingSemName;
				
				//var semesterName="SEMESTER-"+semester;
				var semesterlength=subjectWiseData[examType][semester].length;
				viewHtmlExamType+='<div id="'+examType+semesterId+'_MainDiv" style="margin: 14px;">'+
				                  '<div id="'+examType+semesterId+'_headingDiv" class="customSemClassOnView">'+semesterName+'</div>';
				viewHtmlExamType+=generateSubTblOnSemester(semesterlength,examType,semester);
				viewHtmlExamType+='</div>';
				
			}
			viewHtmlExamType+='</div>';
		}
		$("#subjectDetails").append(viewHtmlExamType);
	}
	else
	{
		setTimeout("generateExamTypeOnView();", 500);
		
	}
}
var tableHeaderOnView=[/*{"id":"subject_id","name":"Subject Id"},*/{"id":"subject_category_name","name":"Subject Type"},{"id":"subject_name","name":"Subject Name"},{"id":"subject_code","name":"Subject Code"},{"id":"examType_name","name":"Enrolled Type"}];

function generateSubTblOnSemester(lengthValue,examType,semester)
{
	
	var tableHtml="";
	var semesterId=semester.replace(/\s/g, '');
	tableHtml+= '<div id="gridTableFor_'+examType+semesterId+'" class="gridDivClass">'+
		       '<table class="table" style="width: 100% !important;" id="'+examType+semesterId+'_tbl">'+
			   '<tbody>';
	tableHtml+='<tr>'+
               '<th align="center" style="" id="th_SrNo_'+examType+semesterId+'">Serial NO.</th>';
			   for(var index=0;index<tableHeaderOnView.length-1;index++)
			   {
				 var trId=tableHeaderOnView[index].id;
				 var trName=tableHeaderOnView[index].name;
				 tableHtml+='<th align="center" style="" id="th_'+trId+'_'+examType+semesterId+'">'+trName+'</th>';
			   }
			   tableHtml+='</tr>';
			   var srNoCtr=0;
			   for(var trIndex=0;trIndex<lengthValue;trIndex++) 
			   {
				   if("Y"==subjectWiseData[examType][semester][trIndex].txtSubjectStatus)//check added for force Enrollment
				   {
					   srNoCtr++;
					   tableHtml+='<tr id="tr_'+examType+semesterId+'_'+(trIndex)+'">';
					  /* tableHtml+='<td id="'+examType+semesterId+'_'+(trIndex)+'_td_0">'+
					              '<span class="" id="'+examType+semesterId+'_'+(trIndex)+'_span_0">'+(trIndex+1)+'.</span></td>';
					   */
					   tableHtml+='<td id="'+examType+semesterId+'_'+(trIndex)+'_td_0">'+
			              '<span class="" id="'+examType+semesterId+'_'+(trIndex)+'_span_0">'+srNoCtr+'.</span></td>';
			   
					   for(var index=0;index<tableHeaderOnView.length-1;index++)
					   {
						   var tdValues="";
						   var trId=tableHeaderOnView[index].id;
					       var subjectData=subjectWiseData[examType][semester][trIndex][trId];
					       
					       if(subjectData!=null && subjectData!=undefined && subjectData!=""){
					    	   tdValues=subjectData;
					       }
					       else{
					    	   tdValues="NA";
					       }
					       tableHtml+='<td id="'+examType+semesterId+'_'+(trIndex)+'_td_'+(index+1)+'">'+
						   		      '<div id="'+examType+semesterId+trId+'_'+(trIndex)+'_div_'+(index+1)+'">'+
						   		      '<span id="'+examType+semesterId+trId+'_'+(trIndex)+'_span_'+(index+1)+'" name="'+examType+semesterId+'_'+(trIndex)+'_span_'+(index+1)+'" class="" style="">'+tdValues+'</span></div></td>';
					   }
					   tableHtml+='</tr>';
			       }
				  
			   }
			   tableHtml+='</tbody></table></div>';
			  return tableHtml;
}
var objJSONOuter = new Object();
function generateJSONOnSubmit()
{
	var objJSONArray = new Array();
	var ARRAY_OF_EXAMTYPES=candidateDataJSON[0].applicable_enrollment_type;
	for(var index=0;index<ARRAY_OF_EXAMTYPES.length;index++)
	{	
		var objArray=new Array();
		var examTypeId=ARRAY_OF_EXAMTYPES[index].id;
		var examTypeName=ARRAY_OF_EXAMTYPES[index].name;
		
		//var examTypeName=examNameWithoutSapce.replace(/\s/g, '');
		//var stringAriaExpandedExam=$("#ariaexpanded"+examTypeName+classIndex).attr("aria-expanded");
			var idINDEXCount=document.querySelectorAll('.ariaexpanded'+checkSpaceInSemName(examTypeName));
			for(var idIndex=0;idIndex<idINDEXCount.length;idIndex++)
			{
				var idValueName=$(idINDEXCount[idIndex]).attr("id");
				if(idValueName!="" && idValueName!=undefined && idValueName!=null){
				if(idValueName.indexOf("SEM")>=0)
				{
					var stringAriaExpandedExam=$("#"+idValueName).attr("aria-expanded");
					if(stringAriaExpandedExam=="true")
					{
							var semesterNameList=document.getElementById(idValueName).querySelectorAll(".customSemsterAnchorClass");
							for(var semIndex=0;semIndex<semesterNameList.length;semIndex++)
							{
								var semJsonObject = new Object();
								var semesterID=$(semesterNameList[semIndex]).attr("id");
								if(semesterID!="" && semesterID!=undefined && semesterID!=null)
								{
									if(semesterID.indexOf("anchor")>=0 && semesterID.indexOf("SEM")>=0)
									{
										semJsonObject.Id=semesterID.split("SEM")[1];
										semJsonObject.Name=$(semesterNameList[semIndex]).text();
									}
								}
								else
								{
									semJsonObject.Id="NA";
									semJsonObject.Name="NA";
								}
								objArray.push(semJsonObject);
							}
					}
					else
					{
						var semJsonObjectVal = new Object();
						semJsonObjectVal.Id="NA";
						semJsonObjectVal.Name="NA";
						objArray.push(semJsonObjectVal);
					}
				}
				}
		      }
		
		var objJSON = new Object();
		objJSON.EnrollmentId=examTypeId;
		objJSON.EnrollmentName=examTypeName;
		objJSON["Semester"]=objArray;
		objJSONArray.push(objJSON);
		//console.log(objJSON);
	}
	objJSONOuter["Data"]=objJSONArray;
	console.log(objJSONOuter);
	var objectTotalOtherData=Object.keys(objJSONOuter.Data);
	var enrollString="";
	var enrollIdString="";
	$("#enrollmentTypeName").val("");
	$("#enrollmentTypeId").val("");
	$("#allEnrollmentHiddenIds").empty();
	for(var enrollIndex=0;enrollIndex<objectTotalOtherData.length;enrollIndex++)
	{   
		var semString="";
		var semIdString="";
		var enrollNAME= objJSONOuter.Data[objectTotalOtherData[enrollIndex]].EnrollmentName;
		var enrollID= objJSONOuter.Data[objectTotalOtherData[enrollIndex]].EnrollmentId;
		var semList=objJSONOuter.Data[objectTotalOtherData[enrollIndex]]["Semester"];
		if(semList!="" && semList!=null && semList!=undefined)
		{
			for(var semLenIndex=0;semLenIndex<semList.length;semLenIndex++)
			{
				var collapseFlag=false;
				var semNAME=semList[semLenIndex].Name;
				var semId=semList[semLenIndex].Id;
				var semExamTypeId=enrollTypeString+enrollID+semTypeString+semId;
			    var formStatusValue=$("#"+semExamTypeId+"FormStatus_span").text();
				if(formStatusValue=="Pending")
				{
					var stringAriaExpanded=$("#"+semExamTypeId+"_panelDiv").attr("aria-expanded");
					if(stringAriaExpanded=="true")
						collapseFlag=true;
					else
						collapseFlag=false;
					if(collapseFlag)
					{
						semString+=semNAME+",";
						semIdString+=semId+",";
						if($("#"+semExamTypeId+"_tbl").length>0)
						{
							var subjectId="";
							var subjectCODE="";
							var examTypeNameStr="";
							var subjectNAME="";
							var rowCount =$("#"+semExamTypeId+"_tbl tr").length-1;
							for(var rowCountIndex=0;rowCountIndex<rowCount;rowCountIndex++)
							{
								 if($("#enrollStatus"+rowCountIndex+semExamTypeId).length>0)
								 {
									 subjectNAME=$("#subjectName"+rowCountIndex+semExamTypeId).val();
									 if($("#enrollStatus"+rowCountIndex+semExamTypeId).is(":checked"))
									 {
										 subjectId+=$("#subjectId"+rowCountIndex+semExamTypeId).val()+",";
										 subjectCODE+=$("#subjectCode"+rowCountIndex+semExamTypeId).text()+",";
										 if($("[name='enrollType"+rowCountIndex+semExamTypeId+"_chkBox']").length>0)
										 {
											var examTypeNameArry=[];
											var examTypeFlagArry=[];
											var examValues="";
										    if($("[name='enrollType"+rowCountIndex+semExamTypeId+"_chkBox']").is(":checked"))
											{
										       examValues=$("#examTypeValue"+rowCountIndex+semExamTypeId).val();
											}
										    else
										    {
										    	 var storeValue="examTypeValue"+rowCountIndex+semExamTypeId;
												 var nameValue="enrollType"+rowCountIndex+semExamTypeId+"_chkBox";
												 fnStoreChkBoxValue(storeValue,nameValue);
												 examValues=$("#examTypeValue"+rowCountIndex+semExamTypeId).val();
										    }
											if(examValues!=null && examValues!=undefined && examValues!="")
											{
												 var splitExamValues=examValues.split("@@");
												 for(var i=0;i<splitExamValues.length;i++)
												 {
													var splitExamValuesWithFlag=splitExamValues[i].split("||");
													examTypeNameArry.push(splitExamValuesWithFlag[0]);
													examTypeFlagArry.push(splitExamValuesWithFlag[1]);
												 }
												console.log(examTypeNameArry);
												console.log(examTypeFlagArry);
												for(var k=0;k<examTypeFlagArry.length;k++)
												{
													if(examTypeFlagArry[k]=="Y" && examTypeNameArry[k]=="NA")
													{
														var message4="Please select Mandatory Exam Type for selected subject "+subjectNAME+" in "+enrollNAME+" Enrollment.";
														openInvalidDataModal("Error", message4);
														return false;
													}
												}
												if($("[name='enrollType"+rowCountIndex+semExamTypeId+"_chkBox']").is(":checked"))
												{
													var examTypeNameString="";
													for(var j=0;j<examTypeNameArry.length;j++)
													{
															 examTypeNameString+=examTypeNameArry[j]+"@@";
													}
													var finalExamTypeNameString=examTypeNameString.substring(0, examTypeNameString.length-2);
													examTypeNameStr+=finalExamTypeNameString+",";
													console.log(examTypeNameStr);
												}
												else
												{
													examTypeNameStr+="NA"+",";
												}
											  }
										 }
									 }
								 }
								 else
								 {
									 subjectId+=$("#subjectId"+rowCountIndex+semExamTypeId).val()+",";
									 subjectCODE+=$("#subjectCode"+rowCountIndex+semExamTypeId).text()+",";
								 }
							}
							if(subjectId!="" && subjectId!=null && subjectId!=undefined)
							{
								if(examTypeNameStr!="" && examTypeNameStr!=null && examTypeNameStr!=undefined)
								 {
									var valueToStoreExamType=examTypeNameStr.substring(0, examTypeNameStr.length-1);
									var enrollExamType=checkSpaceInSemName(enrollNAME)+checkSpaceInSemName(semNAME)+"ExamType";
									if($("#"+enrollExamType).length<=0)
									{
									   createHiddenFieldInHtml(enrollExamType,valueToStoreExamType);
									}
									$("#"+enrollExamType).val(valueToStoreExamType);
								 }
								var valueToStoreSubjectId=subjectId.substring(0, subjectId.length-1);
								var enrollSemSubId=checkSpaceInSemName(enrollNAME)+checkSpaceInSemName(semNAME)+"Subject";
								if($("#"+enrollSemSubId).length<=0)
								{
									createHiddenFieldInHtml(enrollSemSubId,valueToStoreSubjectId);
								}
								$("#"+enrollSemSubId).val(valueToStoreSubjectId);
								
								var valueToStoreSubjectCode=subjectCODE.substring(0, subjectCODE.length-1);
								var enrollSemSubCode=checkSpaceInSemName(enrollNAME)+checkSpaceInSemName(semNAME)+"SubjectCode";
								if($("#"+enrollSemSubCode).length<=0)
								{
									createHiddenFieldInHtml(enrollSemSubCode,valueToStoreSubjectCode);
								}
								$("#"+enrollSemSubCode).val(valueToStoreSubjectCode);
								var compareFlag=false;
								var enrollTypeValue=$("#enrollmentTypeName").val();
								if(enrollTypeValue!=null&& enrollTypeValue!=undefined && enrollTypeValue!="")
								{
									var splitEnrollTypeValue=enrollTypeValue.split(",");
									for(var lindex=0;lindex<splitEnrollTypeValue.length;lindex++)
									{
										if(splitEnrollTypeValue[lindex]==enrollNAME)
										{
											compareFlag=true;
											break;
										}
									}
								}
								if(!compareFlag)
								{
									enrollString+=enrollNAME+",";
									var valueToStoreEnroll=enrollString.substring(0, enrollString.length-1);
									$("#enrollmentTypeName").val(valueToStoreEnroll);
									enrollIdString+=enrollID+",";
									var valueToStoreEnrollId=enrollIdString.substring(0, enrollIdString.length-1);
									$("#enrollmentTypeId").val(valueToStoreEnrollId);
								}
								var valueToStoreSem=semString.substring(0, semString.length-1);
								var valueToStoreSemId=semIdString.substring(0, semIdString.length-1);
								var enrollSemId=checkSpaceInSemName(enrollNAME)+"SemId";
								var enrollSemName=checkSpaceInSemName(enrollNAME)+"SemName";
								if($("#"+enrollSemName).length<=0 && $("#"+enrollSemId).length<=0)
								{
									createHiddenFieldInHtml(enrollSemId,valueToStoreSemId);
									createHiddenFieldInHtml(enrollSemName,valueToStoreSem);
								}
								$("#"+enrollSemName).val(valueToStoreSem);
								$("#"+enrollSemId).val(valueToStoreSemId);
							}
							else
							{
								 var message1="Please select subject for enrollment in "+enrollNAME;
								 openInvalidDataModal("Error", message1);
								 return false;
							}
						}
					}
				}
			}
	 }
	}
	return true;
}
var IMAGE_UPLOAD_ID=[{"id":"uploadPhotoEnrollment","name":"Photo Upload"},{"id":"uploadSignEnrollment","name":"Image Upload"}];
function validationOnSubmit()
{
 showHiddenFieldsOnLink("studentDetails");
  var editColumns=studentDetails.Data.UIData.studentDetails;
	for(var index=0;index<editColumns.length;index++)
	{
		if(editColumns[index].isEditAllowed=="Y")
		{
				var fieldValue=$("#"+editColumns[index].txtFieldHtmlName).val();
				var spanFieldValue=$("#"+editColumns[index].txtMasterValue+"_span").text();
				//var jsonValue=candidateDataJSON[0][editColumns[index].txtMasterValue];
				if(fieldValue=="" || fieldValue==undefined || fieldValue==null )
				{
					var message2="Please change value for "+editColumns[index].txtMasterName+" field in Student Details Section.";
					openInvalidDataModal("Error", message2);
					return false;
				}
			
		}
	}
	/*if(IS_IMAGE_UPLOAD_GLOABAL_JSON=="Y")
	{
		for(var imgIndex=0;imgIndex<IMAGE_UPLOAD_ID.length;imgIndex++)
		{
			var fileNameArray = getValue("txtFileName").split("||");
			var filePathArray = getValue("txtFilePathEdit").split("||");
			var indexOfField = fileNameArray.indexOf(IMAGE_UPLOAD_ID[imgIndex].id);
			if(indexOfField <= -1 && filePathArray.length > indexOfField)
			{
              
				var message2="Please uplaod file for "+IMAGE_UPLOAD_ID[imgIndex].name+".";
				openInvalidDataModal("Error", message2);
				return false;
			}
		}
	}*/
	if(!generateJSONOnSubmit())
	{
		return false;
	}
	var enrollTypeVALUE=$("#enrollmentTypeName").val();
	if(enrollTypeVALUE=="" || enrollTypeVALUE==null || enrollTypeVALUE==undefined)
	{
		var message2="Please select any enrollment Type.";
		openInvalidDataModal("Error", message2);
		return false;
	}
	var message13="Please contact administrator";
	if(feeDetailsJSON.isValid=="N")
		{
		openInvalidDataModal("Error", message13);
		}
	else
	{
		doTaskBeforeSubmit();
		confirmBeforSubmit();
	}
	
}
function finalSubmit(){
	document.onlineAppForm.encoding = "multipart/form-data";
	document.getElementById("subAction").value = "saveFormData";
	document.onlineAppForm.action = "/EForms/onlineApplicationAction.do";
	document.onlineAppForm.submit();
}
function confirmBeforSubmit()
{
	$("#confirmationPopup").modal("show");
}
function createHiddenFieldInHtmlForLabels(hiddenId,value)
{
	var hiddenHtml="";
		hiddenHtml+='<input id="'+hiddenId+'" name="'+hiddenId+'" value="'+value+'" type="hidden"/>';
		console.log(hiddenHtml);
		$("#allFixedHardcodedIdsDiv").append(hiddenHtml);
}
function createHiddenFieldInHtml(hiddenId,value)
{
	var hiddenHtml="";
		hiddenHtml+='<input id="'+hiddenId+'" name="'+hiddenId+'" value="'+value+'" type="hidden"/>';
		console.log(hiddenHtml);
		$("#allEnrollmentHiddenIds").append(hiddenHtml);
}
function createHiddenFieldInHtmlForFEE(hiddenId,value)
{
	var hiddenHtml="";
		hiddenHtml+='<input id="'+hiddenId+'" name="'+hiddenId+'" value="'+value+'" type="hidden"/>';
		console.log(hiddenHtml);
		$("#allEnrollmentFEEHiddenIds").append(hiddenHtml);
}
function checkSpaceInSemName(semName)
{
    var strNAME=semName;
    if(strNAME != '' && strNAME != null)
	{
    	if(strNAME.indexOf(' ')>0)
    	{
    		strNAME = strNAME.replace(/\s/g, '');
    		
    	}
	}
    return strNAME;
}
function fnStoreChkBoxValue(storeId,name)
{
	var checkboxes = document.getElementsByName(name);
	var vals = "";
	for (var i=0;i<checkboxes.length;i++) 
	{
	    if (checkboxes[i].checked) 
	    {
	        vals+= checkboxes[i].value+"@@";
	    }
	    else
	    {
	    	var checkBoxValue=checkboxes[i].value.split("||");
	    	vals+= "NA"+"||"+checkBoxValue[1]+"@@";
	    }
	}
   var storeString=vals.substring(0, vals.length-2);
   $("#"+storeId).val(storeString);
}

function setCMSPhotoAndSignPath()
{
	var domain ="https://"+window.location.hostname;
	var stuId=candidateDataJSON[0].StudentId;
	//var orgId=$("#orgId").val();
	var photoPathCMS=domain+"/cms/Blockfromoutsidegetimage?studentid="+stuId+"&orgid=1404";
	var signPathCMS=domain+"/cms/BlockFromOutsideSignature?studentid="+stuId+"&orgid=1404";
	
	if(globalDataJSON!=null && globalDataJSON!="" && globalDataJSON!=undefined)
		{
		IS_IMAGE_UPLOAD_GLOABAL_JSON=globalDataJSON.photo_upload_allowed;
		if(Photo_Flag=="Y")
			{
			if(photoPathCMS!=null && photoPathCMS!="" && photoPathCMS!=undefined)
				{
					$("#Sign_id").attr("src",signPathCMS); 
				    $("#cmsPhotoPath").val(photoPathCMS); 
				}
				if(signPathCMS!=null && signPathCMS!="" && signPathCMS!=undefined)
				{
					$("#Photo_id").attr("src",photoPathCMS);
					$("#cmsSignaturePath").val(signPathCMS);
					
				}
				
			}
			}
	
	/*$("#cms_photoPath").val(photoPathCMS); 
	$("#cms_signaturePath").val(signPathCMS);
	$("#photoAnchor").attr("onclick","");
	$("#signatureAnchor").attr("onclick","")*/;
	
	/*$("#Photo_id").attr("src",photoPathCMS);
	$("#Sign_id").attr("src",signPathCMS); */
	
	/*$("#photoSignRendered_tr").show();
	$("#UploadLinkSection").hide();
	$("#uploadHeading_span").hide();*/
}

function validateEmailOnBlur(id) {
	var email = $("#" + id).val().trim();
	email = email.toLowerCase();
	var pattern = /\S+@\S+\.com/;
	var pattern1 = /\S+@\S+\.in/;
	if (email != "") {
		if (!pattern.test(email) && !pattern1.test(email)) {
			var message = "Please enter valid email address.Eg:- abc@zyz.com or abc@xyz.co.in";
			openInvalidDataModal("Error", message);
			$('#' + id).focus();
			$("#" + id).val("");
			return false;

		} else if (email.split('.').pop() != "com"	&& email.split('.').pop() != "in") {
			var message = "Please enter valid email address.Eg:- abc@zyz.com or abc@xyz.co.in";
			openInvalidDataModal("Error", message);
			$('#' + id).focus();
			$("#" + id).val("");
			return false;
		}
	}
	return true;
}

function validateConfirmFieldsOnBlur(id1,id2,type){
	var flag = false;
	if(type=="Mobile No"){
		if(validateMobileNoOnBlur(id1) && validateMobileNoOnBlur(id2))
			flag = true;
	}
	else if(type=="Email Id"){
		if(validateEmailOnBlur(id1) && validateEmailOnBlur(id2))
			flag = true;
	}
	if(flag){
		var type1 = $('#'+id1).val();
		var type2 = $('#'+id2).val();
		var message = "";
		 if(type1!="" && type2!="" && type1!=type2)
		 {
			
			$("#" + id2).val("");
			message = type+" and Confirm "+type+" should be same.";
		 }
		if(message!= "")
			openInvalidDataModal("Error", message);
	}
	else
		return flag;
}
function validateMobileNoOnBlur(id) 
{
	if ($('#' + id).val() != "") 
	{
		if (document.getElementById(id).value.length < 10) 
		{
			var message = "Please enter the 10 digit Mobile No.";
			openInvalidDataModal("Error", message);
            $('#' + id).focus();
			document.getElementById(id).value = "";
			return false;
		}
		if ((document.getElementById(id).value.charAt(0) != '7')
				&& (document.getElementById(id).value.charAt(0) != '8')
				&& (document.getElementById(id).value.charAt(0) != '9') && (document.getElementById(id).value.charAt(0) != '6'))
		{
			var message = "Please enter correct Mobile Number. It can start with only 6, 7, 8 or 9.";
		    openInvalidDataModal("Error", message);
			$('#' + id).focus();
			document.getElementById(id).value = "";
			return false;
		}
	}
	return true;
}

function globalDataKey(awardId,semId,examType,keyRequired)
{
var notMatch="N";
var awardFlag=false;
var semIdflag=false;
var examTypeFlag=false;
if(globalDataJSON!=null && globalDataJSON!="" && globalDataJSON!=undefined)
	{
	var awardKeys=Object.keys(globalDataJSON);
	var awardKeysLength=awardKeys.length;
	
	for(var i=0;i<awardKeysLength;i++)
		{
		if(awardKeys[i]==awardId)
			{
			awardFlag=true;
			var semIdKeys=Object.keys(globalDataJSON[awardKeys[i]]);
			var semIdKeysLength=semIdKeys.length;
			for(var j=0;j<semIdKeysLength;j++)
				{
				if(semIdKeys[j]==semId)
					{
					semIdflag=true;
					var examTypeKeys=Object.keys(globalDataJSON[awardKeys[i]][semIdKeys[j]]);
					var examTypeKeysLength=examTypeKeys.length;
					for(var k=0;k<examTypeKeysLength;k++)
					{
						if(examTypeKeys[k]==examType)
							{
							examTypeFlag=true;
							var reqKeys=Object.keys(globalDataJSON[awardKeys[i]][semIdKeys[j]][examTypeKeys[k]]);
							var reqKeysLength=examTypeKeys.length;
							for(var l=0;l<reqKeysLength;l++)
								{
							    if(reqKeys[l]==keyRequired)
							    	{
							    	return (globalDataJSON[awardKeys[i]][semIdKeys[j]][examTypeKeys[k]][reqKeys[l]]);
							    	break;
							    	}
								}
							
							}
					}
					
					}
				}
				
				}
			
			}
		}
	if(awardFlag==false || semIdflag==false || examTypeFlag==false)
	{
		return notMatch;	
	}}
var feeWiseData="";
function  generateExamSemInFeeSecOnView()
{
	var viewHtmlExamType="";
	if(viewDetailsJSON!="" && viewDetailsJSON!=undefined && viewDetailsJSON!=null)
	{
		feeWiseData=viewDetailsJSON.ViewDetails.feeData;
		var keysInSubNode=Object.keys(feeWiseData);
		for(var index=0;index<keysInSubNode.length;index++)
		{
			var examTypeName=keysInSubNode[index];
			var examType=examTypeName.replace(/\s/g, '');
			var keysInExamType=Object.keys(feeWiseData[examTypeName]);
			viewHtmlExamType+='<div id="'+examType+'Fee_MainDiv">'+
				              '<div class="tab-heading tab-heading-gen" id="'+examType+'Fee_headingDiv">'+
			                  '<span class="" id="'+examType+'Fee_headingSpan">'+examTypeName+' </span>'+
			                  '<span class="multiLingualSpanClass" id="multilingualSpan_'+examType+'_span"></span>'+
		                      '</div>';
			for(var semIndex=0;semIndex<keysInExamType.length;semIndex++)
			{
				var semester=keysInExamType[semIndex];
				var semesterId=semester.replace(/\s/g, '');
				var semesterName=feeWiseData[examTypeName][semester][0].txtApplyingSemName;
				
				//var semesterName="SEMESTER-"+semester;
				viewHtmlExamType+='<div id="'+examType+semesterId+'Fee_MainDiv" style="margin: 14px;">'+
				                  '<div id="'+examType+semesterId+'Fee_headingDiv" class="customSemClassOnView">'+semesterName+'</div>';
				viewHtmlExamType+='</div>';
				viewHtmlExamType+= '<div class="clear"></div>';

			}
			viewHtmlExamType+='</div>';	
		}
		$("#feeDetails").append(viewHtmlExamType);
	    generateFeeTblOnSemester();
	}
	else
	{
		setTimeout(" generateExamSemInFeeSecOnView();", 500);

	}
}
function generateFeeTblOnSemester()
{
	if(viewDetailsJSON!="" && viewDetailsJSON!=undefined && viewDetailsJSON!=null)
	{
		feeWiseData=viewDetailsJSON.ViewDetails.feeData;
		var keysInSubNode=Object.keys(feeWiseData);
		for(var index=0;index<keysInSubNode.length;index++)
		{
			var examType=keysInSubNode[index];
			var keysInExamType=Object.keys(feeWiseData[examType]);
			for(var semIndex=0;semIndex<keysInExamType.length;semIndex++)
			{
				var totalFeessubTypeHeadingHtml="";
				var Sem=keysInExamType[semIndex];
				var len=feeWiseData[examType][Sem].length;
			    for(var tIndex=0;tIndex<len;tIndex++)
				{
			    	    var subTypeInSem="";
			    	    var subTypeHeadingHtml="";
						var subTypeFeeHeadHtml="";
						var subTypeHeadingId="";
						subTypeInSem=feeWiseData[examType][Sem][tIndex].subject_category_name;
						var feeHeadNameInSem=feeWiseData[examType][Sem][tIndex].txtFeeHeadName;
						var feeHeadValueInSem=feeWiseData[examType][Sem][tIndex].txtFeeHeadValue;
						if(feeHeadNameInSem=="Late Fees" && (""==subTypeInSem  || null==subTypeInSem))
						{
							//subTypeInSem=feeWiseData[examType][Sem][tIndex-1].subject_category_name;
							subTypeInSem="Late Fees";
						}
						subTypeHeadingId=checkSpaceInSemName(examType)+Sem+subTypeInSem;
						if($("#"+subTypeHeadingId+"FeeDetails_mainDiv").length<=0)
						{
							if(feeHeadNameInSem=="Late Fees")
							{
								subTypeHeadingHtml+='<br><div class="clear"></div>';
								subTypeHeadingHtml+='<div id="feeHead'+subTypeInSem+tIndex+'_DivContainer" class="col-lg-3 col-sm-12 col-md-3 col-xs-12">'+
								'<label class="classForAllFieldLabels " id="feeHead'+subTypeInSem+tIndex+'_labelDiv">'+feeHeadNameInSem+
								'<span class="multiLingualSpanClass" id="multilingualSpan_feeHead'+subTypeInSem+tIndex+'">'+
								'</span></label><span class="labeltxt valueLabelSpanClass" id="feeHead'+subTypeInSem+tIndex+'_div">'+feeHeadValueInSem+
								'</span></div>'+
								'</div>';      
							}
							else if(feeHeadNameInSem=="Total Amount")
							{
								totalFeessubTypeHeadingHtml="";
								totalFeessubTypeHeadingHtml+='<br><div class="clear"></div>';
								totalFeessubTypeHeadingHtml+='<div id="feeHead'+subTypeHeadingId+'_DivContainer" class="col-lg-3 col-sm-12 col-md-3 col-xs-12">'+
								'<label class="classForAllFieldLabels " id="feeHead'+subTypeInSem+tIndex+'_labelDiv">'+feeHeadNameInSem+
								'<span class="multiLingualSpanClass" id="multilingualSpan_feeHead'+subTypeInSem+tIndex+'">'+
								'</span></label><span class="labeltxt valueLabelSpanClass" id="feeHead'+subTypeInSem+tIndex+'_div">'+feeHeadValueInSem+
								'</span></div>'+
								'</div>';      
							}
							else
							{
								subTypeHeadingHtml+='<div class="clear"></div>';
								subTypeHeadingHtml+='<div id="'+subTypeHeadingId+'FeeDetails_mainDiv" >'+
								                    '<div class="customOneFieldDivClass" id="'+subTypeHeadingId+'FeeDetails_divContainer" style="margin: 0px;text-align: left;line-height: 30px;background-color: #d1eefa;font-weight: bold;">'+
								                    '<label class="classForAllFieldLabels " id="'+subTypeHeadingId+'FeeDetails_labelDiv" style="font-weight: bold;padding-left: 12px;">'+subTypeInSem+
								                    '<span class="multiLingualSpanClass" id="multilingualSpan_'+subTypeHeadingId+'"></span></label>'+
								                    '</div>';
								subTypeHeadingHtml+='<div id="feeHead'+subTypeInSem+tIndex+'_DivContainer" class="col-lg-3 col-sm-12 col-md-3 col-xs-12">'+
													'<label class="classForAllFieldLabels " id="feeHead'+subTypeInSem+tIndex+'_labelDiv">'+feeHeadNameInSem+
													'<span class="multiLingualSpanClass" id="multilingualSpan_feeHead'+subTypeInSem+tIndex+'">'+
													'</span></label><span class="labeltxt valueLabelSpanClass" id="feeHead'+subTypeInSem+tIndex+'_div">'+feeHeadValueInSem+
													'</span></div>'+
													'</div>';    
							}
							 if(subTypeHeadingHtml!="" )   
					    	   {
					    	   $("#"+checkSpaceInSemName(examType)+Sem+"Fee_MainDiv").append(subTypeHeadingHtml+totalFeessubTypeHeadingHtml);
					    	   }
					       if(subTypeHeadingHtml=="" && tIndex==len-1){
					    	   $("#"+checkSpaceInSemName(examType)+Sem+"Fee_MainDiv").append(totalFeessubTypeHeadingHtml);
					       }         
							//$("#"+checkSpaceInSemName(examType)+Sem+"Fee_MainDiv").append(subTypeHeadingHtml);
							console.log(subTypeHeadingHtml);
						}	
						else
						{
						    subTypeFeeHeadHtml= '<div id="feeHead'+subTypeInSem+tIndex+'_DivContainer" class="col-lg-3 col-sm-12 col-md-3 col-xs-12">'+
									            '<label class="classForAllFieldLabels " id="feeHead'+subTypeInSem+tIndex+'_labelDiv">'+feeHeadNameInSem+
									            '<span class="multiLingualSpanClass" id="multilingualSpan_feeHead'+subTypeInSem+tIndex+'">'+
									            '</span></label><span class="labeltxt valueLabelSpanClass" id="feeHead'+subTypeInSem+tIndex+'_div">'+feeHeadValueInSem+
									            '</span></div>';       
			                $("#"+subTypeHeadingId+"FeeDetails_mainDiv").append(subTypeFeeHeadHtml);
			                console.log(subTypeFeeHeadHtml);
						}
						var regularExamType=examType.toUpperCase();
						if(regularExamType=="REGULAR ENROLLMENT")
						{
							if(subTypeInSem!="" && subTypeInSem!=undefined && subTypeInSem!=null)
							{
								$("#"+subTypeHeadingId+"FeeDetails_divContainer").show();
							}
							else
							{
								$("#"+subTypeHeadingId+"FeeDetails_divContainer").hide();
							}
						}
						if(regularExamType=="REGULAR")
						{
							if(subTypeInSem!="" && subTypeInSem!=undefined && subTypeInSem!=null)
							{
								$("#"+subTypeHeadingId+"FeeDetails_divContainer").show();
							}
							else
							{
								$("#"+subTypeHeadingId+"FeeDetails_divContainer").hide();
							}
						}
				}
			}
	   }
	}
} 
function displayImagesOnView()
{
	var frameWorkPhotoVal=$("#uploadPhotoEnrollment_div").html();
	var cmsPhotoVal=$("#cmsPhotoPath_div").html();
	cmsPhotoVal=cmsPhotoVal.replace("amp;","");
	var frameWorkSignVal=$("#uploadSignEnrollment_div").html();
	var cmsSignVal=$("#cmsSignaturePath_div").html();
	cmsSignVal=cmsSignVal.replace("amp;","");
	if(frameWorkPhotoVal!="" && frameWorkPhotoVal!=null && frameWorkPhotoVal!=undefined)
	{
		$("#Photo_id").attr("src",frameWorkPhotoVal); 
	}
	else
	{
		if(cmsPhotoVal!="" && cmsPhotoVal!=null && cmsPhotoVal!=undefined)
		{
			$("#Photo_id").attr("src",cmsPhotoVal); 
		}
		else
		{
			$("#uploadedImageDivPhoto").hide();
		}
	}
	if(frameWorkSignVal!="" && frameWorkSignVal!=null && frameWorkSignVal!=undefined)
	{
		$("#Sign_id").attr("src",frameWorkSignVal); 
	}
	else
	{
		if(cmsSignVal!="" && cmsSignVal!=null && cmsSignVal!=undefined)
		{
			$("#Sign_id").attr("src",cmsSignVal); 
		}
		else
		{
			$("#uploadedSignDivSignature").hide();
		}
	}
}
//hall ticket
function generateHallTicketButton(){
	var enrollmentWiseData=viewDetailsJSON.ViewDetails.enrollmentData;
	var hallTicketBtn="";
	var student_appSeq_no="";
	if(enrollmentWiseData!="" && enrollmentWiseData!=undefined && enrollmentWiseData!=null)
	{
		var keysInEnrollmentData=Object.keys(enrollmentWiseData);
		if(keysInEnrollmentData.length>0)
		{
			
			for(enrollmentKey in enrollmentWiseData){
				var examTypeJson=enrollmentWiseData[enrollmentKey];
				console.log(examTypeJson);
				for(semIdKey in examTypeJson){
					var semesterJson=examTypeJson[semIdKey]["0"];
					if("Success"==semesterJson["txtcandidateScrutinyStatus"]){
						
				
					/*for(var key in semesterJson ){
						if("app_seq_no" == key){
							console.log(key);
							//console.log(semesterJson[0][key]);
							student_appSeq_no=semesterJson[key];
							break;
						}
						
					}*/
					//geneerate hall ticket button
					var valhall=enrollmentKey+" SEMESTER "+semIdKey+" - Hall Ticket";
					console.log(valhall);
					//hallTicketBtn+="<input type='button' id='hallTicketBtn"+semIdKey+"' name='hallTicketBtn"+semIdKey+"' class='btn-primary' onclick='"+generateHallTicket(student_appSeq_no);+"' autocomplete='off' style='padding-left: 12px; padding-right: 12px; padding-top: 5px; padding-bottom: 5px;border-radius: 4px;position:relative;font-size:15px;'  value="+valhall+" >";
					hallTicketBtn+="<input type='button' id='hallTicketBtn"+semIdKey+"' name='hallTicketBtn"+semIdKey+"' class='btn-primary' onclick='generateHallTicketEforms(\""+enrollmentKey+"\" , \""+semIdKey+"\");' autocomplete='off' style='padding-left: 12px; padding-right: 12px; padding-top: 5px; padding-bottom: 5px;border-radius: 4px;position:relative;font-size:15px;'  value='"+valhall+"'>";
					}
				}
				$("#hallTicketDiv").html(hallTicketBtn);
			}
		}
	}	
	
}
//Hall ticket code
function generateHallTicketCMS(student_app_seq_no)
{
	startLoader();
	if(null==window.opener){
		var sessChk=window.parent.$("#sessChk").val();
		var app_seq_no=window.parent.$("#app_seq_no").val();
		var parentFormId=window.parent.$("#formId").val();
	}else{
		var sessChk=window.opener.$("#sessChk").val();
		var app_seq_no=window.opener.$("#app_seq_no").val();
		var parentFormId=window.opener.$("#formId").val();
	}
	//var student_app_seq_no=$("#app_seq_no_div").html();
	$.ajax({
	type:"POST",
	url:"/EForms/cdmsservlet",
	data:{

		orgId : $("#orgId").val(),
		actionId:"getDataForEnrollment",
		callMethod:"CMS_fetchDATA",
		CMS_callMethod:"generateHallTicket",
		app_seq_no:app_seq_no,//"AK1198@csvtu.ac.in",
		loginFormId:parentFormId,//"58592",
		student_app_seq_no:student_app_seq_no,
		argnum : 0,
		sessChk : sessChk	
		//userId:"2205567"
	},
	dataType: "text",
	success	:function(docUrl)
	{
		
		if(!jQuery.isEmptyObject(docUrl)){
			
			window.open(docUrl);
			//document.getElementById("downloadBtn").onclick = function(){window.open(docUrl);};
			stopLoader();
		}
		else{
			openInvalidDataModal("Error","Server is not responding. Please try again or contact with your administrator.");
			stopLoader();
		}
		

	},
	error : function(docUrl)
	{
		openInvalidDataModal("Error", networkIssueMsg);
		//alert("Some error occured. Please after some time or contact adminitrator.");

	}
	});
}
function generateHallTicketEforms(enrollmentKey, semesterKey)
{
	var subjectWiseData=viewDetailsJSON.ViewDetails.subjectWiseData;
	var subject_id="";
	var batch_session_id="";
	if(subjectWiseData!=null && subjectWiseData!="" && subjectWiseData!=undefined){
		var subjectJsonRequest=subjectWiseData[enrollmentKey][semesterKey];
		for(var subjectCtr=0;subjectCtr<subjectJsonRequest.length; subjectCtr++){
			subject_id=subject_id+subjectJsonRequest[subjectCtr].subject_id+",";
			batch_session_id=subjectJsonRequest[subjectCtr].batch_session_id;
			}
		subject_id=subject_id.substring(0, subject_id.length-1);
		
	}
	
	startLoader();
	if(null==window.opener){
		var sessChk=window.parent.$("#sessChk").val();
		var app_seq_no=window.parent.$("#app_seq_no").val();
		var parentFormId=window.parent.$("#formId").val();
	}else{
		var sessChk=window.opener.$("#sessChk").val();
		var app_seq_no=window.opener.$("#app_seq_no").val();
		var parentFormId=window.opener.$("#formId").val();
	}
	//var student_app_seq_no=$("#app_seq_no_div").html();
	$.ajax({
	type:"POST",
	url:"/EForms/cdmsservlet",
	data:{

		orgId : $("#orgId").val(),
		actionId:"getDataForEnrollment",
		callMethod:"CMS_fetchDATA",
		CMS_callMethod:"getHallTicketDataFromIdc",
		app_seq_no:app_seq_no,//"AK1198@csvtu.ac.in",
		loginFormId:parentFormId,//"58592",
		student_id:$("#student_id_div").html(),
		subject_id:subject_id,
		batch_session_id:batch_session_id,
		sgm_id:$("#txtSGMId_div").html(),
		argnum : 0,
		sessChk : sessChk	
		//userId:"2205567"
	},
	dataType: "json",
	success	:function(response)
	{
		
		if(!jQuery.isEmptyObject(response)){
			
			//window.open(docUrl);
			//document.getElementById("downloadBtn").onclick = function(){window.open(docUrl);};
			generateHallTicket(enrollmentKey, semesterKey, response);
			stopLoader();
		}
		else{
			openInvalidDataModal("Error","Server is not responding. Please try again or contact with your administrator.");
			stopLoader();
		}
		

	},
	error : function(response)
	{
		openInvalidDataModal("Error", networkIssueMsg);
		//alert("Some error occured. Please after some time or contact adminitrator.");

	}
	});
}
function generateHallTicket(enrollmentKey, semesterKey,cmsHallTicketData)
{
	mywindow = window.open('', 'my div', 'width='+screen.availWidth+',height='+screen.availHeight);
    mywindow.document.write("<div id='addingContent'></div>");
    mywindow.document.getElementById('addingContent').innerHTML = printFullRequestform(enrollmentKey, semesterKey,cmsHallTicketData);
  //  mywindow.document.getElementById("loader").style.display = "block";
	mywindow.document.close();
	mywindow.focus();
	//IS_PRINT_TAKEN = true;
//	setTimeout(function(){ mywindow.document.getElementById("loader").style.display = "none";}, 1500);
	
	var imageLoad= mywindow.document.getElementById('hallTicketPhotoId');
	imageLoad.onload = function () {
		var sign_id= mywindow.document.getElementById('sign_id');
		sign_id.onload = function () {
			console.info("Image loaded !");
			   setTimeout(function(){ 
					 mywindow.print();
					mywindow.close();		
				}, 500);
			};
		   
		}; 
}
function printFullRequestform(enrollmentKey, semesterKey,cmsHallTicketData){
	
	var printPage="";
	var photo=$("#Photo_id").attr("src");
	var sign=$("#Sign_id").attr("src");
	 console.info("Image loaded !" +photo);
	 var subjectWiseData=viewDetailsJSON.ViewDetails.subjectWiseData;
	//banner start
	printPage+='<table border="0" cellpadding="4" cellspacing="0" width="100%"><tbody><tr><td colspan="6" style="text-align: center;">';
	printPage+='<img src="https://www.tcsion.com/EForms/images/onlineAppForm/form5008/CSVTU_Banner_new.jpg" height="75px" id="csvtuBannerId" /></td></tr>';
	printPage+='<tr><td colspan="6" style="text-align: center;"><span style="font-size:12px;">EXAMINATION ADMISSION CARD</span></td></tr>';
	
	printPage+='<tr><td colspan="6">';
	printPage+='<table border="0" cellpadding="4" cellspacing="0" width="100%">';
	printPage+='<tbody><tr><td></td> <td></td> <td></td> <td colspan="3"></td>';
	printPage+='<td rowspan="5" width="20%"><img style="font-size: 12px;" width="80px;"  src="'+photo+'" height="80" id="hallTicketPhotoId" /></td></tr>';
	
	printPage+='<tr><td style="text-align: right; width: 22%;"><span style="font-size:11px;">Status:</span></td>';
	printPage+='<td style="width: 20%;"><span style="font-size:11px;"><span style="font-size:11px;"><strong>'+enrollmentKey+'</strong></span></span></td>';
	printPage+='<td style="text-align: right; width: 20%;"><span style="font-size:11px;">Roll No:</span></td>';
	printPage+='<td style="width: 18%;"><span style="font-size:11px;"><strong>'+$("#txtAppRollNo_div").html()+'</strong></span></td></tr>';
	
	printPage+='<tr><td style="text-align: right;valign:top;"><span style="font-size:11px;">Examination Centre:</span></td></td>';
	printPage+='<td rowspan="1" style="valign:top;" width="40%"><span style="font-size:11px;"><strong><strong>'+cmsHallTicketData[0].centre_name +'</strong></strong> </span></td>';
	printPage+='<td rowspan="1" style="text-align: right;valign:top;" width="30%"><span style="font-size:11px;">Examination Center Code:</span></td>';
	printPage+='<td rowspan="1" style="valign:top;"><span style="font-size:11px;"><strong><strong>'+cmsHallTicketData[0].centre_code +'</strong></strong></span></td></tr>';
	
	printPage+='<tr><td colspan="5"><span style="font-size:11px;">Please Admit Mr./Ms <b>'+$("#txtAppName_div").html()+'</b> S/D of Mr <strong> </strong><span style="font-size:11px;"><b><span style="font-size:11px;"><strong><span style="font-size:11px;"><span style="font-size:11px;"><b><span style="font-size:11px;"><strong>'+viewDetailsJSON.ViewDetails.enrollmentData[enrollmentKey][semesterKey][0].txtAppFathersName+'</strong></span></b></span></span></strong></span></b> </span></span></td></tr>';
	printPage+='<tr><td colspan="5"><span style="font-size:11px;">in the <b>'+ subjectWiseData[enrollmentKey][semesterKey][0].txtApplyingSemName+'</b> <span style="font-size:11px;"><b>'+$("#txtProgramName_div").html()+'</b></span> Branch Examination to be held in <strong>'+$("#txtSGMName_div").html()+'</strong>&nbsp;<span style="font-size:11px;">in the following subjects :</span><b> </b></span></td></tr>';
	
	printPage+='</tbody></table></td></tr>';
	
	printPage+='<tr><td colspan="6"><table border="0" cellpadding="4" cellspacing="0" width="100%"><tbody>';
	printPage+='<th style="width: 12%;"><strong><span style="font-size:12px;">Subject Code</span></strong></th>';
	printPage+='<th style="width: 50%;"><strong><span style="font-size:12px;">Subject Title</span></strong></th>';
/*	printPage+='<th style="width: 38%;"><strong><span style="font-size:12px;">Subject Type</span></strong></th></tr>';
*/	
	if(subjectWiseData!=null && subjectWiseData!="" && subjectWiseData!=undefined){
		var subjectJsonRequest=subjectWiseData[enrollmentKey][semesterKey];
		for(var subjectCtr=0;subjectCtr<subjectJsonRequest.length; subjectCtr++){
			if(subjectJsonRequest[subjectCtr].txtSubjectStatus=="Y")
				{
				printPage+='<tr><td style="text-align:center;" ><span style="font-size:11px;">'+subjectJsonRequest[subjectCtr].subject_code+'</span></td>';
				printPage+='<td style="text-align:center;" ><span style="font-size:11px;">'+subjectJsonRequest[subjectCtr].subject_name+'</span></td>';
/*				printPage+='<td style="text-align:center;" ><span style="font-size:11px;">'+subjectJsonRequest[subjectCtr].subject_category_name+'</span></td></tr>';
*/				}
			}
	}
	printPage+='</tbody></table></td></tr>';
	
	printPage+='<tr><td colspan="6" style="text-align: center;">&nbsp;</td></tr>';
	printPage+='<tr><td colspan="3" style="text-align:left; vertical-align: bottom;"><p style="margin-bottom: 0in;"><span style="margin-bottom:0in;"><span style="font-size:12px;">Date: '+currentDate+'</span></span></p></td>';
	printPage+='<td colspan="3" style="text-align:right; vertical-align: baseline;"><p style="text-align:right;"><img src="https://www.tcsion.com/EForms/images/onlineAppForm/form5288/COE_Digi_Sign.jpg" style="height: 50px;" /></p><p style="text-align:right;"><span style="font-size:12px;">Signature of Controller of Examination CSVTU ,Bhilai </span></p></td>';
	printPage+='</tr>';
	
	printPage+='<tr><td colspan="6" style="text-align: center;"><span style="font-size:12px;"><strong>RULES TO BE FOLLOWED BY THE EXAMINEE</strong></span></td></tr>';
	
	printPage+='<tr><td colspan="6" style="text-align: left;padding-top:2px;line-height:18px;">';
	printPage+='<span style="font-size:12px;">This permission is subject to the following conditions:- </span>';
	printPage+='<ol style="font-size:10px;">';
	printPage+='<li><span style="font-size:11px;">The university shall withdraw the permission at any time if it is found subsequently that the student was not eligible for appearing at the examination and the permission has been granted by some inadvertent omission or accidental mistake and his examination will be cancelled.</span></li>';
	printPage+='<li><span style="font-size:11px;">Examinee is forbidden to take any book, notes or loose papers in the examination hall except the admit card.</span></li>';
	printPage+='<li><span style="font-size:11px;">No communication, whatsoever, will be allowed during the examination amongst examinees and/or with the outsider.</span></li>';
	printPage+='<li><span style="font-size:11px;">Examinee is forbidden to write answer or anything else on question paper or any loose paper.</span></li>';
	printPage+='<li><span style="font-size:11px;">Any attempt on the part of examinee to use unfair means in the examination or any violation of the rules will make his/her liable for immediate expulsion from the university whose decision would be final. Cases of violence, where examinee is found using unfair means and still tries to destroy the evidence or behaves is an indiscipline manner by threat the invigilator, will be punished more severely as per rules of the University.</span></li>';
	printPage+='<li><span style="font-size:11px;">No examinee will be allowed to leave the examination hall earlier than an hour after the commencement of The examination. The examinee must take their seats at least five minutes before the time fixed for commencement of examination On entering the hall he/she must take his/her seat and observe silence. The Superintendent of the examination may at his/her discretion permit a candidate who comes late to enter the examination hall if the period of delay does not exceed half an hour.</span></li>';
	printPage+='<li><span style="font-size:11px;">No examinee, without the permission of the invigilator should leave his/her seat during the examination.</span></li>';
	printPage+='<li><span style="font-size:11px;">Each examinee should enter required details like Roll No., subject, semester, branch etc. on the cover of all answer books used by him/her. This must be done before attempting to answer the questions.</span></li>';
	printPage+='<li><span style="font-size:11px;">Examinee shall sign his/her name on the prescribed attendance verification form when required to do so.</span></li>';
	printPage+='<li><span style="font-size:11px;">If any prohibited item (Mobile etc) is found in possession it will be seized.<span id="cke_bm_114E" style="display: none;">&nbsp;</span><span id="cke_bm_135E" style="display: none;">&nbsp;</span></span></li>';
	printPage+='</ol></td></tr>';
	
	printPage+='<tr><td colspan="3" style="line-height:8px;">&nbsp;</td><td colspan="3" style="text-align: right;line-height:8px;"><span style="font-size:11px;">I have read the rules carefully.</span></td></tr>';
	printPage+='<tr><td colspan="3" >&nbsp;</td><td colspan="3" style="text-align: right;"><img height="45" src='+sign+' style="font-size: 12px;" width="100px;" id="sign_id" /></td></tr>';
	printPage+='<tr><td colspan="3" style="line-height:8px;">&nbsp;</td><td colspan="3" style="text-align: right;line-height:8px;"><span style="font-size:12px;">Signature of the Candidate.</span></td></tr>';
	
	printPage+='<tr><td colspan="3" style="line-height:8px;">&nbsp;</td><td colspan="3" style="text-align: right;line-height:8px;"><span style="font-size:12px;">Enrollment No :<b> '+$("#txtAppEnrollmentNo_div").html()+'</b></span></td></tr>';
	
	printPage+='</tbody></table>';
	
	
	/*
	
	
	
	
	printPage+='<td style="text-align: center;" width="40%"  ><img align="middle"  src="'+photo+'" width="45%" id="hallTicketPhotoId" /></td>';
	
	printPage+='</tr></tbody></table>';
	//banner end
	//heading  start
	printPage+='<div style="padding-top: 12px; font-weight: bold;text-align: center;margin-bottom: 2%;">Examination Admission Card </div>'; 
	//heading end
	
	//27Sep Start
	printPage+='<table border="0" cellpadding="2" cellspacing="0" style="vertical-align:top;margin-bottom: 2%;" width="100%"><tbody>';
	printPage+='<tr><td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Status:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#txtAppName_div").html()+'</strong></span></td>';
	printPage+='<td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Roll No:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#txtProgramName_div").html()+'</strong></span></td></tr>';
	printPage+='<tr><td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Examination Centre:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#txtAppEnrollmentNo_div").html()+'</strong></span></td>';
	printPage+='<td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Examination Center Code:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#txtAppRollNo_div").html()+'</strong></span></td></tr>';
	printPage+='</tbody></table>';
	
	var subjectWiseData=viewDetailsJSON.ViewDetails.subjectWiseData;
	//subjectWiseData[enrollmentKey][semesterKey][0].txtApplyingSemName;
	printPage+='<div>';
	printPage+='Please Admit Mr./Ms '+$("#txtAppName_div").html()+' S/D of Mr '+$("#txtFatherName_div").html()+' in the '+subjectWiseData[enrollmentKey][semesterKey][0].txtApplyingSemName+' '+$("#txtProgramName_div").html()+' Branch Examination to be held in '+ $("#txtSGMName_div").html() ' in the following subjects :';
	printPage+='</div>';
		
		
	printPage+='<table border="0" cellpadding="2" cellspacing="0" style="vertical-align:top;margin-bottom: 2%;width: 70%;position: relative;left: 15%;">';
	printPage+='<thead><tr>';
	//printPage+='<th style="text-align: center;border: 1px solid #dddddd;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Enrollment Type</span></th>';
	//printPage+='<th style="text-align: center;border: 1px solid #dddddd;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Semester Name</span></th>';
	printPage+='<th style="text-align: center;border: 1px solid #dddddd;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Subject Code</span></th>';
	printPage+='<th style="text-align: center;border: 1px solid #dddddd;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Subject Name</span></th>';
	printPage+='<th style="text-align: center;border: 1px solid #dddddd;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Subject Type</span></th>';
	//printPage+='<th>style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Exam Date</span></th>';
	//printPage+='<th>style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Exam Time</span></th>';
	//printPage+='<th>style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Repetition Attempt for</span></th>';
	//printPage+='<th>style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Repetition Attempt number</span></th>';
	printPage+='</tr></thead>';
	printPage+='<tbody>';
	if(subjectWiseData!=null && subjectWiseData!="" && subjectWiseData!=undefined){
		var subjectWiseKeys = Object.keys(viewDetailsJSON.ViewDetails.subjectWiseData);
		for(var i=0;i<subjectWiseKeys.length;i++){
			var subWiseKeysData = viewDetailsJSON.ViewDetails.subjectWiseData[subjectWiseKeys[i]];
			var perEnrollTypeKeys = Object.keys(subWiseKeysData);
			for(var j=0;j<perEnrollTypeKeys.length;j++){
				var perEnrollTypeData = viewDetailsJSON.ViewDetails.subjectWiseData[subjectWiseKeys[i]][perEnrollTypeKeys[j]];
				for(var k=0;k<perEnrollTypeData.length;k++){	
	//printPage+='<tr><td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[k].txtAppEnrollmentType+'</strong></span></td>';
	//printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[k].txtApplyingSemName+'</strong></span></td>';
	printPage+='<tr><td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[k].subject_code+'</strong></span></td>';
	printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[k].subject_name+'</strong></span></td>';
	printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[k].subject_category_name+'</strong></span></td>';
	
	//printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#sgm_academic_year_name_div").html()+'</strong></span></td>';
	//printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+""+'</strong></span></td>';
	//printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+""+'</strong></span></td>';
	//printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+""+'</strong></span></td>';
	//printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+""+'</strong></span></td>';
	printPage+='</tr>';			
				}
			}
		}
		var subjectJsonRequest=subjectWiseData[enrollmentKey][semesterKey];
		for(var subjectCtr=0;subjectCtr<subjectJsonRequest.length; subjectCtr++){
			printPage+='<tr><td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[subjectCtr].subject_code+'</strong></span></td>';
			printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[subjectCtr].subject_name+'</strong></span></td>';
			printPage+='<td style="text-align: center;border: 1px solid #dddddd;" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+perEnrollTypeData[subjectCtr].subject_category_name+'</strong></span></td>';
			
			
		}
		
	}
	printPage+='</tbody></table>';
	printPage+='<table border="0" cellpadding="2" cellspacing="0" style="vertical-align:top;margin-bottom: 2%;" width="100%"><tbody>';
	printPage+='<tr><td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Transaction ref. No.:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#paymentTransactionNo_div").html()+'</strong></span></td>';
	printPage+='<td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Fee Paid:</span></td>';
	printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+$("#txt_Amount_div").html()+'</strong></span></td></tr>';
	//printPage+='<tr><td style="text-align: right;" valign="top"  width="25%"><span style="font-size:12px;font-family: Arial;">Payment Date:</span></td>';
	//printPage+='<td style="" valign="top" width="25%"><span style="font-size:12px;font-family: Arial;"><strong>'+viewDetailsJSON.ViewDetails.frontEndData[0].payment_response_time+'</strong></span></td></tr>
	printPage+='</tbody></table>';
	
	
	printPage+='<table border="0" cellpadding="2" cellspacing="0" style="vertical-align:top;margin-bottom: 2%;width: 70%;position: relative;left: 15%;" width="100%"><tbody><tr><td><strong>Important Points:-</strong> </td></tr>';
	printPage+='<tr><td>1. No student will be allowed to appear in end semester examination without Examination Admit card and Student ID Card</td></tr>';
	printPage+='<tr><td>2. If Original Examination Admit Card is lost, student will be allowed to appear in the examination only after issuance of Duplicate Examination Admit Card, that can be obtained by the student from Examination Department after producing fee slip of Rs.300/- issued by Accounts Department for Duplicate Examination Admit Card.</td></tr>';
	printPage+='<tr><td>3. Exam Duration is two hours only (except for B.Pharma + Ph.D)</td></tr></tbody></table>';

	printPage+="<br><br>";
	printPage+='<table border="0" cellpadding="2" cellspacing="0" style="vertical-align:top;margin-bottom: 2%;width: 70%;position: relative;left: 15%;" width="100%"><tbody>';
	printPage+='<tr><td style="width: 25%;"><img src="https://www.digialm.com/EForms/images/onlineAppForm/form63409/signatureCtrlExam.jpg" width="60%"> </td>';
	printPage+='<td style="width: 25%;"> </td>';
	printPage+='<td style=" width: 25%;"> <img align="middle"  src="'+sign+'" width="60%" id="hallTicketSignId" /></td>';
	printPage+='<td style="width: 25%;"> </td></tr>';
	printPage+='<tr><td>Controller of Examination </td><td>Signature of Head of Dept. </td><td>Full Signature of Candidate </td><td>Date </td></tr></tbody></table>';
	*/console.info("printPage !" +printPage);
	return printPage;
}
function showFields(ids)
{
	for(var ctr=0;ctr<ids.length;ctr++)
		$("#" + ids[ctr]).show();
}
//23Aug Starts
function getSubjectCodeForRegularFee(fieldId){
	var tableId = fieldId+"_tbl";
	var tableId_len = $("#"+tableId+" tr").length;
	var tableData = new Array();
	for(var i=0;i<tableId_len;i++){
		//tableData[i] = $("#"+tableId+" tr").find('td:eq(3)').text();
		tableData[i] = $('#'+'subjectCode'+i+fieldId).text();
	}
return tableData;
}
//23Aug Ends
function getCurrentDateFromServer(){
	var actionId = 'currentDate';
	var argNum = 0;
	var arrayArg = new Array();
	var xmlhttp;
	if (window.XMLHttpRequest) {
		xmlhttp = new XMLHttpRequest();
	} else {
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	var parameterString = "actionId=" + actionId + "&argnum=" + argNum;
	xmlhttp.open("POST", "/EForms/cdmsservlet", true);
	xmlhttp.setRequestHeader("Content-Type",
			"application/x-www-form-urlencoded");
	xmlhttp.send(parameterString);
	xmlhttp.onreadystatechange = function() {
		if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			var response = xmlhttp.responseText;
			if (response != null) {
				//alert(response);
				currentDate=validDateFormat(response);
			}
		}
	}
}
function validDateFormat(date) {
	if(date!='' && date!=null)
	{
 var year = date.substring(0, 4);
var month = date.substring(5, 7);
var day = date.substring(8, 10);
var newDate = day + "/" + month + "/" + year;
  return newDate;
	}
	else
	{
		return "";
	}
}
var conditionalIndex="";
function conditionalEnrollment(enrollId,semId)
{
	if(candidateDataJSON!="" && candidateDataJSON!=undefined && candidateDataJSON!=null)
	{
		var ariaExpanded=$("#collapse"+enrollId+semId).attr("aria-expanded");
		++conditionalIndex;
		if(candidateDataJSON[0].hasOwnProperty('eligibility')){
			if(candidateDataJSON[0]["eligibility"].conditional_case=="Y" && ariaExpanded=="false" && conditionalIndex!="2")
				{
				if($("#instructionNotePopup").length == 1){
		            $("#instructionNotePopup").modal("show");
		    }
				}
			if(candidateDataJSON[0]["eligibility"].conditional_case=="Y" && ariaExpanded=="true" && conditionalIndex=="2")
			{
				if($("#instructionNotePopup").length == 1){
		            $("#instructionNotePopup").modal("show");
		    }
			}
		}
	
	}
}
function ins_check()
{
	if (jQuery("#chkConfirm").is(":checked"))
	{
		//$("#instructionNotePopup").css("display","none");
		$("#instructionNotePopup").modal("hide");
    }
	else
	{
	 	alertMsg("Please accept terms and conditions.");
     	return false;
	}
}